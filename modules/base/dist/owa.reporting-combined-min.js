/*! jQuery v1.6.4 http://jquery.com/ | http://jquery.org/license */
!function(e,t){function i(e){return I.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}function s(e){if(!ct[e]){var t=T.body,i=I("<"+e+">").appendTo(t),s=i.css("display");i.remove(),"none"!==s&&""!==s||(ot||((ot=T.createElement("iframe")).frameBorder=ot.width=ot.height=0),t.appendChild(ot),at&&ot.createElement||((at=(ot.contentWindow||ot.contentDocument).document).write(("CSS1Compat"===T.compatMode?"<!doctype html>":"")+"<html><body>"),at.close()),i=at.createElement(e),at.body.appendChild(i),s=I.css(i,"display"),t.removeChild(ot)),ct[e]=s}return ct[e]}function r(e,t){var i={};return I.each(pt.concat.apply([],pt.slice(0,t)),(function(){i[this]=e})),i}function n(){dt=t}function o(){return setTimeout(n,0),dt=I.now()}function a(){try{return new e.XMLHttpRequest}catch(e){}}function l(e,t,i,s){if(I.isArray(t))I.each(t,(function(t,r){i||Re.test(e)?s(e,r):l(e+"["+("object"==typeof r||I.isArray(r)?t:"")+"]",r,i,s)}));else if(i||null==t||"object"!=typeof t)s(e,t);else for(var r in t)l(e+"["+r+"]",t[r],i,s)}function d(e,i){var s,r,n=I.ajaxSettings.flatOptions||{};for(s in i)i[s]!==t&&((n[s]?e:r||(r={}))[s]=i[s]);r&&I.extend(!0,e,r)}function c(e,i,s,r,n,o){(o=o||{})[n=n||i.dataTypes[0]]=!0;for(var a,l=e[n],d=0,h=l?l.length:0,u=e===Je;d<h&&(u||!a);d++)"string"==typeof(a=l[d](i,s,r))&&(!u||o[a]?a=t:(i.dataTypes.unshift(a),a=c(e,i,s,r,a,o)));return(u||!a)&&!o["*"]&&(a=c(e,i,s,r,"*",o)),a}function h(e){return function(t,i){if("string"!=typeof t&&(i=t,t="*"),I.isFunction(i))for(var s,r,n=t.toLowerCase().split(Ve),o=0,a=n.length;o<a;o++)s=n[o],(r=/^\+/.test(s))&&(s=s.substr(1)||"*"),(e[s]=e[s]||[])[r?"unshift":"push"](i)}}function u(e,t,i){var s="width"===t?e.offsetWidth:e.offsetHeight,r="width"===t?Ie:Pe;return s>0?("border"!==i&&I.each(r,(function(){i||(s-=parseFloat(I.css(e,"padding"+this))||0),"margin"===i?s+=parseFloat(I.css(e,i+this))||0:s-=parseFloat(I.css(e,"border"+this+"Width"))||0})),s+"px"):(((s=Ce(e,t,t))<0||null==s)&&(s=e.style[t]||0),s=parseFloat(s)||0,i&&I.each(r,(function(){s+=parseFloat(I.css(e,"padding"+this))||0,"padding"!==i&&(s+=parseFloat(I.css(e,"border"+this+"Width"))||0),"margin"===i&&(s+=parseFloat(I.css(e,i+this))||0)})),s+"px")}function p(e,t){t.src?I.ajax({url:t.src,async:!1,dataType:"script"}):I.globalEval((t.text||t.textContent||t.innerHTML||"").replace(_e,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function f(e){I.nodeName(e,"input")?g(e):"getElementsByTagName"in e&&I.grep(e.getElementsByTagName("input"),g)}function g(e){"checkbox"!==e.type&&"radio"!==e.type||(e.defaultChecked=e.checked)}function m(e){return"getElementsByTagName"in e?e.getElementsByTagName("*"):"querySelectorAll"in e?e.querySelectorAll("*"):[]}function v(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),"object"===(i=t.nodeName.toLowerCase())?t.outerHTML=e.outerHTML:"input"!==i||"checkbox"!==e.type&&"radio"!==e.type?"option"===i?t.selected=e.defaultSelected:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(I.expando))}function b(e,t){if(1===t.nodeType&&I.hasData(e)){var i=I.expando,s=I.data(e),r=I.data(t,s);if(s=s[i]){var n=s.events;if(r=r[i]=I.extend({},s),n)for(var o in delete r.handle,r.events={},n)for(var a=0,l=n[o].length;a<l;a++)I.event.add(t,o+(n[o][a].namespace?".":"")+n[o][a].namespace,n[o][a],n[o][a].data)}}}function y(e,t){return I.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function w(e,t,i){if(t=t||0,I.isFunction(t))return I.grep(e,(function(e,s){return!!t.call(e,s,e)===i}));if(t.nodeType)return I.grep(e,(function(e,s){return e===t===i}));if("string"==typeof t){var s=I.grep(e,(function(e){return 1===e.nodeType}));if(le.test(t))return I.filter(t,s,!i);t=I.filter(t,s)}return I.grep(e,(function(e,s){return I.inArray(e,t)>=0===i}))}function _(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function x(e,t){return(e&&"*"!==e?e+".":"")+t.replace(X,"`").replace($,"&")}function C(e){var t,i,s,r,n,o,a,l,d,c,h,u,p=[],f=[],g=I._data(this,"events");if(e.liveFired!==this&&g&&g.live&&!e.target.disabled&&(!e.button||"click"!==e.type)){e.namespace&&(h=new RegExp("(^|\\.)"+e.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),e.liveFired=this;var m=g.live.slice(0);for(a=0;a<m.length;a++)(n=m[a]).origType.replace(Y,"")===e.type?f.push(n.selector):m.splice(a--,1);for(l=0,d=(r=I(e.target).closest(f,e.currentTarget)).length;l<d;l++)for(c=r[l],a=0;a<m.length;a++)n=m[a],c.selector!==n.selector||h&&!h.test(n.namespace)||c.elem.disabled||(o=c.elem,s=null,"mouseenter"!==n.preType&&"mouseleave"!==n.preType||(e.type=n.preType,(s=I(e.relatedTarget).closest(n.selector)[0])&&I.contains(o,s)&&(s=o)),(!s||s!==o)&&p.push({elem:o,handleObj:n,level:c.level}));for(l=0,d=p.length;l<d&&(r=p[l],!(i&&r.level>i))&&(e.currentTarget=r.elem,e.data=r.handleObj.data,e.handleObj=r.handleObj,!1!==(u=r.handleObj.origHandler.apply(r.elem,arguments))&&!e.isPropagationStopped()||(i=r.level,!1===u&&(t=!1),!e.isImmediatePropagationStopped()));l++);return t}}function k(e,i,s){var r=I.extend({},s[0]);r.type=e,r.originalEvent={},r.liveFired=t,I.event.handle.call(i,r),r.isDefaultPrevented()&&s[0].preventDefault()}function D(){return!0}function j(){return!1}function S(e,i,s){var r=i+"defer",n=i+"queue",o=i+"mark",a=I.data(e,r,t,!0);a&&("queue"===s||!I.data(e,n,t,!0))&&("mark"===s||!I.data(e,o,t,!0))&&setTimeout((function(){!I.data(e,n,t,!0)&&!I.data(e,o,t,!0)&&(I.removeData(e,r,!0),a.resolve())}),0)}function M(e){for(var t in e)if("toJSON"!==t)return!1;return!0}function A(e,i,s){if(s===t&&1===e.nodeType){var r="data-"+i.replace(N,"-$1").toLowerCase();if("string"==typeof(s=e.getAttribute(r))){try{s="true"===s||"false"!==s&&("null"===s?null:I.isNaN(s)?q.test(s)?I.parseJSON(s):s:parseFloat(s))}catch(e){}I.data(e,i,s)}else s=t}return s}var T=e.document,F=e.navigator,O=e.location,I=function(){function i(){if(!a.isReady){try{T.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}a.ready()}}var s,r,n,o,a=function(e,t){return new a.fn.init(e,t,s)},l=e.jQuery,d=e.$,c=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=/\S/,u=/^\s+/,p=/\s+$/,f=/\d/,g=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,m=/^[\],:{}\s]*$/,v=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,b=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,w=/(webkit)[ \/]([\w.]+)/,_=/(opera)(?:.*version)?[ \/]([\w.]+)/,x=/(msie) ([\w.]+)/,C=/(mozilla)(?:.*? rv:([\w.]+))?/,k=/-([a-z]|[0-9])/gi,D=/^-ms-/,j=function(e,t){return(t+"").toUpperCase()},S=F.userAgent,M=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,I=Array.prototype.slice,P=String.prototype.trim,E=Array.prototype.indexOf,q={};return a.fn=a.prototype={constructor:a,init:function(e,i,s){var r,n,o,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!i&&T.body)return this.context=T,this[0]=T.body,this.selector=e,this.length=1,this;if("string"==typeof e){if((r="<"!==e.charAt(0)||">"!==e.charAt(e.length-1)||e.length<3?c.exec(e):[null,e,null])&&(r[1]||!i)){if(r[1])return l=(i=i instanceof a?i[0]:i)?i.ownerDocument||i:T,(o=g.exec(e))?a.isPlainObject(i)?(e=[T.createElement(o[1])],a.fn.attr.call(e,i,!0)):e=[l.createElement(o[1])]:e=((o=a.buildFragment([r[1]],[l])).cacheable?a.clone(o.fragment):o.fragment).childNodes,a.merge(this,e);if((n=T.getElementById(r[2]))&&n.parentNode){if(n.id!==r[2])return s.find(e);this.length=1,this[0]=n}return this.context=T,this.selector=e,this}return!i||i.jquery?(i||s).find(e):this.constructor(i).find(e)}return a.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),a.makeArray(e,this))},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length},toArray:function(){return I.call(this,0)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,i){var s=this.constructor();return a.isArray(e)?O.apply(s,e):a.merge(s,e),s.prevObject=this,s.context=this.context,"find"===t?s.selector=this.selector+(this.selector?" ":"")+i:t&&(s.selector=this.selector+"."+t+"("+i+")"),s},each:function(e,t){return a.each(this,e,t)},ready:function(e){return a.bindReady(),n.done(e),this},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(I.apply(this,arguments),"slice",I.call(arguments).join(","))},map:function(e){return this.pushStack(a.map(this,(function(t,i){return e.call(t,i,t)})))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},a.fn.init.prototype=a.fn,a.extend=a.fn.extend=function(){var e,i,s,r,n,o,l=arguments[0]||{},d=1,c=arguments.length,h=!1;for("boolean"==typeof l&&(h=l,l=arguments[1]||{},d=2),"object"!=typeof l&&!a.isFunction(l)&&(l={}),c===d&&(l=this,--d);d<c;d++)if(null!=(e=arguments[d]))for(i in e)s=l[i],l!==(r=e[i])&&(h&&r&&(a.isPlainObject(r)||(n=a.isArray(r)))?(n?(n=!1,o=s&&a.isArray(s)?s:[]):o=s&&a.isPlainObject(s)?s:{},l[i]=a.extend(h,o,r)):r!==t&&(l[i]=r));return l},a.extend({noConflict:function(t){return e.$===a&&(e.$=d),t&&e.jQuery===a&&(e.jQuery=l),a},isReady:!1,readyWait:1,holdReady:function(e){e?a.readyWait++:a.ready(!0)},ready:function(e){if(!0===e&&!--a.readyWait||!0!==e&&!a.isReady){if(!T.body)return setTimeout(a.ready,1);if(a.isReady=!0,!0!==e&&--a.readyWait>0)return;n.resolveWith(T,[a]),a.fn.trigger&&a(T).trigger("ready").unbind("ready")}},bindReady:function(){if(!n){if(n=a._Deferred(),"complete"===T.readyState)return setTimeout(a.ready,1);if(T.addEventListener)T.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",a.ready,!1);else if(T.attachEvent){T.attachEvent("onreadystatechange",o),e.attachEvent("onload",a.ready);var t=!1;try{t=null==e.frameElement}catch(e){}T.documentElement.doScroll&&t&&i()}}},isFunction:function(e){return"function"===a.type(e)},isArray:Array.isArray||function(e){return"array"===a.type(e)},isWindow:function(e){return e&&"object"==typeof e&&"setInterval"in e},isNaN:function(e){return null==e||!f.test(e)||isNaN(e)},type:function(e){return null==e?String(e):q[M.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==a.type(e)||e.nodeType||a.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var i;for(i in e);return i===t||A.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw e},parseJSON:function(t){return"string"==typeof t&&t?(t=a.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):m.test(t.replace(v,"@").replace(b,"]").replace(y,""))?new Function("return "+t)():void a.error("Invalid JSON: "+t)):null},parseXML:function(i){var s;try{e.DOMParser?s=(new DOMParser).parseFromString(i,"text/xml"):((s=new ActiveXObject("Microsoft.XMLDOM")).async="false",s.loadXML(i))}catch(e){s=t}return(!s||!s.documentElement||s.getElementsByTagName("parsererror").length)&&a.error("Invalid XML: "+i),s},noop:function(){},globalEval:function(t){t&&h.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(k,j)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,i,s){var r,n=0,o=e.length,l=o===t||a.isFunction(e);if(s)if(l){for(r in e)if(!1===i.apply(e[r],s))break}else for(;n<o&&!1!==i.apply(e[n++],s););else if(l){for(r in e)if(!1===i.call(e[r],r,e[r]))break}else for(;n<o&&!1!==i.call(e[n],n,e[n++]););return e},trim:P?function(e){return null==e?"":P.call(e)}:function(e){return null==e?"":(e+"").replace(u,"").replace(p,"")},makeArray:function(e,t){var i=t||[];if(null!=e){var s=a.type(e);null==e.length||"string"===s||"function"===s||"regexp"===s||a.isWindow(e)?O.call(i,e):a.merge(i,e)}return i},inArray:function(e,t){if(!t)return-1;if(E)return E.call(t,e);for(var i=0,s=t.length;i<s;i++)if(t[i]===e)return i;return-1},merge:function(e,i){var s=e.length,r=0;if("number"==typeof i.length)for(var n=i.length;r<n;r++)e[s++]=i[r];else for(;i[r]!==t;)e[s++]=i[r++];return e.length=s,e},grep:function(e,t,i){var s=[];i=!!i;for(var r=0,n=e.length;r<n;r++)i!==!!t(e[r],r)&&s.push(e[r]);return s},map:function(e,i,s){var r,n,o=[],l=0,d=e.length;if(e instanceof a||d!==t&&"number"==typeof d&&(d>0&&e[0]&&e[d-1]||0===d||a.isArray(e)))for(;l<d;l++)null!=(r=i(e[l],l,s))&&(o[o.length]=r);else for(n in e)null!=(r=i(e[n],n,s))&&(o[o.length]=r);return o.concat.apply([],o)},guid:1,proxy:function(e,i){if("string"==typeof i){var s=e[i];i=e,e=s}if(!a.isFunction(e))return t;var r=I.call(arguments,2),n=function(){return e.apply(i,r.concat(I.call(arguments)))};return n.guid=e.guid=e.guid||n.guid||a.guid++,n},access:function(e,i,s,r,n,o){var l=e.length;if("object"==typeof i){for(var d in i)a.access(e,d,i[d],r,n,s);return e}if(s!==t){r=!o&&r&&a.isFunction(s);for(var c=0;c<l;c++)n(e[c],i,r?s.call(e[c],c,n(e[c],i)):s,o);return e}return l?n(e[0],i):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=w.exec(e)||_.exec(e)||x.exec(e)||e.indexOf("compatible")<0&&C.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,i){return new e.fn.init(t,i)}a.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,s){return s&&s instanceof a&&!(s instanceof e)&&(s=e(s)),a.fn.init.call(this,i,s,t)},e.fn.init.prototype=e.fn;var t=e(T);return e},browser:{}}),a.each("Boolean Number String Function Array Date RegExp Object".split(" "),(function(e,t){q["[object "+t+"]"]=t.toLowerCase()})),(r=a.uaMatch(S)).browser&&(a.browser[r.browser]=!0,a.browser.version=r.version),a.browser.webkit&&(a.browser.safari=!0),h.test(" ")&&(u=/^[\s\xA0]+/,p=/[\s\xA0]+$/),s=a(T),T.addEventListener?o=function(){T.removeEventListener("DOMContentLoaded",o,!1),a.ready()}:T.attachEvent&&(o=function(){"complete"===T.readyState&&(T.detachEvent("onreadystatechange",o),a.ready())}),a}(),P="done fail isResolved isRejected promise then always pipe".split(" "),E=[].slice;I.extend({_Deferred:function(){var e,t,i,s=[],r={done:function(){if(!i){var t,n,o,a,l,d=arguments;for(e&&(l=e,e=0),t=0,n=d.length;t<n;t++)o=d[t],"array"===(a=I.type(o))?r.done.apply(r,o):"function"===a&&s.push(o);l&&r.resolveWith(l[0],l[1])}return this},resolveWith:function(r,n){if(!i&&!e&&!t){n=n||[],t=1;try{for(;s[0];)s.shift().apply(r,n)}finally{e=[r,n],t=0}}return this},resolve:function(){return r.resolveWith(this,arguments),this},isResolved:function(){return!!t||!!e},cancel:function(){return i=1,s=[],this}};return r},Deferred:function(e){var t,i=I._Deferred(),s=I._Deferred();return I.extend(i,{then:function(e,t){return i.done(e).fail(t),this},always:function(){return i.done.apply(i,arguments).fail.apply(this,arguments)},fail:s.done,rejectWith:s.resolveWith,reject:s.resolve,isRejected:s.isResolved,pipe:function(e,t){return I.Deferred((function(s){I.each({done:[e,"resolve"],fail:[t,"reject"]},(function(e,t){var r,n=t[0],o=t[1];I.isFunction(n)?i[e]((function(){(r=n.apply(this,arguments))&&I.isFunction(r.promise)?r.promise().then(s.resolve,s.reject):s[o+"With"](this===i?s:this,[r])})):i[e](s[o])}))})).promise()},promise:function(e){if(null==e){if(t)return t;t=e={}}for(var s=P.length;s--;)e[P[s]]=i[P[s]];return e}}),i.done(s.cancel).fail(i.cancel),delete i.cancel,e&&e.call(i,i),i},when:function(e){function t(e){return function(t){i[e]=arguments.length>1?E.call(arguments,0):t,--n||o.resolveWith(o,E.call(i,0))}}var i=arguments,s=0,r=i.length,n=r,o=r<=1&&e&&I.isFunction(e.promise)?e:I.Deferred();if(r>1){for(;s<r;s++)i[s]&&I.isFunction(i[s].promise)?i[s].promise().then(t(s),o.reject):--n;n||o.resolveWith(o,i)}else o!==e&&o.resolveWith(o,r?[e]:[]);return o.promise()}}),I.support=function(){var e,t,i,s,r,n,o,a,l,d,c,h,u,p,f,g,m=T.createElement("div"),v=T.documentElement;if(m.setAttribute("className","t"),m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",e=m.getElementsByTagName("*"),t=m.getElementsByTagName("a")[0],!e||!e.length||!t)return{};s=(i=T.createElement("select")).appendChild(T.createElement("option")),r=m.getElementsByTagName("input")[0],o={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(t.getAttribute("style")),hrefNormalized:"/a"===t.getAttribute("href"),opacity:/^0.55$/.test(t.style.opacity),cssFloat:!!t.style.cssFloat,checkOn:"on"===r.value,optSelected:s.selected,getSetAttribute:"t"!==m.className,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},r.checked=!0,o.noCloneChecked=r.cloneNode(!0).checked,i.disabled=!0,o.optDisabled=!s.disabled;try{delete m.test}catch(e){o.deleteExpando=!1}for(f in!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",(function(){o.noCloneEvent=!1})),m.cloneNode(!0).fireEvent("onclick")),(r=T.createElement("input")).value="t",r.setAttribute("type","radio"),o.radioValue="t"===r.value,r.setAttribute("checked","checked"),m.appendChild(r),(a=T.createDocumentFragment()).appendChild(m.firstChild),o.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,m.innerHTML="",m.style.width=m.style.paddingLeft="1px",l=T.getElementsByTagName("body")[0],c=T.createElement(l?"div":"body"),h={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},l&&I.extend(h,{position:"absolute",left:"-1000px",top:"-1000px"}),h)c.style[f]=h[f];if(c.appendChild(m),(d=l||v).insertBefore(c,d.firstChild),o.appendChecked=r.checked,o.boxModel=2===m.offsetWidth,"zoom"in m.style&&(m.style.display="inline",m.style.zoom=1,o.inlineBlockNeedsLayout=2===m.offsetWidth,m.style.display="",m.innerHTML="<div style='width:4px;'></div>",o.shrinkWrapBlocks=2!==m.offsetWidth),m.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",g=0===(u=m.getElementsByTagName("td"))[0].offsetHeight,u[0].style.display="",u[1].style.display="none",o.reliableHiddenOffsets=g&&0===u[0].offsetHeight,m.innerHTML="",T.defaultView&&T.defaultView.getComputedStyle&&((n=T.createElement("div")).style.width="0",n.style.marginRight="0",m.appendChild(n),o.reliableMarginRight=0===(parseInt((T.defaultView.getComputedStyle(n,null)||{marginRight:0}).marginRight,10)||0)),c.innerHTML="",d.removeChild(c),m.attachEvent)for(f in{submit:1,change:1,focusin:1})(g=(p="on"+f)in m)||(m.setAttribute(p,"return;"),g="function"==typeof m[p]),o[f+"Bubbles"]=g;return c=a=i=s=l=n=m=r=null,o}(),I.boxModel=I.support.boxModel;var q=/^(?:\{.*\}|\[.*\])$/,N=/([A-Z])/g;I.extend({cache:{},uuid:0,expando:"jQuery"+(I.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?I.cache[e[I.expando]]:e[I.expando])&&!M(e)},data:function(e,i,s,r){if(I.acceptData(e)){var n,o,a=I.expando,l="string"==typeof i,d=e.nodeType,c=d?I.cache:e,h=d?e[I.expando]:e[I.expando]&&I.expando;if((!h||r&&h&&c[h]&&!c[h][a])&&l&&s===t)return;return h||(d?e[I.expando]=h=++I.uuid:h=I.expando),c[h]||(c[h]={},d||(c[h].toJSON=I.noop)),"object"!=typeof i&&"function"!=typeof i||(r?c[h][a]=I.extend(c[h][a],i):c[h]=I.extend(c[h],i)),n=c[h],r&&(n[a]||(n[a]={}),n=n[a]),s!==t&&(n[I.camelCase(i)]=s),"events"!==i||n[i]?(l?null==(o=n[i])&&(o=n[I.camelCase(i)]):o=n,o):n[a]&&n[a].events}},removeData:function(e,t,i){if(I.acceptData(e)){var s,r=I.expando,n=e.nodeType,o=n?I.cache:e,a=n?e[I.expando]:I.expando;if(!o[a])return;if(t&&(s=i?o[a][r]:o[a])&&(s[t]||(t=I.camelCase(t)),delete s[t],!M(s)))return;if(i&&(delete o[a][r],!M(o[a])))return;var l=o[a][r];I.support.deleteExpando||!o.setInterval?delete o[a]:o[a]=null,l?(o[a]={},n||(o[a].toJSON=I.noop),o[a][r]=l):n&&(I.support.deleteExpando?delete e[I.expando]:e.removeAttribute?e.removeAttribute(I.expando):e[I.expando]=null)}},_data:function(e,t,i){return I.data(e,t,i,!0)},acceptData:function(e){if(e.nodeName){var t=I.noData[e.nodeName.toLowerCase()];if(t)return!0!==t&&e.getAttribute("classid")===t}return!0}}),I.fn.extend({data:function(e,i){var s=null;if(void 0===e){if(this.length&&(s=I.data(this[0]),1===this[0].nodeType))for(var r,n=this[0].attributes,o=0,a=n.length;o<a;o++)0===(r=n[o].name).indexOf("data-")&&(r=I.camelCase(r.substring(5)),A(this[0],r,s[r]));return s}if("object"==typeof e)return this.each((function(){I.data(this,e)}));var l=e.split(".");return l[1]=l[1]?"."+l[1]:"",i===t?((s=this.triggerHandler("getData"+l[1]+"!",[l[0]]))===t&&this.length&&(s=I.data(this[0],e),s=A(this[0],e,s)),s===t&&l[1]?this.data(l[0]):s):this.each((function(){var t=I(this),s=[l[0],i];t.triggerHandler("setData"+l[1]+"!",s),I.data(this,e,i),t.triggerHandler("changeData"+l[1]+"!",s)}))},removeData:function(e){return this.each((function(){I.removeData(this,e)}))}}),I.extend({_mark:function(e,i){e&&(i=(i||"fx")+"mark",I.data(e,i,(I.data(e,i,t,!0)||0)+1,!0))},_unmark:function(e,i,s){if(!0!==e&&(s=i,i=e,e=!1),i){var r=(s=s||"fx")+"mark",n=e?0:(I.data(i,r,t,!0)||1)-1;n?I.data(i,r,n,!0):(I.removeData(i,r,!0),S(i,s,"mark"))}},queue:function(e,i,s){if(e){i=(i||"fx")+"queue";var r=I.data(e,i,t,!0);return s&&(!r||I.isArray(s)?r=I.data(e,i,I.makeArray(s),!0):r.push(s)),r||[]}},dequeue:function(e,t){t=t||"fx";var i=I.queue(e,t),s=i.shift();"inprogress"===s&&(s=i.shift()),s&&("fx"===t&&i.unshift("inprogress"),s.call(e,(function(){I.dequeue(e,t)}))),i.length||(I.removeData(e,t+"queue",!0),S(e,t,"queue"))}}),I.fn.extend({queue:function(e,i){return"string"!=typeof e&&(i=e,e="fx"),i===t?I.queue(this[0],e):this.each((function(){var t=I.queue(this,e,i);"fx"===e&&"inprogress"!==t[0]&&I.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){I.dequeue(this,e)}))},delay:function(e,t){return e=I.fx&&I.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(){var i=this;setTimeout((function(){I.dequeue(i,t)}),e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){function s(){--l||n.resolveWith(o,[o])}"string"!=typeof e&&(e,e=t),e=e||"fx";for(var r,n=I.Deferred(),o=this,a=o.length,l=1,d=e+"defer",c=e+"queue",h=e+"mark";a--;)(r=I.data(o[a],d,t,!0)||(I.data(o[a],c,t,!0)||I.data(o[a],h,t,!0))&&I.data(o[a],d,I._Deferred(),!0))&&(l++,r.done(s));return s(),n.promise()}});var R,z,W=/[\n\t\r]/g,L=/\s+/,Q=/\r/g,G=/^(?:button|input)$/i,B=/^(?:button|input|object|select|textarea)$/i,H=/^a(?:rea)?$/i,U=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i;I.fn.extend({attr:function(e,t){return I.access(this,e,t,!0,I.attr)},removeAttr:function(e){return this.each((function(){I.removeAttr(this,e)}))},prop:function(e,t){return I.access(this,e,t,!0,I.prop)},removeProp:function(e){return e=I.propFix[e]||e,this.each((function(){try{this[e]=t,delete this[e]}catch(e){}}))},addClass:function(e){var t,i,s,r,n,o,a;if(I.isFunction(e))return this.each((function(t){I(this).addClass(e.call(this,t,this.className))}));if(e&&"string"==typeof e)for(t=e.split(L),i=0,s=this.length;i<s;i++)if(1===(r=this[i]).nodeType)if(r.className||1!==t.length){for(n=" "+r.className+" ",o=0,a=t.length;o<a;o++)~n.indexOf(" "+t[o]+" ")||(n+=t[o]+" ");r.className=I.trim(n)}else r.className=e;return this},removeClass:function(e){var i,s,r,n,o,a,l;if(I.isFunction(e))return this.each((function(t){I(this).removeClass(e.call(this,t,this.className))}));if(e&&"string"==typeof e||e===t)for(i=(e||"").split(L),s=0,r=this.length;s<r;s++)if(1===(n=this[s]).nodeType&&n.className)if(e){for(o=(" "+n.className+" ").replace(W," "),a=0,l=i.length;a<l;a++)o=o.replace(" "+i[a]+" "," ");n.className=I.trim(o)}else n.className="";return this},toggleClass:function(e,t){var i=typeof e,s="boolean"==typeof t;return I.isFunction(e)?this.each((function(i){I(this).toggleClass(e.call(this,i,this.className,t),t)})):this.each((function(){if("string"===i)for(var r,n=0,o=I(this),a=t,l=e.split(L);r=l[n++];)a=s?a:!o.hasClass(r),o[a?"addClass":"removeClass"](r);else"undefined"!==i&&"boolean"!==i||(this.className&&I._data(this,"__className__",this.className),this.className=this.className||!1===e?"":I._data(this,"__className__")||"")}))},hasClass:function(e){for(var t=" "+e+" ",i=0,s=this.length;i<s;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(W," ").indexOf(t)>-1)return!0;return!1},val:function(e){var i,s,r=this[0];if(!arguments.length)return r?(i=I.valHooks[r.nodeName.toLowerCase()]||I.valHooks[r.type])&&"get"in i&&(s=i.get(r,"value"))!==t?s:"string"==typeof(s=r.value)?s.replace(Q,""):null==s?"":s:t;var n=I.isFunction(e);return this.each((function(s){var r,o=I(this);1===this.nodeType&&(null==(r=n?e.call(this,s,o.val()):e)?r="":"number"==typeof r?r+="":I.isArray(r)&&(r=I.map(r,(function(e){return null==e?"":e+""}))),(i=I.valHooks[this.nodeName.toLowerCase()]||I.valHooks[this.type])&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))}))}}),I.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i=e.selectedIndex,s=[],r=e.options,n="select-one"===e.type;if(i<0)return null;for(var o=n?i:0,a=n?i+1:r.length;o<a;o++){var l=r[o];if(l.selected&&(I.support.optDisabled?!l.disabled:null===l.getAttribute("disabled"))&&(!l.parentNode.disabled||!I.nodeName(l.parentNode,"optgroup"))){if(t=I(l).val(),n)return t;s.push(t)}}return n&&!s.length&&r.length?I(r[i]).val():s},set:function(e,t){var i=I.makeArray(t);return I(e).find("option").each((function(){this.selected=I.inArray(I(this).val(),i)>=0})),i.length||(e.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attrFix:{tabindex:"tabIndex"},attr:function(e,i,s,r){var n=e.nodeType;if(!e||3===n||8===n||2===n)return t;if(r&&i in I.attrFn)return I(e)[i](s);if(!("getAttribute"in e))return I.prop(e,i,s);var o,a,l=1!==n||!I.isXMLDoc(e);return l&&(i=I.attrFix[i]||i,(a=I.attrHooks[i])||(U.test(i)?a=z:R&&(a=R))),s!==t?null===s?(I.removeAttr(e,i),t):a&&"set"in a&&l&&(o=a.set(e,s,i))!==t?o:(e.setAttribute(i,""+s),s):a&&"get"in a&&l&&null!==(o=a.get(e,i))?o:null===(o=e.getAttribute(i))?t:o},removeAttr:function(e,t){var i;1===e.nodeType&&(t=I.attrFix[t]||t,I.attr(e,t,""),e.removeAttribute(t),U.test(t)&&(i=I.propFix[t]||t)in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(G.test(e.nodeName)&&e.parentNode)I.error("type property can't be changed");else if(!I.support.radioValue&&"radio"===t&&I.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return R&&I.nodeName(e,"button")?R.get(e,t):t in e?e.value:null},set:function(e,t,i){if(R&&I.nodeName(e,"button"))return R.set(e,t,i);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,s){var r,n,o=e.nodeType;return e&&3!==o&&8!==o&&2!==o?((1!==o||!I.isXMLDoc(e))&&(i=I.propFix[i]||i,n=I.propHooks[i]),s!==t?n&&"set"in n&&(r=n.set(e,s,i))!==t?r:e[i]=s:n&&"get"in n&&null!==(r=n.get(e,i))?r:e[i]):t},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):B.test(e.nodeName)||H.test(e.nodeName)&&e.href?0:t}}}}),I.attrHooks.tabIndex=I.propHooks.tabIndex,z={get:function(e,i){var s;return!0===I.prop(e,i)||(s=e.getAttributeNode(i))&&!1!==s.nodeValue?i.toLowerCase():t},set:function(e,t,i){var s;return!1===t?I.removeAttr(e,i):((s=I.propFix[i]||i)in e&&(e[s]=!0),e.setAttribute(i,i.toLowerCase())),i}},I.support.getSetAttribute||(R=I.valHooks.button={get:function(e,i){var s;return(s=e.getAttributeNode(i))&&""!==s.nodeValue?s.nodeValue:t},set:function(e,t,i){var s=e.getAttributeNode(i);return s||(s=T.createAttribute(i),e.setAttributeNode(s)),s.nodeValue=t+""}},I.each(["width","height"],(function(e,t){I.attrHooks[t]=I.extend(I.attrHooks[t],{set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i}})}))),I.support.hrefNormalized||I.each(["href","src","width","height"],(function(e,i){I.attrHooks[i]=I.extend(I.attrHooks[i],{get:function(e){var s=e.getAttribute(i,2);return null===s?t:s}})})),I.support.style||(I.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),I.support.optSelected||(I.propHooks.selected=I.extend(I.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),I.support.checkOn||I.each(["radio","checkbox"],(function(){I.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}})),I.each(["radio","checkbox"],(function(){I.valHooks[this]=I.extend(I.valHooks[this],{set:function(e,t){if(I.isArray(t))return e.checked=I.inArray(I(e).val(),t)>=0}})}));var Y=/\.(.*)$/,V=/^(?:textarea|input|select)$/i,X=/\./g,$=/ /g,K=/[^\w\s.|`]/g,J=function(e){return e.replace(K,"\\$&")};I.event={add:function(e,i,s,r){if(3!==e.nodeType&&8!==e.nodeType){if(!1===s)s=j;else if(!s)return;var n,o;s.handler&&(s=(n=s).handler),s.guid||(s.guid=I.guid++);var a=I._data(e);if(!a)return;var l=a.events,d=a.handle;l||(a.events=l={}),d||(a.handle=d=function(e){return void 0===I||e&&I.event.triggered===e.type?t:I.event.handle.apply(d.elem,arguments)}),d.elem=e,i=i.split(" ");for(var c,h,u=0;c=i[u++];){o=n?I.extend({},n):{handler:s,data:r},c.indexOf(".")>-1?(h=c.split("."),c=h.shift(),o.namespace=h.slice(0).sort().join(".")):(h=[],o.namespace=""),o.type=c,o.guid||(o.guid=s.guid);var p=l[c],f=I.event.special[c]||{};p||(p=l[c]=[],f.setup&&!1!==f.setup.call(e,r,h,d)||(e.addEventListener?e.addEventListener(c,d,!1):e.attachEvent&&e.attachEvent("on"+c,d))),f.add&&(f.add.call(e,o),o.handler.guid||(o.handler.guid=s.guid)),p.push(o),I.event.global[c]=!0}e=null}},global:{},remove:function(e,i,s,r){if(3!==e.nodeType&&8!==e.nodeType){!1===s&&(s=j);var n,o,a,l,d,c,h,u,p,f=0,g=I.hasData(e)&&I._data(e),m=g&&g.events;if(!g||!m)return;if(i&&i.type&&(s=i.handler,i=i.type),!i||"string"==typeof i&&"."===i.charAt(0)){for(n in i=i||"",m)I.event.remove(e,n+i);return}for(i=i.split(" ");n=i[f++];)if(p=n,u=null,l=[],(a=n.indexOf(".")<0)||(l=n.split("."),n=l.shift(),d=new RegExp("(^|\\.)"+I.map(l.slice(0).sort(),J).join("\\.(?:.*\\.)?")+"(\\.|$)")),h=m[n])if(s){for(c=I.event.special[n]||{},o=r||0;o<h.length&&(u=h[o],s.guid!==u.guid||((a||d.test(u.namespace))&&(null==r&&h.splice(o--,1),c.remove&&c.remove.call(e,u)),null==r));o++);(0===h.length||null!=r&&1===h.length)&&((!c.teardown||!1===c.teardown.call(e,l))&&I.removeEvent(e,n,g.handle),null,delete m[n])}else for(o=0;o<h.length;o++)u=h[o],(a||d.test(u.namespace))&&(I.event.remove(e,p,u.handler,o),h.splice(o--,1));if(I.isEmptyObject(m)){var v=g.handle;v&&(v.elem=null),delete g.events,delete g.handle,I.isEmptyObject(g)&&I.removeData(e,t,!0)}}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,s,r,n){var o,a=i.type||i,l=[];if(a.indexOf("!")>=0&&(a=a.slice(0,-1),o=!0),a.indexOf(".")>=0&&(l=a.split("."),a=l.shift(),l.sort()),r&&!I.event.customEvent[a]||I.event.global[a]){if((i="object"==typeof i?i[I.expando]?i:new I.Event(a,i):new I.Event(a)).type=a,i.exclusive=o,i.namespace=l.join("."),i.namespace_re=new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.)?")+"(\\.|$)"),!n&&r||(i.preventDefault(),i.stopPropagation()),!r)return void I.each(I.cache,(function(){var e=this[I.expando];e&&e.events&&e.events[a]&&I.event.trigger(i,s,e.handle.elem)}));if(3===r.nodeType||8===r.nodeType)return;i.result=t,i.target=r,(s=null!=s?I.makeArray(s):[]).unshift(i);var d=r,c=a.indexOf(":")<0?"on"+a:"";do{var h=I._data(d,"handle");i.currentTarget=d,h&&h.apply(d,s),c&&I.acceptData(d)&&d[c]&&!1===d[c].apply(d,s)&&(i.result=!1,i.preventDefault()),d=d.parentNode||d.ownerDocument||d===i.target.ownerDocument&&e}while(d&&!i.isPropagationStopped());if(!i.isDefaultPrevented()){var u,p=I.event.special[a]||{};if((!p._default||!1===p._default.call(r.ownerDocument,i))&&("click"!==a||!I.nodeName(r,"a"))&&I.acceptData(r)){try{c&&r[a]&&((u=r[c])&&(r[c]=null),I.event.triggered=a,r[a]())}catch(e){}u&&(r[c]=u),I.event.triggered=t}}return i.result}},handle:function(i){i=I.event.fix(i||e.event);var s=((I._data(this,"events")||{})[i.type]||[]).slice(0),r=!i.exclusive&&!i.namespace,n=Array.prototype.slice.call(arguments,0);n[0]=i,i.currentTarget=this;for(var o=0,a=s.length;o<a;o++){var l=s[o];if(r||i.namespace_re.test(l.namespace)){i.handler=l.handler,i.data=l.data,i.handleObj=l;var d=l.handler.apply(this,n);if(d!==t&&(i.result=d,!1===d&&(i.preventDefault(),i.stopPropagation())),i.isImmediatePropagationStopped())break}}return i.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(e){if(e[I.expando])return e;var i=e;e=I.Event(i);for(var s,r=this.props.length;r;)e[s=this.props[--r]]=i[s];if(e.target||(e.target=e.srcElement||T),3===e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),null==e.pageX&&null!=e.clientX){var n=e.target.ownerDocument||T,o=n.documentElement,a=n.body;e.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return null==e.which&&(null!=e.charCode||null!=e.keyCode)&&(e.which=null!=e.charCode?e.charCode:e.keyCode),!e.metaKey&&e.ctrlKey&&(e.metaKey=e.ctrlKey),!e.which&&e.button!==t&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e},guid:1e8,proxy:I.proxy,special:{ready:{setup:I.bindReady,teardown:I.noop},live:{add:function(e){I.event.add(this,x(e.origType,e.selector),I.extend({},e,{handler:C,guid:e.handler.guid}))},remove:function(e){I.event.remove(this,x(e.origType,e.selector),e)}},beforeunload:{setup:function(e,t,i){I.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}}},I.removeEvent=T.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){e.detachEvent&&e.detachEvent("on"+t,i)},I.Event=function(e,t){if(!this.preventDefault)return new I.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?D:j):this.type=e,t&&I.extend(this,t),this.timeStamp=I.now(),this[I.expando]=!0},I.Event.prototype={preventDefault:function(){this.isDefaultPrevented=D;var e=this.originalEvent;!e||(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=D;var e=this.originalEvent;!e||(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=D,this.stopPropagation()},isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j};var Z=function(e){var t=e.relatedTarget,i=!1,s=e.type;e.type=e.data,t!==this&&(t&&(i=I.contains(this,t)),i||(I.event.handle.apply(this,arguments),e.type=s))},ee=function(e){e.type=e.data,I.event.handle.apply(this,arguments)};if(I.each({mouseenter:"mouseover",mouseleave:"mouseout"},(function(e,t){I.event.special[e]={setup:function(i){I.event.add(this,t,i&&i.selector?ee:Z,e)},teardown:function(e){I.event.remove(this,t,e&&e.selector?ee:Z)}}})),I.support.submitBubbles||(I.event.special.submit={setup:function(e,t){if(I.nodeName(this,"form"))return!1;I.event.add(this,"click.specialSubmit",(function(e){var t=e.target,i=I.nodeName(t,"input")||I.nodeName(t,"button")?t.type:"";("submit"===i||"image"===i)&&I(t).closest("form").length&&k("submit",this,arguments)})),I.event.add(this,"keypress.specialSubmit",(function(e){var t=e.target,i=I.nodeName(t,"input")||I.nodeName(t,"button")?t.type:"";("text"===i||"password"===i)&&I(t).closest("form").length&&13===e.keyCode&&k("submit",this,arguments)}))},teardown:function(e){I.event.remove(this,".specialSubmit")}}),!I.support.changeBubbles){var te,ie=function(e){var t=I.nodeName(e,"input")?e.type:"",i=e.value;return"radio"===t||"checkbox"===t?i=e.checked:"select-multiple"===t?i=e.selectedIndex>-1?I.map(e.options,(function(e){return e.selected})).join("-"):"":I.nodeName(e,"select")&&(i=e.selectedIndex),i},se=function(e){var i,s,r=e.target;if(V.test(r.nodeName)&&!r.readOnly){if(i=I._data(r,"_change_data"),s=ie(r),("focusout"!==e.type||"radio"!==r.type)&&I._data(r,"_change_data",s),i===t||s===i)return;(null!=i||s)&&(e.type="change",e.liveFired=t,I.event.trigger(e,arguments[1],r))}};I.event.special.change={filters:{focusout:se,beforedeactivate:se,click:function(e){var t=e.target,i=I.nodeName(t,"input")?t.type:"";("radio"===i||"checkbox"===i||I.nodeName(t,"select"))&&se.call(this,e)},keydown:function(e){var t=e.target,i=I.nodeName(t,"input")?t.type:"";(13===e.keyCode&&!I.nodeName(t,"textarea")||32===e.keyCode&&("checkbox"===i||"radio"===i)||"select-multiple"===i)&&se.call(this,e)},beforeactivate:function(e){var t=e.target;I._data(t,"_change_data",ie(t))}},setup:function(e,t){if("file"===this.type)return!1;for(var i in te)I.event.add(this,i+".specialChange",te[i]);return V.test(this.nodeName)},teardown:function(e){return I.event.remove(this,".specialChange"),V.test(this.nodeName)}},(te=I.event.special.change.filters).focus=te.beforeactivate}I.support.focusinBubbles||I.each({focus:"focusin",blur:"focusout"},(function(e,t){function i(e){var i=I.event.fix(e);i.type=t,i.originalEvent={},I.event.trigger(i,null,i.target),i.isDefaultPrevented()&&e.preventDefault()}var s=0;I.event.special[t]={setup:function(){0==s++&&T.addEventListener(e,i,!0)},teardown:function(){0==--s&&T.removeEventListener(e,i,!0)}}})),I.each(["bind","one"],(function(e,i){I.fn[i]=function(e,s,r){var n;if("object"==typeof e){for(var o in e)this[i](o,s,e[o],r);return this}if(2!==arguments.length&&!1!==s||(r=s,s=t),"one"===i?(n=function(e){return I(this).unbind(e,n),r.apply(this,arguments)},n.guid=r.guid||I.guid++):n=r,"unload"===e&&"one"!==i)this.one(e,s,r);else for(var a=0,l=this.length;a<l;a++)I.event.add(this[a],e,n,s);return this}})),I.fn.extend({unbind:function(e,t){if("object"!=typeof e||e.preventDefault)for(var i=0,s=this.length;i<s;i++)I.event.remove(this[i],e,t);else for(var r in e)this.unbind(r,e[r]);return this},delegate:function(e,t,i,s){return this.live(t,i,s,e)},undelegate:function(e,t,i){return 0===arguments.length?this.unbind("live"):this.die(t,null,i,e)},trigger:function(e,t){return this.each((function(){I.event.trigger(e,t,this)}))},triggerHandler:function(e,t){if(this[0])return I.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,i=e.guid||I.guid++,s=0,r=function(i){var r=(I.data(this,"lastToggle"+e.guid)||0)%s;return I.data(this,"lastToggle"+e.guid,r+1),i.preventDefault(),t[r].apply(this,arguments)||!1};for(r.guid=i;s<t.length;)t[s++].guid=i;return this.click(r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var re={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};I.each(["live","die"],(function(e,i){I.fn[i]=function(e,s,r,n){var o,a,l,d,c=0,h=n||this.selector,u=n?this:I(this.context);if("object"==typeof e&&!e.preventDefault){for(var p in e)u[i](p,s,e[p],h);return this}if("die"===i&&!e&&n&&"."===n.charAt(0))return u.unbind(n),this;for((!1===s||I.isFunction(s))&&(r=s||j,s=t),e=(e||"").split(" ");null!=(o=e[c++]);)if(l="",(a=Y.exec(o))&&(l=a[0],o=o.replace(Y,"")),"hover"!==o)if(d=o,re[o]?(e.push(re[o]+l),o+=l):o=(re[o]||o)+l,"live"===i)for(var f=0,g=u.length;f<g;f++)I.event.add(u[f],"live."+x(o,h),{data:s,selector:h,handler:r,origType:o,origHandler:r,preType:d});else u.unbind("live."+x(o,h),r);else e.push("mouseenter"+l,"mouseleave"+l);return this}})),I.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),(function(e,t){I.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.bind(t,e,i):this.trigger(t)},I.attrFn&&(I.attrFn[t]=!0)})),function(){function e(e,t,i,s,r,n){for(var o=0,a=s.length;o<a;o++){var l=s[o];if(l){var d=!1;for(l=l[e];l;){if(l.sizcache===i){d=s[l.sizset];break}if(1===l.nodeType)if(n||(l.sizcache=i,l.sizset=o),"string"!=typeof t){if(l===t){d=!0;break}}else if(c.filter(t,[l]).length>0){d=l;break}l=l[e]}s[o]=d}}}function i(e,t,i,s,r,n){for(var o=0,a=s.length;o<a;o++){var l=s[o];if(l){var d=!1;for(l=l[e];l;){if(l.sizcache===i){d=s[l.sizset];break}if(1===l.nodeType&&!n&&(l.sizcache=i,l.sizset=o),l.nodeName.toLowerCase()===t){d=l;break}l=l[e]}s[o]=d}}}var s=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=0,n=Object.prototype.toString,o=!1,a=!0,l=/\\/g,d=/\W/;[0,0].sort((function(){return a=!1,0}));var c=function(e,t,i,r){i=i||[];var o=t=t||T;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return i;var a,l,d,p,f,g,m,y,w=!0,_=c.isXML(t),x=[],C=e;do{if(s.exec(""),(a=s.exec(C))&&(C=a[3],x.push(a[1]),a[2])){p=a[3];break}}while(a);if(x.length>1&&u.exec(e))if(2===x.length&&h.relative[x[0]])l=b(x[0]+x[1],t);else for(l=h.relative[x[0]]?[t]:c(x.shift(),t);x.length;)e=x.shift(),h.relative[e]&&(e+=x.shift()),l=b(e,l);else if(!r&&x.length>1&&9===t.nodeType&&!_&&h.match.ID.test(x[0])&&!h.match.ID.test(x[x.length-1])&&(t=(f=c.find(x.shift(),t,_)).expr?c.filter(f.expr,f.set)[0]:f.set[0]),t)for(l=(f=r?{expr:x.pop(),set:v(r)}:c.find(x.pop(),1!==x.length||"~"!==x[0]&&"+"!==x[0]||!t.parentNode?t:t.parentNode,_)).expr?c.filter(f.expr,f.set):f.set,x.length>0?d=v(l):w=!1;x.length;)m=g=x.pop(),h.relative[g]?m=x.pop():g="",null==m&&(m=t),h.relative[g](d,m,_);else d=x=[];if(d||(d=l),d||c.error(g||e),"[object Array]"===n.call(d))if(w)if(t&&1===t.nodeType)for(y=0;null!=d[y];y++)d[y]&&(!0===d[y]||1===d[y].nodeType&&c.contains(t,d[y]))&&i.push(l[y]);else for(y=0;null!=d[y];y++)d[y]&&1===d[y].nodeType&&i.push(l[y]);else i.push.apply(i,d);else v(d,i);return p&&(c(p,o,i,r),c.uniqueSort(i)),i};c.uniqueSort=function(e){if(g&&(o=a,e.sort(g),o))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},c.matches=function(e,t){return c(e,null,null,t)},c.matchesSelector=function(e,t){return c(t,null,null,[e]).length>0},c.find=function(e,t,i){var s;if(!e)return[];for(var r=0,n=h.order.length;r<n;r++){var o,a=h.order[r];if(o=h.leftMatch[a].exec(e)){var d=o[1];if(o.splice(1,1),"\\"!==d.substr(d.length-1)&&(o[1]=(o[1]||"").replace(l,""),null!=(s=h.find[a](o,t,i)))){e=e.replace(h.match[a],"");break}}}return s||(s=void 0!==t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:s,expr:e}},c.filter=function(e,i,s,r){for(var n,o,a=e,l=[],d=i,u=i&&i[0]&&c.isXML(i[0]);e&&i.length;){for(var p in h.filter)if(null!=(n=h.leftMatch[p].exec(e))&&n[2]){var f,g,m=h.filter[p],v=n[1];if(o=!1,n.splice(1,1),"\\"===v.substr(v.length-1))continue;if(d===l&&(l=[]),h.preFilter[p])if(n=h.preFilter[p](n,d,s,l,r,u)){if(!0===n)continue}else o=f=!0;if(n)for(var b=0;null!=(g=d[b]);b++)if(g){var y=r^!!(f=m(g,n,b,d));s&&null!=f?y?o=!0:d[b]=!1:y&&(l.push(g),o=!0)}if(f!==t){if(s||(d=l),e=e.replace(h.match[p],""),!o)return[];break}}if(e===a){if(null!=o)break;c.error(e)}a=e}return d},c.error=function(e){throw"Syntax error, unrecognized expression: "+e};var h=c.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var i="string"==typeof t,s=i&&!d.test(t),r=i&&!s;s&&(t=t.toLowerCase());for(var n,o=0,a=e.length;o<a;o++)if(n=e[o]){for(;(n=n.previousSibling)&&1!==n.nodeType;);e[o]=r||n&&n.nodeName.toLowerCase()===t?n||!1:n===t}r&&c.filter(t,e,!0)},">":function(e,t){var i,s="string"==typeof t,r=0,n=e.length;if(s&&!d.test(t)){for(t=t.toLowerCase();r<n;r++)if(i=e[r]){var o=i.parentNode;e[r]=o.nodeName.toLowerCase()===t&&o}}else{for(;r<n;r++)(i=e[r])&&(e[r]=s?i.parentNode:i.parentNode===t);s&&c.filter(t,e,!0)}},"":function(t,s,n){var o,a=r++,l=e;"string"==typeof s&&!d.test(s)&&(o=s=s.toLowerCase(),l=i),l("parentNode",s,a,t,o,n)},"~":function(t,s,n){var o,a=r++,l=e;"string"==typeof s&&!d.test(s)&&(o=s=s.toLowerCase(),l=i),l("previousSibling",s,a,t,o,n)}},find:{ID:function(e,t,i){if(void 0!==t.getElementById&&!i){var s=t.getElementById(e[1]);return s&&s.parentNode?[s]:[]}},NAME:function(e,t){if(void 0!==t.getElementsByName){for(var i=[],s=t.getElementsByName(e[1]),r=0,n=s.length;r<n;r++)s[r].getAttribute("name")===e[1]&&i.push(s[r]);return 0===i.length?null:i}},TAG:function(e,t){if(void 0!==t.getElementsByTagName)return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,i,s,r,n){if(e=" "+e[1].replace(l,"")+" ",n)return e;for(var o,a=0;null!=(o=t[a]);a++)o&&(r^(o.className&&(" "+o.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?i||s.push(o):i&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(l,"")},TAG:function(e,t){return e[1].replace(l,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||c.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(("even"===e[2]?"2n":"odd"===e[2]&&"2n+1")||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&c.error(e[0]);return e[0]=r++,e},ATTR:function(e,t,i,s,r,n){var o=e[1]=e[1].replace(l,"");return!n&&h.attrMap[o]&&(e[1]=h.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(l,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,i,r,n){if("not"===e[1]){if(!((s.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=c.filter(e[3],t,i,!0^n);return i||r.push.apply(r,o),!1}e[3]=c(e[3],null,null,t)}else if(h.match.POS.test(e[0])||h.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,i){return!!c(i[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),i=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===i&&(t===i||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,i,s){return t===s.length-1},even:function(e,t){return t%2==0},odd:function(e,t){return t%2==1},lt:function(e,t,i){return t<i[3]-0},gt:function(e,t,i){return t>i[3]-0},nth:function(e,t,i){return i[3]-0===t},eq:function(e,t,i){return i[3]-0===t}},filter:{PSEUDO:function(e,t,i,s){var r=t[1],n=h.filters[r];if(n)return n(e,i,t,s);if("contains"===r)return(e.textContent||e.innerText||c.getText([e])||"").indexOf(t[3])>=0;if("not"===r){for(var o=t[3],a=0,l=o.length;a<l;a++)if(o[a]===e)return!1;return!0}c.error(r)},CHILD:function(e,t){var i=t[1],s=e;switch(i){case"only":case"first":for(;s=s.previousSibling;)if(1===s.nodeType)return!1;if("first"===i)return!0;s=e;case"last":for(;s=s.nextSibling;)if(1===s.nodeType)return!1;return!0;case"nth":var r=t[2],n=t[3];if(1===r&&0===n)return!0;var o=t[0],a=e.parentNode;if(a&&(a.sizcache!==o||!e.nodeIndex)){var l=0;for(s=a.firstChild;s;s=s.nextSibling)1===s.nodeType&&(s.nodeIndex=++l);a.sizcache=o}var d=e.nodeIndex-n;return 0===r?0===d:d%r==0&&d/r>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var i=t[1],s=h.attrHandle[i]?h.attrHandle[i](e):null!=e[i]?e[i]:e.getAttribute(i),r=s+"",n=t[2],o=t[4];return null==s?"!="===n:"="===n?r===o:"*="===n?r.indexOf(o)>=0:"~="===n?(" "+r+" ").indexOf(o)>=0:o?"!="===n?r!==o:"^="===n?0===r.indexOf(o):"$="===n?r.substr(r.length-o.length)===o:"|="===n&&(r===o||r.substr(0,o.length+1)===o+"-"):r&&!1!==s},POS:function(e,t,i,s){var r=t[2],n=h.setFilters[r];if(n)return n(e,i,t,s)}}},u=h.match.POS,p=function(e,t){return"\\"+(t-0+1)};for(var f in h.match)h.match[f]=new RegExp(h.match[f].source+/(?![^\[]*\])(?![^\(]*\))/.source),h.leftMatch[f]=new RegExp(/(^(?:.|\r|\n)*?)/.source+h.match[f].source.replace(/\\(\d+)/g,p));var g,m,v=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(T.documentElement.childNodes,0)[0].nodeType}catch(e){v=function(e,t){var i=0,s=t||[];if("[object Array]"===n.call(e))Array.prototype.push.apply(s,e);else if("number"==typeof e.length)for(var r=e.length;i<r;i++)s.push(e[i]);else for(;e[i];i++)s.push(e[i]);return s}}T.documentElement.compareDocumentPosition?g=function(e,t){return e===t?(o=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(g=function(e,t){if(e===t)return o=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,s,r=[],n=[],a=e.parentNode,l=t.parentNode,d=a;if(a===l)return m(e,t);if(!a)return-1;if(!l)return 1;for(;d;)r.unshift(d),d=d.parentNode;for(d=l;d;)n.unshift(d),d=d.parentNode;i=r.length,s=n.length;for(var c=0;c<i&&c<s;c++)if(r[c]!==n[c])return m(r[c],n[c]);return c===i?m(e,n[c],-1):m(r[c],t,1)},m=function(e,t,i){if(e===t)return i;for(var s=e.nextSibling;s;){if(s===t)return-1;s=s.nextSibling}return 1}),c.getText=function(e){for(var t,i="",s=0;e[s];s++)3===(t=e[s]).nodeType||4===t.nodeType?i+=t.nodeValue:8!==t.nodeType&&(i+=c.getText(t.childNodes));return i},function(){var e=T.createElement("div"),i="script"+(new Date).getTime(),s=T.documentElement;e.innerHTML="<a name='"+i+"'/>",s.insertBefore(e,s.firstChild),T.getElementById(i)&&(h.find.ID=function(e,i,s){if(void 0!==i.getElementById&&!s){var r=i.getElementById(e[1]);return r?r.id===e[1]||void 0!==r.getAttributeNode&&r.getAttributeNode("id").nodeValue===e[1]?[r]:t:[]}},h.filter.ID=function(e,t){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&i&&i.nodeValue===t}),s.removeChild(e),s=e=null}(),function(){var e=T.createElement("div");e.appendChild(T.createComment("")),e.getElementsByTagName("*").length>0&&(h.find.TAG=function(e,t){var i=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var s=[],r=0;i[r];r++)1===i[r].nodeType&&s.push(i[r]);i=s}return i}),e.innerHTML="<a href='#'></a>",e.firstChild&&void 0!==e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(h.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),T.querySelectorAll&&function(){var e=c,t=T.createElement("div");if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){for(var i in c=function(t,i,s,r){if(i=i||T,!r&&!c.isXML(i)){var n=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(n&&(1===i.nodeType||9===i.nodeType)){if(n[1])return v(i.getElementsByTagName(t),s);if(n[2]&&h.find.CLASS&&i.getElementsByClassName)return v(i.getElementsByClassName(n[2]),s)}if(9===i.nodeType){if("body"===t&&i.body)return v([i.body],s);if(n&&n[3]){var o=i.getElementById(n[3]);if(!o||!o.parentNode)return v([],s);if(o.id===n[3])return v([o],s)}try{return v(i.querySelectorAll(t),s)}catch(e){}}else if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){var a=i,l=i.getAttribute("id"),d=l||"__sizzle__",u=i.parentNode,p=/^\s*[+~]/.test(t);l?d=d.replace(/'/g,"\\$&"):i.setAttribute("id",d),p&&u&&(i=i.parentNode);try{if(!p||u)return v(i.querySelectorAll("[id='"+d+"'] "+t),s)}catch(e){}finally{l||a.removeAttribute("id")}}}return e(t,i,s,r)},e)c[i]=e[i];t=null}}(),function(){var e=T.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var i=!t.call(T.createElement("div"),"div"),s=!1;try{t.call(T.documentElement,"[test!='']:sizzle")}catch(e){s=!0}c.matchesSelector=function(e,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!c.isXML(e))try{if(s||!h.match.PSEUDO.test(r)&&!/!=/.test(r)){var n=t.call(e,r);if(n||!i||e.document&&11!==e.document.nodeType)return n}}catch(e){}return c(r,null,null,[e]).length>0}}}(),function(){var e=T.createElement("div");if(e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length){if(e.lastChild.className="e",1===e.getElementsByClassName("e").length)return;h.order.splice(1,0,"CLASS"),h.find.CLASS=function(e,t,i){if(void 0!==t.getElementsByClassName&&!i)return t.getElementsByClassName(e[1])},e=null}}(),T.documentElement.contains?c.contains=function(e,t){return e!==t&&(!e.contains||e.contains(t))}:T.documentElement.compareDocumentPosition?c.contains=function(e,t){return!!(16&e.compareDocumentPosition(t))}:c.contains=function(){return!1},c.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName};var b=function(e,t){for(var i,s=[],r="",n=t.nodeType?[t]:t;i=h.match.PSEUDO.exec(e);)r+=i[0],e=e.replace(h.match.PSEUDO,"");e=h.relative[e]?e+"*":e;for(var o=0,a=n.length;o<a;o++)c(e,n[o],s);return c.filter(r,s)};I.find=c,I.expr=c.selectors,I.expr[":"]=I.expr.filters,I.unique=c.uniqueSort,I.text=c.getText,I.isXMLDoc=c.isXML,I.contains=c.contains}();var ne=/Until$/,oe=/^(?:parents|prevUntil|prevAll)/,ae=/,/,le=/^.[^:#\[\.,]*$/,de=Array.prototype.slice,ce=I.expr.match.POS,he={children:!0,contents:!0,next:!0,prev:!0};I.fn.extend({find:function(e){var t,i,s=this;if("string"!=typeof e)return I(e).filter((function(){for(t=0,i=s.length;t<i;t++)if(I.contains(s[t],this))return!0}));var r,n,o,a=this.pushStack("","find",e);for(t=0,i=this.length;t<i;t++)if(r=a.length,I.find(e,this[t],a),t>0)for(n=r;n<a.length;n++)for(o=0;o<r;o++)if(a[o]===a[n]){a.splice(n--,1);break}return a},has:function(e){var t=I(e);return this.filter((function(){for(var e=0,i=t.length;e<i;e++)if(I.contains(this,t[e]))return!0}))},not:function(e){return this.pushStack(w(this,e,!1),"not",e)},filter:function(e){return this.pushStack(w(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?I.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var i,s,r=[],n=this[0];if(I.isArray(e)){var o,a,l={},d=1;if(n&&e.length){for(i=0,s=e.length;i<s;i++)l[a=e[i]]||(l[a]=ce.test(a)?I(a,t||this.context):a);for(;n&&n.ownerDocument&&n!==t;){for(a in l)((o=l[a]).jquery?o.index(n)>-1:I(n).is(o))&&r.push({selector:a,elem:n,level:d});n=n.parentNode,d++}}return r}var c=ce.test(e)||"string"!=typeof e?I(e,t||this.context):0;for(i=0,s=this.length;i<s;i++)for(n=this[i];n;){if(c?c.index(n)>-1:I.find.matchesSelector(n,e)){r.push(n);break}if(!(n=n.parentNode)||!n.ownerDocument||n===t||11===n.nodeType)break}return r=r.length>1?I.unique(r):r,this.pushStack(r,"closest",e)},index:function(e){return e?"string"==typeof e?I.inArray(this[0],I(e)):I.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?I(e,t):I.makeArray(e&&e.nodeType?[e]:e),s=I.merge(this.get(),i);return this.pushStack(_(i[0])||_(s[0])?s:I.unique(s))},andSelf:function(){return this.add(this.prevObject)}}),I.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return I.dir(e,"parentNode")},parentsUntil:function(e,t,i){return I.dir(e,"parentNode",i)},next:function(e){return I.nth(e,2,"nextSibling")},prev:function(e){return I.nth(e,2,"previousSibling")},nextAll:function(e){return I.dir(e,"nextSibling")},prevAll:function(e){return I.dir(e,"previousSibling")},nextUntil:function(e,t,i){return I.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return I.dir(e,"previousSibling",i)},siblings:function(e){return I.sibling(e.parentNode.firstChild,e)},children:function(e){return I.sibling(e.firstChild)},contents:function(e){return I.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:I.makeArray(e.childNodes)}},(function(e,t){I.fn[e]=function(i,s){var r=I.map(this,t,i),n=de.call(arguments);return ne.test(e)||(s=i),s&&"string"==typeof s&&(r=I.filter(s,r)),r=this.length>1&&!he[e]?I.unique(r):r,(this.length>1||ae.test(s))&&oe.test(e)&&(r=r.reverse()),this.pushStack(r,e,n.join(","))}})),I.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?I.find.matchesSelector(t[0],e)?[t[0]]:[]:I.find.matches(e,t)},dir:function(e,i,s){for(var r=[],n=e[i];n&&9!==n.nodeType&&(s===t||1!==n.nodeType||!I(n).is(s));)1===n.nodeType&&r.push(n),n=n[i];return r},nth:function(e,t,i,s){t=t||1;for(var r=0;e&&(1!==e.nodeType||++r!==t);e=e[i]);return e},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var ue=/ jQuery\d+="(?:\d+|null)"/g,pe=/^\s+/,fe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ge=/<([\w:]+)/,me=/<tbody/i,ve=/<|&#?\w+;/,be=/<(?:script|object|embed|option|style)/i,ye=/checked\s*(?:[^=]|=\s*.checked.)/i,we=/\/(java|ecma)script/i,_e=/^\s*<!(?:\[CDATA\[|\-\-)/,xe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};xe.optgroup=xe.option,xe.tbody=xe.tfoot=xe.colgroup=xe.caption=xe.thead,xe.th=xe.td,I.support.htmlSerialize||(xe._default=[1,"div<div>","</div>"]),I.fn.extend({text:function(e){return I.isFunction(e)?this.each((function(t){var i=I(this);i.text(e.call(this,t,i.text()))})):"object"!=typeof e&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(e)):I.text(this)},wrapAll:function(e){if(I.isFunction(e))return this.each((function(t){I(this).wrapAll(e.call(this,t))}));if(this[0]){var t=I(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e})).append(this)}return this},wrapInner:function(e){return I.isFunction(e)?this.each((function(t){I(this).wrapInner(e.call(this,t))})):this.each((function(){var t=I(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){return this.each((function(){I(this).wrapAll(e)}))},unwrap:function(){return this.parent().each((function(){I.nodeName(this,"body")||I(this).replaceWith(this.childNodes)})).end()},append:function(){return this.domManip(arguments,!0,(function(e){1===this.nodeType&&this.appendChild(e)}))},prepend:function(){return this.domManip(arguments,!0,(function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)}))},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,(function(e){this.parentNode.insertBefore(e,this)}));if(arguments.length){var e=I(arguments[0]);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,(function(e){this.parentNode.insertBefore(e,this.nextSibling)}));if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,I(arguments[0]).toArray()),e}},remove:function(e,t){for(var i,s=0;null!=(i=this[s]);s++)e&&!I.filter(e,[i]).length||(!t&&1===i.nodeType&&(I.cleanData(i.getElementsByTagName("*")),I.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&I.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return I.clone(this,e,t)}))},html:function(e){if(e===t)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(ue,""):null;if("string"!=typeof e||be.test(e)||!I.support.leadingWhitespace&&pe.test(e)||xe[(ge.exec(e)||["",""])[1].toLowerCase()])I.isFunction(e)?this.each((function(t){var i=I(this);i.html(e.call(this,t,i.html()))})):this.empty().append(e);else{e=e.replace(fe,"<$1></$2>");try{for(var i=0,s=this.length;i<s;i++)1===this[i].nodeType&&(I.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=e)}catch(t){this.empty().append(e)}}return this},replaceWith:function(e){return this[0]&&this[0].parentNode?I.isFunction(e)?this.each((function(t){var i=I(this),s=i.html();i.replaceWith(e.call(this,t,s))})):("string"!=typeof e&&(e=I(e).detach()),this.each((function(){var t=this.nextSibling,i=this.parentNode;I(this).remove(),t?I(t).before(e):I(i).append(e)}))):this.length?this.pushStack(I(I.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,s){var r,n,o,a,l=e[0],d=[];if(!I.support.checkClone&&3===arguments.length&&"string"==typeof l&&ye.test(l))return this.each((function(){I(this).domManip(e,i,s,!0)}));if(I.isFunction(l))return this.each((function(r){var n=I(this);e[0]=l.call(this,r,i?n.html():t),n.domManip(e,i,s)}));if(this[0]){if(a=l&&l.parentNode,n=1===(o=(r=I.support.parentNode&&a&&11===a.nodeType&&a.childNodes.length===this.length?{fragment:a}:I.buildFragment(e,this,d)).fragment).childNodes.length?o=o.firstChild:o.firstChild){i=i&&I.nodeName(n,"tr");for(var c=0,h=this.length,u=h-1;c<h;c++)s.call(i?y(this[c]):this[c],r.cacheable||h>1&&c<u?I.clone(o,!0,!0):o)}d.length&&I.each(d,p)}return this}}),I.buildFragment=function(e,t,i){var s,r,n,o;return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=T),1===e.length&&"string"==typeof e[0]&&e[0].length<512&&o===T&&"<"===e[0].charAt(0)&&!be.test(e[0])&&(I.support.checkClone||!ye.test(e[0]))&&(r=!0,(n=I.fragments[e[0]])&&1!==n&&(s=n)),s||(s=o.createDocumentFragment(),I.clean(e,o,s,i)),r&&(I.fragments[e[0]]=n?s:1),{fragment:s,cacheable:r}},I.fragments={},I.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){I.fn[e]=function(i){var s=[],r=I(i),n=1===this.length&&this[0].parentNode;if(n&&11===n.nodeType&&1===n.childNodes.length&&1===r.length)return r[t](this[0]),this;for(var o=0,a=r.length;o<a;o++){var l=(o>0?this.clone(!0):this).get();I(r[o])[t](l),s=s.concat(l)}return this.pushStack(s,e,r.selector)}})),I.extend({clone:function(e,t,i){var s,r,n,o=e.cloneNode(!0);if(!(I.support.noCloneEvent&&I.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||I.isXMLDoc(e)))for(v(e,o),s=m(e),r=m(o),n=0;s[n];++n)r[n]&&v(s[n],r[n]);if(t&&(b(e,o),i))for(s=m(e),r=m(o),n=0;s[n];++n)b(s[n],r[n]);return s=r=null,o},clean:function(e,t,i,s){var r;void 0===(t=t||T).createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||T);for(var n,o,a=[],l=0;null!=(o=e[l]);l++)if("number"==typeof o&&(o+=""),o){if("string"==typeof o)if(ve.test(o)){o=o.replace(fe,"<$1></$2>");var d=(ge.exec(o)||["",""])[1].toLowerCase(),c=xe[d]||xe._default,h=c[0],u=t.createElement("div");for(u.innerHTML=c[1]+o+c[2];h--;)u=u.lastChild;if(!I.support.tbody){var p=me.test(o),g="table"!==d||p?"<table>"!==c[1]||p?[]:u.childNodes:u.firstChild&&u.firstChild.childNodes;for(n=g.length-1;n>=0;--n)I.nodeName(g[n],"tbody")&&!g[n].childNodes.length&&g[n].parentNode.removeChild(g[n])}!I.support.leadingWhitespace&&pe.test(o)&&u.insertBefore(t.createTextNode(pe.exec(o)[0]),u.firstChild),o=u.childNodes}else o=t.createTextNode(o);var m;if(!I.support.appendChecked)if(o[0]&&"number"==typeof(m=o.length))for(n=0;n<m;n++)f(o[n]);else f(o);o.nodeType?a.push(o):a=I.merge(a,o)}if(i)for(r=function(e){return!e.type||we.test(e.type)},l=0;a[l];l++)if(!s||!I.nodeName(a[l],"script")||a[l].type&&"text/javascript"!==a[l].type.toLowerCase()){if(1===a[l].nodeType){var v=I.grep(a[l].getElementsByTagName("script"),r);a.splice.apply(a,[l+1,0].concat(v))}i.appendChild(a[l])}else s.push(a[l].parentNode?a[l].parentNode.removeChild(a[l]):a[l]);return a},cleanData:function(e){for(var t,i,s,r=I.cache,n=I.expando,o=I.event.special,a=I.support.deleteExpando,l=0;null!=(s=e[l]);l++)if((!s.nodeName||!I.noData[s.nodeName.toLowerCase()])&&(i=s[I.expando])){if((t=r[i]&&r[i][n])&&t.events){for(var d in t.events)o[d]?I.event.remove(s,d):I.removeEvent(s,d,t.handle);t.handle&&(t.handle.elem=null)}a?delete s[I.expando]:s.removeAttribute&&s.removeAttribute(I.expando),delete r[i]}}});var Ce,ke,De,je=/alpha\([^)]*\)/i,Se=/opacity=([^)]*)/,Me=/([A-Z]|^ms)/g,Ae=/^-?\d+(?:px)?$/i,Te=/^-?\d/,Fe=/^([\-+])=([\-+.\de]+)/,Oe={position:"absolute",visibility:"hidden",display:"block"},Ie=["Left","Right"],Pe=["Top","Bottom"];I.fn.css=function(e,i){return 2===arguments.length&&i===t?this:I.access(this,e,i,!0,(function(e,i,s){return s!==t?I.style(e,i,s):I.css(e,i)}))},I.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ce(e,"opacity","opacity");return""===i?"1":i}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:I.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,s,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,a=I.camelCase(i),l=e.style,d=I.cssHooks[a];if(i=I.cssProps[a]||a,s===t)return d&&"get"in d&&(n=d.get(e,!1,r))!==t?n:l[i];if("string"===(o=typeof s)&&(n=Fe.exec(s))&&(s=+(n[1]+1)*+n[2]+parseFloat(I.css(e,i)),o="number"),null==s||"number"===o&&isNaN(s))return;if("number"===o&&!I.cssNumber[a]&&(s+="px"),!d||!("set"in d)||(s=d.set(e,s))!==t)try{l[i]=s}catch(e){}}},css:function(e,i,s){var r,n;return i=I.camelCase(i),n=I.cssHooks[i],"cssFloat"===(i=I.cssProps[i]||i)&&(i="float"),n&&"get"in n&&(r=n.get(e,!0,s))!==t?r:Ce?Ce(e,i):void 0},swap:function(e,t,i){var s={};for(var r in t)s[r]=e.style[r],e.style[r]=t[r];for(r in i.call(e),t)e.style[r]=s[r]}}),I.curCSS=I.css,I.each(["height","width"],(function(e,t){I.cssHooks[t]={get:function(e,i,s){var r;if(i)return 0!==e.offsetWidth?u(e,t,s):(I.swap(e,Oe,(function(){r=u(e,t,s)})),r)},set:function(e,t){return Ae.test(t)?(t=parseFloat(t))>=0?t+"px":void 0:t}}})),I.support.opacity||(I.cssHooks.opacity={get:function(e,t){return Se.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var i=e.style,s=e.currentStyle,r=I.isNaN(t)?"":"alpha(opacity="+100*t+")",n=s&&s.filter||i.filter||"";i.zoom=1,t>=1&&""===I.trim(n.replace(je,""))&&(i.removeAttribute("filter"),s&&!s.filter)||(i.filter=je.test(n)?n.replace(je,r):n+" "+r)}}),I((function(){I.support.reliableMarginRight||(I.cssHooks.marginRight={get:function(e,t){var i;return I.swap(e,{display:"inline-block"},(function(){i=t?Ce(e,"margin-right","marginRight"):e.style.marginRight})),i}})})),T.defaultView&&T.defaultView.getComputedStyle&&(ke=function(e,i){var s,r,n;return i=i.replace(Me,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)?((n=r.getComputedStyle(e,null))&&(""===(s=n.getPropertyValue(i))&&!I.contains(e.ownerDocument.documentElement,e)&&(s=I.style(e,i))),s):t}),T.documentElement.currentStyle&&(De=function(e,t){var i,s=e.currentStyle&&e.currentStyle[t],r=e.runtimeStyle&&e.runtimeStyle[t],n=e.style;return!Ae.test(s)&&Te.test(s)&&(i=n.left,r&&(e.runtimeStyle.left=e.currentStyle.left),n.left="fontSize"===t?"1em":s||0,s=n.pixelLeft+"px",n.left=i,r&&(e.runtimeStyle.left=r)),""===s?"auto":s}),Ce=ke||De,I.expr&&I.expr.filters&&(I.expr.filters.hidden=function(e){var t=e.offsetWidth,i=e.offsetHeight;return 0===t&&0===i||!I.support.reliableHiddenOffsets&&"none"===(e.style.display||I.css(e,"display"))},I.expr.filters.visible=function(e){return!I.expr.filters.hidden(e)});var Ee,qe,Ne=/%20/g,Re=/\[\]$/,ze=/\r?\n/g,We=/#.*$/,Le=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Qe=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ge=/^(?:GET|HEAD)$/,Be=/^\/\//,He=/\?/,Ue=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ye=/^(?:select|textarea)/i,Ve=/\s+/,Xe=/([?&])_=[^&]*/,$e=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Ke=I.fn.load,Je={},Ze={},et=["*/"]+["*"];try{Ee=O.href}catch(e){(Ee=T.createElement("a")).href="",Ee=Ee.href}qe=$e.exec(Ee.toLowerCase())||[],I.fn.extend({load:function(e,i,s){if("string"!=typeof e&&Ke)return Ke.apply(this,arguments);if(!this.length)return this;var r=e.indexOf(" ");if(r>=0){var n=e.slice(r,e.length);e=e.slice(0,r)}var o="GET";i&&(I.isFunction(i)?(s=i,i=t):"object"==typeof i&&(i=I.param(i,I.ajaxSettings.traditional),o="POST"));var a=this;return I.ajax({url:e,type:o,dataType:"html",data:i,complete:function(e,t,i){i=e.responseText,e.isResolved()&&(e.done((function(e){i=e})),a.html(n?I("<div>").append(i.replace(Ue,"")).find(n):i)),s&&a.each(s,[i,t,e])}}),this},serialize:function(){return I.param(this.serializeArray())},serializeArray:function(){return this.map((function(){return this.elements?I.makeArray(this.elements):this})).filter((function(){return this.name&&!this.disabled&&(this.checked||Ye.test(this.nodeName)||Qe.test(this.type))})).map((function(e,t){var i=I(this).val();return null==i?null:I.isArray(i)?I.map(i,(function(e,i){return{name:t.name,value:e.replace(ze,"\r\n")}})):{name:t.name,value:i.replace(ze,"\r\n")}})).get()}}),I.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),(function(e,t){I.fn[t]=function(e){return this.bind(t,e)}})),I.each(["get","post"],(function(e,i){I[i]=function(e,s,r,n){return I.isFunction(s)&&(n=n||r,r=s,s=t),I.ajax({type:i,url:e,data:s,success:r,dataType:n})}})),I.extend({getScript:function(e,i){return I.get(e,t,i,"script")},getJSON:function(e,t,i){return I.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?d(e,I.ajaxSettings):(t=e,e=I.ajaxSettings),d(e,t),e},ajaxSettings:{url:Ee,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(qe[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":et},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":I.parseJSON,"text xml":I.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:h(Je),ajaxTransport:h(Ze),ajax:function(e,i){function s(e,i,s,o){if(2!==_){_=2,l&&clearTimeout(l),a=t,n=o||"",x.readyState=e>0?4:0;var d,c,u,y,w,C=i,k=s?function(e,i,s){var r,n,o,a,l=e.contents,d=e.dataTypes,c=e.responseFields;for(n in c)n in s&&(i[c[n]]=s[n]);for(;"*"===d[0];)d.shift(),r===t&&(r=e.mimeType||i.getResponseHeader("content-type"));if(r)for(n in l)if(l[n]&&l[n].test(r)){d.unshift(n);break}if(d[0]in s)o=d[0];else{for(n in s){if(!d[0]||e.converters[n+" "+d[0]]){o=n;break}a||(a=n)}o=o||a}if(o)return o!==d[0]&&d.unshift(o),s[o]}(p,x,s):t;if(e>=200&&e<300||304===e)if(p.ifModified&&((y=x.getResponseHeader("Last-Modified"))&&(I.lastModified[r]=y),(w=x.getResponseHeader("Etag"))&&(I.etag[r]=w)),304===e)C="notmodified",d=!0;else try{c=function(e,i){e.dataFilter&&(i=e.dataFilter(i,e.dataType));var s,r,n,o,a,l,d,c,h=e.dataTypes,u={},p=h.length,f=h[0];for(s=1;s<p;s++){if(1===s)for(r in e.converters)"string"==typeof r&&(u[r.toLowerCase()]=e.converters[r]);if(o=f,"*"===(f=h[s]))f=o;else if("*"!==o&&o!==f){if(!(l=u[a=o+" "+f]||u["* "+f]))for(d in c=t,u)if(((n=d.split(" "))[0]===o||"*"===n[0])&&(c=u[n[1]+" "+f])){!0===(d=u[d])?l=c:!0===c&&(l=d);break}!l&&!c&&I.error("No conversion from "+a.replace(" "," to ")),!0!==l&&(i=l?l(i):c(d(i)))}}return i}(p,k),C="success",d=!0}catch(e){C="parsererror",u=e}else u=C,C&&!e||(C="error",e<0&&(e=0));x.status=e,x.statusText=""+(i||C),d?m.resolveWith(f,[c,C,x]):m.rejectWith(f,[x,C,u]),x.statusCode(b),b=t,h&&g.trigger("ajax"+(d?"Success":"Error"),[x,p,d?c:u]),v.resolveWith(f,[x,C]),h&&(g.trigger("ajaxComplete",[x,p]),--I.active||I.event.trigger("ajaxStop"))}}"object"==typeof e&&(i=e,e=t),i=i||{};var r,n,o,a,l,d,h,u,p=I.ajaxSetup({},i),f=p.context||p,g=f!==p&&(f.nodeType||f instanceof I)?I(f):I.event,m=I.Deferred(),v=I._Deferred(),b=p.statusCode||{},y={},w={},_=0,x={readyState:0,setRequestHeader:function(e,t){if(!_){var i=e.toLowerCase();e=w[i]=w[i]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===_?n:null},getResponseHeader:function(e){var i;if(2===_){if(!o)for(o={};i=Le.exec(n);)o[i[1].toLowerCase()]=i[2];i=o[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return _||(p.mimeType=e),this},abort:function(e){return e=e||"abort",a&&a.abort(e),s(0,e),this}};if(m.promise(x),x.success=x.done,x.error=x.fail,x.complete=v.done,x.statusCode=function(e){var t;if(e)if(_<2)for(t in e)b[t]=[b[t],e[t]];else t=e[x.status],x.then(t,t);return this},p.url=((e||p.url)+"").replace(We,"").replace(Be,qe[1]+"//"),p.dataTypes=I.trim(p.dataType||"*").toLowerCase().split(Ve),null==p.crossDomain&&(d=$e.exec(p.url.toLowerCase()),p.crossDomain=!(!d||d[1]==qe[1]&&d[2]==qe[2]&&(d[3]||("http:"===d[1]?80:443))==(qe[3]||("http:"===qe[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=I.param(p.data,p.traditional)),c(Je,p,i,x),2===_)return!1;if(h=p.global,p.type=p.type.toUpperCase(),p.hasContent=!Ge.test(p.type),h&&0==I.active++&&I.event.trigger("ajaxStart"),!p.hasContent&&(p.data&&(p.url+=(He.test(p.url)?"&":"?")+p.data,delete p.data),r=p.url,!1===p.cache)){var C=I.now(),k=p.url.replace(Xe,"$1_="+C);p.url=k+(k===p.url?(He.test(p.url)?"&":"?")+"_="+C:"")}for(u in(p.data&&p.hasContent&&!1!==p.contentType||i.contentType)&&x.setRequestHeader("Content-Type",p.contentType),p.ifModified&&(r=r||p.url,I.lastModified[r]&&x.setRequestHeader("If-Modified-Since",I.lastModified[r]),I.etag[r]&&x.setRequestHeader("If-None-Match",I.etag[r])),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+et+"; q=0.01":""):p.accepts["*"]),p.headers)x.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(f,x,p)||2===_))return x.abort(),!1;for(u in{success:1,error:1,complete:1})x[u](p[u]);if(a=c(Ze,p,i,x)){x.readyState=1,h&&g.trigger("ajaxSend",[x,p]),p.async&&p.timeout>0&&(l=setTimeout((function(){x.abort("timeout")}),p.timeout));try{_=1,a.send(y,s)}catch(e){_<2?s(-1,e):I.error(e)}}else s(-1,"No Transport");return x},param:function(e,i){var s=[],r=function(e,t){t=I.isFunction(t)?t():t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=I.ajaxSettings.traditional),I.isArray(e)||e.jquery&&!I.isPlainObject(e))I.each(e,(function(){r(this.name,this.value)}));else for(var n in e)l(n,e[n],i,r);return s.join("&").replace(Ne,"+")}}),I.extend({active:0,lastModified:{},etag:{}});var tt=I.now(),it=/(\=)\?(&|$)|\?\?/i;I.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return I.expando+"_"+tt++}}),I.ajaxPrefilter("json jsonp",(function(t,i,s){var r="application/x-www-form-urlencoded"===t.contentType&&"string"==typeof t.data;if("jsonp"===t.dataTypes[0]||!1!==t.jsonp&&(it.test(t.url)||r&&it.test(t.data))){var n,o=t.jsonpCallback=I.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[o],l=t.url,d=t.data,c="$1"+o+"$2";return!1!==t.jsonp&&(l=l.replace(it,c),t.url===l&&(r&&(d=d.replace(it,c)),t.data===d&&(l+=(/\?/.test(l)?"&":"?")+t.jsonp+"="+o))),t.url=l,t.data=d,e[o]=function(e){n=[e]},s.always((function(){e[o]=a,n&&I.isFunction(a)&&e[o](n[0])})),t.converters["script json"]=function(){return n||I.error(o+" was not called"),n[0]},t.dataTypes[0]="json","script"}})),I.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return I.globalEval(e),e}}}),I.ajaxPrefilter("script",(function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)})),I.ajaxTransport("script",(function(e){if(e.crossDomain){var i,s=T.head||T.getElementsByTagName("head")[0]||T.documentElement;return{send:function(r,n){(i=T.createElement("script")).async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,r){(r||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,s&&i.parentNode&&s.removeChild(i),i=t,r||n(200,"success"))},s.insertBefore(i,s.firstChild)},abort:function(){i&&i.onload(0,1)}}}}));var st,rt=!!e.ActiveXObject&&function(){for(var e in st)st[e](0,1)},nt=0;I.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&a()||function(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:a,function(e){I.extend(I.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(I.ajaxSettings.xhr()),I.support.ajax&&I.ajaxTransport((function(i){var s;if(!i.crossDomain||I.support.cors)return{send:function(r,n){var o,a,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)l[a]=i.xhrFields[a];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),!i.crossDomain&&!r["X-Requested-With"]&&(r["X-Requested-With"]="XMLHttpRequest");try{for(a in r)l.setRequestHeader(a,r[a])}catch(e){}l.send(i.hasContent&&i.data||null),s=function(e,r){var a,d,c,h,u;try{if(s&&(r||4===l.readyState))if(s=t,o&&(l.onreadystatechange=I.noop,rt&&delete st[o]),r)4!==l.readyState&&l.abort();else{a=l.status,c=l.getAllResponseHeaders(),h={},(u=l.responseXML)&&u.documentElement&&(h.xml=u),h.text=l.responseText;try{d=l.statusText}catch(e){d=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=h.text?200:404}}catch(e){r||n(-1,e)}h&&n(a,d,h,c)},i.async&&4!==l.readyState?(o=++nt,rt&&(st||(st={},I(e).unload(rt)),st[o]=s),l.onreadystatechange=s):s()},abort:function(){s&&s(0,1)}}}));var ot,at,lt,dt,ct={},ht=/^(?:toggle|show|hide)$/,ut=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,pt=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];I.fn.extend({show:function(e,t,i){var n,o;if(e||0===e)return this.animate(r("show",3),e,t,i);for(var a=0,l=this.length;a<l;a++)(n=this[a]).style&&(o=n.style.display,!I._data(n,"olddisplay")&&"none"===o&&(o=n.style.display=""),""===o&&"none"===I.css(n,"display")&&I._data(n,"olddisplay",s(n.nodeName)));for(a=0;a<l;a++)(n=this[a]).style&&(""!==(o=n.style.display)&&"none"!==o||(n.style.display=I._data(n,"olddisplay")||""));return this},hide:function(e,t,i){if(e||0===e)return this.animate(r("hide",3),e,t,i);for(var s=0,n=this.length;s<n;s++)if(this[s].style){var o=I.css(this[s],"display");"none"!==o&&!I._data(this[s],"olddisplay")&&I._data(this[s],"olddisplay",o)}for(s=0;s<n;s++)this[s].style&&(this[s].style.display="none");return this},_toggle:I.fn.toggle,toggle:function(e,t,i){var s="boolean"==typeof e;return I.isFunction(e)&&I.isFunction(t)?this._toggle.apply(this,arguments):null==e||s?this.each((function(){var t=s?e:I(this).is(":hidden");I(this)[t?"show":"hide"]()})):this.animate(r("toggle",3),e,t,i),this},fadeTo:function(e,t,i,s){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,i,s)},animate:function(e,t,i,r){var n=I.speed(t,i,r);return I.isEmptyObject(e)?this.each(n.complete,[!1]):(e=I.extend({},e),this[!1===n.queue?"each":"queue"]((function(){!1===n.queue&&I._mark(this);var t,i,r,o,a,l,d,c,h=I.extend({},n),u=1===this.nodeType,p=u&&I(this).is(":hidden");for(r in h.animatedProperties={},e){if(r!==(t=I.camelCase(r))&&(e[t]=e[r],delete e[r]),i=e[t],I.isArray(i)?(h.animatedProperties[t]=i[1],i=e[t]=i[0]):h.animatedProperties[t]=h.specialEasing&&h.specialEasing[t]||h.easing||"swing","hide"===i&&p||"show"===i&&!p)return h.complete.call(this);u&&("height"===t||"width"===t)&&(h.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===I.css(this,"display")&&"none"===I.css(this,"float")&&(I.support.inlineBlockNeedsLayout?"inline"===s(this.nodeName)?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1):this.style.display="inline-block"))}for(r in null!=h.overflow&&(this.style.overflow="hidden"),e)o=new I.fx(this,h,r),i=e[r],ht.test(i)?o["toggle"===i?p?"show":"hide":i]():(a=ut.exec(i),l=o.cur(),a?(d=parseFloat(a[2]),"px"!==(c=a[3]||(I.cssNumber[r]?"":"px"))&&(I.style(this,r,(d||1)+c),l=(d||1)/o.cur()*l,I.style(this,r,l+c)),a[1]&&(d=("-="===a[1]?-1:1)*d+l),o.custom(l,d,c)):o.custom(l,i,""));return!0})))},stop:function(e,t){return e&&this.queue([]),this.each((function(){var e=I.timers,i=e.length;for(t||I._unmark(!0,this);i--;)e[i].elem===this&&(t&&e[i](!0),e.splice(i,1))})),t||this.dequeue(),this}}),I.each({slideDown:r("show",1),slideUp:r("hide",1),slideToggle:r("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){I.fn[e]=function(e,i,s){return this.animate(t,e,i,s)}})),I.extend({speed:function(e,t,i){var s=e&&"object"==typeof e?I.extend({},e):{complete:i||!i&&t||I.isFunction(e)&&e,duration:e,easing:i&&t||t&&!I.isFunction(t)&&t};return s.duration=I.fx.off?0:"number"==typeof s.duration?s.duration:s.duration in I.fx.speeds?I.fx.speeds[s.duration]:I.fx.speeds._default,s.old=s.complete,s.complete=function(e){I.isFunction(s.old)&&s.old.call(this),!1!==s.queue?I.dequeue(this):!1!==e&&I._unmark(this)},s},easing:{linear:function(e,t,i,s){return i+s*e},swing:function(e,t,i,s){return(-Math.cos(e*Math.PI)/2+.5)*s+i}},timers:[],fx:function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig=t.orig||{}}}),I.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(I.fx.step[this.prop]||I.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=I.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,t,i){function s(e){return r.step(e)}var r=this,n=I.fx;this.startTime=dt||o(),this.start=e,this.end=t,this.unit=i||this.unit||(I.cssNumber[this.prop]?"":"px"),this.now=this.start,this.pos=this.state=0,s.elem=this.elem,s()&&I.timers.push(s)&&!lt&&(lt=setInterval(n.tick,n.interval))},show:function(){this.options.orig[this.prop]=I.style(this.elem,this.prop),this.options.show=!0,this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),I(this.elem).show()},hide:function(){this.options.orig[this.prop]=I.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,i,s=dt||o(),r=!0,n=this.elem,a=this.options;if(e||s>=a.duration+this.startTime){for(t in this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0,a.animatedProperties)!0!==a.animatedProperties[t]&&(r=!1);if(r){if(null!=a.overflow&&!I.support.shrinkWrapBlocks&&I.each(["","X","Y"],(function(e,t){n.style["overflow"+t]=a.overflow[e]})),a.hide&&I(n).hide(),a.hide||a.show)for(var l in a.animatedProperties)I.style(n,l,a.orig[l]);a.complete.call(n)}return!1}return a.duration==1/0?this.now=s:(i=s-this.startTime,this.state=i/a.duration,this.pos=I.easing[a.animatedProperties[this.prop]](this.state,i,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},I.extend(I.fx,{tick:function(){for(var e=I.timers,t=0;t<e.length;++t)e[t]()||e.splice(t--,1);e.length||I.fx.stop()},interval:13,stop:function(){clearInterval(lt),lt=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){I.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=("width"===e.prop||"height"===e.prop?Math.max(0,e.now):e.now)+e.unit:e.elem[e.prop]=e.now}}}),I.expr&&I.expr.filters&&(I.expr.filters.animated=function(e){return I.grep(I.timers,(function(t){return e===t.elem})).length});var ft=/^t(?:able|d|h)$/i,gt=/^(?:body|html)$/i;"getBoundingClientRect"in T.documentElement?I.fn.offset=function(e){var t,s=this[0];if(e)return this.each((function(t){I.offset.setOffset(this,e,t)}));if(!s||!s.ownerDocument)return null;if(s===s.ownerDocument.body)return I.offset.bodyOffset(s);try{t=s.getBoundingClientRect()}catch(e){}var r=s.ownerDocument,n=r.documentElement;if(!t||!I.contains(n,s))return t?{top:t.top,left:t.left}:{top:0,left:0};var o=r.body,a=i(r),l=n.clientTop||o.clientTop||0,d=n.clientLeft||o.clientLeft||0,c=a.pageYOffset||I.support.boxModel&&n.scrollTop||o.scrollTop,h=a.pageXOffset||I.support.boxModel&&n.scrollLeft||o.scrollLeft;return{top:t.top+c-l,left:t.left+h-d}}:I.fn.offset=function(e){var t=this[0];if(e)return this.each((function(t){I.offset.setOffset(this,e,t)}));if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return I.offset.bodyOffset(t);I.offset.initialize();for(var i,s=t.offsetParent,r=t.ownerDocument,n=r.documentElement,o=r.body,a=r.defaultView,l=a?a.getComputedStyle(t,null):t.currentStyle,d=t.offsetTop,c=t.offsetLeft;(t=t.parentNode)&&t!==o&&t!==n&&(!I.offset.supportsFixedPosition||"fixed"!==l.position);)i=a?a.getComputedStyle(t,null):t.currentStyle,d-=t.scrollTop,c-=t.scrollLeft,t===s&&(d+=t.offsetTop,c+=t.offsetLeft,I.offset.doesNotAddBorder&&(!I.offset.doesAddBorderForTableAndCells||!ft.test(t.nodeName))&&(d+=parseFloat(i.borderTopWidth)||0,c+=parseFloat(i.borderLeftWidth)||0),s,s=t.offsetParent),I.offset.subtractsBorderForOverflowNotVisible&&"visible"!==i.overflow&&(d+=parseFloat(i.borderTopWidth)||0,c+=parseFloat(i.borderLeftWidth)||0),l=i;return"relative"!==l.position&&"static"!==l.position||(d+=o.offsetTop,c+=o.offsetLeft),I.offset.supportsFixedPosition&&"fixed"===l.position&&(d+=Math.max(n.scrollTop,o.scrollTop),c+=Math.max(n.scrollLeft,o.scrollLeft)),{top:d,left:c}},I.offset={initialize:function(){var e,t,i,s=T.body,r=T.createElement("div"),n=parseFloat(I.css(s,"marginTop"))||0;I.extend(r.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),r.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",s.insertBefore(r,s.firstChild),t=(e=r.firstChild).firstChild,i=e.nextSibling.firstChild.firstChild,this.doesNotAddBorder=5!==t.offsetTop,this.doesAddBorderForTableAndCells=5===i.offsetTop,t.style.position="fixed",t.style.top="20px",this.supportsFixedPosition=20===t.offsetTop||15===t.offsetTop,t.style.position=t.style.top="",e.style.overflow="hidden",e.style.position="relative",this.subtractsBorderForOverflowNotVisible=-5===t.offsetTop,this.doesNotIncludeMarginInBodyOffset=s.offsetTop!==n,s.removeChild(r),I.offset.initialize=I.noop},bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return I.offset.initialize(),I.offset.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(I.css(e,"marginTop"))||0,i+=parseFloat(I.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var s=I.css(e,"position");"static"===s&&(e.style.position="relative");var r,n,o=I(e),a=o.offset(),l=I.css(e,"top"),d=I.css(e,"left"),c={},h={};("absolute"===s||"fixed"===s)&&I.inArray("auto",[l,d])>-1?(r=(h=o.position()).top,n=h.left):(r=parseFloat(l)||0,n=parseFloat(d)||0),I.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(c.top=t.top-a.top+r),null!=t.left&&(c.left=t.left-a.left+n),"using"in t?t.using.call(e,c):o.css(c)}},I.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),i=this.offset(),s=gt.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(I.css(e,"marginTop"))||0,i.left-=parseFloat(I.css(e,"marginLeft"))||0,s.top+=parseFloat(I.css(t[0],"borderTopWidth"))||0,s.left+=parseFloat(I.css(t[0],"borderLeftWidth"))||0,{top:i.top-s.top,left:i.left-s.left}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||T.body;e&&!gt.test(e.nodeName)&&"static"===I.css(e,"position");)e=e.offsetParent;return e}))}}),I.each(["Left","Top"],(function(e,s){var r="scroll"+s;I.fn[r]=function(s){var n,o;return s===t?(n=this[0])?(o=i(n))?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:I.support.boxModel&&o.document.documentElement[r]||o.document.body[r]:n[r]:null:this.each((function(){(o=i(this))?o.scrollTo(e?I(o).scrollLeft():s,e?s:I(o).scrollTop()):this[r]=s}))}})),I.each(["Height","Width"],(function(e,i){var s=i.toLowerCase();I.fn["inner"+i]=function(){var e=this[0];return e&&e.style?parseFloat(I.css(e,s,"padding")):null},I.fn["outer"+i]=function(e){var t=this[0];return t&&t.style?parseFloat(I.css(t,s,e?"margin":"border")):null},I.fn[s]=function(e){var r=this[0];if(!r)return null==e?null:this;if(I.isFunction(e))return this.each((function(t){var i=I(this);i[s](e.call(this,t,i[s]()))}));if(I.isWindow(r)){var n=r.document.documentElement["client"+i],o=r.document.body;return"CSS1Compat"===r.document.compatMode&&n||o&&o["client"+i]||n}if(9===r.nodeType)return Math.max(r.documentElement["client"+i],r.body["scroll"+i],r.documentElement["scroll"+i],r.body["offset"+i],r.documentElement["offset"+i]);if(e===t){var a=I.css(r,s),l=parseFloat(a);return I.isNaN(l)?a:l}return this.css(s,"string"==typeof e?e:e+"px")}})),e.jQuery=e.$=I}(window),
/**
 * sprintf and vsprintf for jQuery
 * somewhat based on http://jan.moesen.nu/code/javascript/sprintf-and-printf-in-javascript/
 * 
 * Copyright (c) 2008 Sabin Iacob (m0n5t3r) <iacobs@m0n5t3r.info>
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details. 
 *
 * @license http://www.gnu.org/licenses/gpl.html 
 * @project jquery.sprintf
 */
function(e){var t={"%":function(e){return"%"},b:function(e){return parseInt(e,10).toString(2)},c:function(e){return String.fromCharCode(parseInt(e,10))},d:function(e){return parseInt(e,10)?parseInt(e,10):0},u:function(e){return Math.abs(e)},f:function(e,t){return t>-1?Math.round(parseFloat(e)*Math.pow(10,t))/Math.pow(10,t):parseFloat(e)},o:function(e){return parseInt(e,10).toString(8)},s:function(e){return e},x:function(e){return(""+parseInt(e,10).toString(16)).toLowerCase()},X:function(e){return(""+parseInt(e,10).toString(16)).toUpperCase()}},i=/%(?:(\d+)?(?:\.(\d+))?|\(([^)]+)\))([%bcdufosxX])/g,s=function(e){if(1==e.length&&"object"==typeof e[0])return e=e[0],function(i,s,r,n,o,a,l){return t[o](e[n])};var i=0;return function(s,r,n,o,a,l,d){return t[a](e[i++],n)}};e.extend({sprintf:function(e){var t=Array.apply(null,arguments).slice(1);return e.replace(i,s(t))},vsprintf:function(e,t){return e.replace(i,s(t))}})}(jQuery),
/*!
 * jQuery UI 1.8.12
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
function(e,t){function i(t){return!e(t).parents().andSelf().filter((function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)})).length}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.12",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each((function(){var s=this;setTimeout((function(){e(s).focus(),i&&i.call(s)}),t)})):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length){i=e(this[0]);for(var s;i.length&&i[0]!==document;){if(("absolute"===(s=i.css("position"))||"relative"===s||"fixed"===s)&&(s=parseInt(i.css("zIndex"),10),!isNaN(s)&&0!==s))return s;i=i.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],(function(i,s){function r(t,i,s,r){return e.each(n,(function(){i-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,s&&(i-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),r&&(i-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)})),i}var n="Width"===s?["Left","Right"]:["Top","Bottom"],o=s.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?a["inner"+s].call(this):this.each((function(){e(this).css(o,r(this,i)+"px")}))},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?a["outer"+s].call(this,t):this.each((function(){e(this).css(o,r(this,t,!0,i)+"px")}))}})),e.extend(e.expr[":"],{data:function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){var s=t.nodeName.toLowerCase(),r=e.attr(t,"tabindex");return"area"===s?(r=(s=t.parentNode).name,!(!t.href||!r||"map"!==s.nodeName.toLowerCase())&&(!!(t=e("img[usemap=#"+r+"]")[0])&&i(t))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"==s&&t.href||!isNaN(r))&&i(t)},tabbable:function(t){var i=e.attr(t,"tabindex");return(isNaN(i)||i>=0)&&e(t).is(":focusable")}}),e((function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"})),e.extend(e.ui,{plugin:{add:function(t,i,s){for(var r in t=e.ui[t].prototype,s)t.plugins[r]=t.plugins[r]||[],t.plugins[r].push([i,s[r]])},call:function(e,t,i){if((t=e.plugins[t])&&e.element[0].parentNode)for(var s=0;s<t.length;s++)e.options[t[s][0]]&&t[s][1].apply(e.element,i)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s;return t[i=i&&"left"===i?"scrollLeft":"scrollTop"]>0||(t[i]=1,s=t[i]>0,t[i]=0,s)},isOverAxis:function(e,t,i){return e>t&&e<t+i},isOver:function(t,i,s,r,n,o){return e.ui.isOverAxis(t,s,n)&&e.ui.isOverAxis(i,r,o)}}))}(jQuery),
/*!
 * jQuery UI Widget 1.8.12
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
function(e,t){if(e.cleanData){var i=e.cleanData;e.cleanData=function(t){for(var s,r=0;null!=(s=t[r]);r++)e(s).triggerHandler("remove");i(t)}}else{var s=e.fn.remove;e.fn.remove=function(t,i){return this.each((function(){return i||t&&!e.filter(t,[this]).length||e("*",this).add([this]).each((function(){e(this).triggerHandler("remove")})),s.call(e(this),t,i)}))}}e.widget=function(t,i,s){var r,n=t.split(".")[0];r=n+"-"+(t=t.split(".")[1]),s||(s=i,i=e.Widget),e.expr[":"][r]=function(i){return!!e.data(i,t)},e[n]=e[n]||{},e[n][t]=function(e,t){arguments.length&&this._createWidget(e,t)},(i=new i).options=e.extend(!0,{},i.options),e[n][t].prototype=e.extend(!0,i,{namespace:n,widgetName:t,widgetEventPrefix:e[n][t].prototype.widgetEventPrefix||t,widgetBaseClass:r},s),e.widget.bridge(t,e[n][t])},e.widget.bridge=function(i,s){e.fn[i]=function(r){var n="string"==typeof r,o=Array.prototype.slice.call(arguments,1),a=this;return r=!n&&o.length?e.extend.apply(null,[!0,r].concat(o)):r,n&&"_"===r.charAt(0)||(n?this.each((function(){var s=e.data(this,i),n=s&&e.isFunction(s[r])?s[r].apply(s,o):s;if(n!==s&&n!==t)return a=n,!1})):this.each((function(){var t=e.data(this,i);t?t.option(r||{})._init():e.data(this,i,new s(r,this))}))),a}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){e.data(i,this.widgetName,this),this.element=e(i),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var s=this;this.element.bind("remove."+this.widgetName,(function(){s.destroy()})),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,s){var r=i;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof i){if(s===t)return this.options[i];(r={})[i]=s}return this._setOptions(r),this},_setOptions:function(t){var i=this;return e.each(t,(function(e,t){i._setOption(e,t)})),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,s){var r=this.options[t];if((i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),s=s||{},i.originalEvent){t=e.event.props.length;for(var n;t;)i[n=e.event.props[--t]]=i.originalEvent[n]}return this.element.trigger(i,s),!(e.isFunction(r)&&!1===r.call(this.element[0],i,s)||i.isDefaultPrevented())}}}(jQuery),
/*!
 * jQuery UI Mouse 1.8.12
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *    jquery.ui.widget.js
 */
function(e){e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,(function(e){return t._mouseDown(e)})).bind("click."+this.widgetName,(function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(t.originalEvent=t.originalEvent||{},!t.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1==t.which,r="string"==typeof this.options.cancel&&e(t.target).parents().add(t.target).filter(this.options.cancel).length;return!(s&&!r&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){i.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(t),!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),t.originalEvent.mouseHandled=!0))}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t))?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.ui=e.ui||{};var t=/left|center|right/,i=/top|center|bottom/,s=e.fn.position,r=e.fn.offset;e.fn.position=function(r){if(!r||!r.of)return s.apply(this,arguments);r=e.extend({},r);var n,o,a,l=e(r.of),d=l[0],c=(r.collision||"flip").split(" "),h=r.offset?r.offset.split(" "):[0,0];return 9===d.nodeType?(n=l.width(),o=l.height(),a={top:0,left:0}):d.setTimeout?(n=l.width(),o=l.height(),a={top:l.scrollTop(),left:l.scrollLeft()}):d.preventDefault?(r.at="left top",n=o=0,a={top:r.of.pageY,left:r.of.pageX}):(n=l.outerWidth(),o=l.outerHeight(),a=l.offset()),e.each(["my","at"],(function(){var e=(r[this]||"").split(" ");1===e.length&&(e=t.test(e[0])?e.concat(["center"]):i.test(e[0])?["center"].concat(e):["center","center"]),e[0]=t.test(e[0])?e[0]:"center",e[1]=i.test(e[1])?e[1]:"center",r[this]=e})),1===c.length&&(c[1]=c[0]),h[0]=parseInt(h[0],10)||0,1===h.length&&(h[1]=h[0]),h[1]=parseInt(h[1],10)||0,"right"===r.at[0]?a.left+=n:"center"===r.at[0]&&(a.left+=n/2),"bottom"===r.at[1]?a.top+=o:"center"===r.at[1]&&(a.top+=o/2),a.left+=h[0],a.top+=h[1],this.each((function(){var t,i=e(this),s=i.outerWidth(),l=i.outerHeight(),d=parseInt(e.curCSS(this,"marginLeft",!0))||0,u=parseInt(e.curCSS(this,"marginTop",!0))||0,p=s+d+(parseInt(e.curCSS(this,"marginRight",!0))||0),f=l+u+(parseInt(e.curCSS(this,"marginBottom",!0))||0),g=e.extend({},a);"right"===r.my[0]?g.left-=s:"center"===r.my[0]&&(g.left-=s/2),"bottom"===r.my[1]?g.top-=l:"center"===r.my[1]&&(g.top-=l/2),g.left=Math.round(g.left),g.top=Math.round(g.top),t={left:g.left-d,top:g.top-u},e.each(["left","top"],(function(i,a){e.ui.position[c[i]]&&e.ui.position[c[i]][a](g,{targetWidth:n,targetHeight:o,elemWidth:s,elemHeight:l,collisionPosition:t,collisionWidth:p,collisionHeight:f,offset:h,my:r.my,at:r.at})})),e.fn.bgiframe&&i.bgiframe(),i.offset(e.extend(g,{using:r.using}))}))},e.ui.position={fit:{left:function(t,i){var s=e(window);s=i.collisionPosition.left+i.collisionWidth-s.width()-s.scrollLeft(),t.left=s>0?t.left-s:Math.max(t.left-i.collisionPosition.left,t.left)},top:function(t,i){var s=e(window);s=i.collisionPosition.top+i.collisionHeight-s.height()-s.scrollTop(),t.top=s>0?t.top-s:Math.max(t.top-i.collisionPosition.top,t.top)}},flip:{left:function(t,i){if("center"!==i.at[0]){var s=e(window);s=i.collisionPosition.left+i.collisionWidth-s.width()-s.scrollLeft();var r="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,n="left"===i.at[0]?i.targetWidth:-i.targetWidth,o=-2*i.offset[0];t.left+=i.collisionPosition.left<0||s>0?r+n+o:0}},top:function(t,i){if("center"!==i.at[1]){var s=e(window);s=i.collisionPosition.top+i.collisionHeight-s.height()-s.scrollTop();var r="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,n="top"===i.at[1]?i.targetHeight:-i.targetHeight,o=-2*i.offset[1];t.top+=i.collisionPosition.top<0||s>0?r+n+o:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,i){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var s=e(t),r=s.offset(),n=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0;r={top:i.top-r.top+n,left:i.left-r.left+o},"using"in i?i.using.call(t,r):s.css(r)},e.fn.offset=function(t){var i=this[0];return i&&i.ownerDocument?t?this.each((function(){e.offset.setOffset(this,t)})):r.call(this):null})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(t),!!this.handle)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){if(i=this._uiHash(),!1===this._trigger("drag",t,i))return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;if(e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),!(this.element[0]&&this.element[0].parentNode||"original"!=this.options.helper))return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==s._trigger("stop",t)&&s._clear()}))}else!1!==this._trigger("stop",t)&&this._clear();return!1},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!e(this.options.handle,this.element).length;return e(this.options.handle,this.element).find("*").andSelf().each((function(){this==t.target&&(i=!0)})),i},_createHelper:function(t){var i=this.options;return(t=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone():this.element).parents("body").length||t.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),t[0]!=this.element[0]&&!/(fixed|absolute)/.test(t.css("position"))&&t.css("position","absolute"),t},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),"document"!=t.containment&&"window"!=t.containment||(this.containment=[("document"==t.containment?0:e(window).scrollLeft())-this.offset.relative.left-this.offset.parent.left,("document"==t.containment?0:e(window).scrollTop())-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment)[0];if(i){t=e(t.containment).offset();var s="hidden"!=e(i).css("overflow");this.containment=[t.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0),t.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0),t.left+(s?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,t.top+(s?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom]}}},_convertPositionTo:function(t,i){i||(i=this.position),t="absolute"==t?1:-1;var s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*t+this.offset.parent.top*t-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*t),left:i.left+this.offset.relative.left*t+this.offset.parent.left*t-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*t)}},_generatePosition:function(t){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(s[0].tagName),n=t.pageX,o=t.pageY;return this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(o=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment&&(o-this.offset.click.top<this.containment[1]||o-this.offset.click.top>this.containment[3])?o-this.offset.click.top<this.containment[1]?o+i.grid[1]:o-i.grid[1]:o,n=this.originalPageX+Math.round((n-this.originalPageX)/i.grid[0])*i.grid[0],n=this.containment&&(n-this.offset.click.left<this.containment[0]||n-this.offset.click.left>this.containment[2])?n-this.offset.click.left<this.containment[0]?n+i.grid[0]:n-i.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.12"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var s=e(this).data("draggable"),r=s.options,n=e.extend({},i,{item:s.element});s.sortables=[],e(r.connectToSortable).each((function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,n))}))},stop:function(t,i){var s=e(this).data("draggable"),r=e.extend({},i,{item:s.element});e.each(s.sortables,(function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))}))},drag:function(t,i){var s=e(this).data("draggable"),r=this;e.each(s.sortables,(function(){this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)}))}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","iframeFix",{start:function(){var t=e(this).data("draggable").options;e(!0===t.iframeFix?"iframe":t.iframeFix).each((function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}))},stop:function(){e("div.ui-draggable-iframeFix").each((function(){this.parentNode.removeChild(this)}))}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){t=e(i.helper),i=e(this).data("draggable").options,t.css("opacity")&&(i._opacity=t.css("opacity")),t.css("opacity",i.opacity)},stop:function(t,i){(t=e(this).data("draggable").options)._opacity&&e(i.helper).css("opacity",t._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("draggable"),s=i.options,r=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(s.axis&&"x"==s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=r=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"==s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=r=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"==s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"==s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),!1!==r&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each((function(){var i=e(this),s=i.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})}))},drag:function(t,i){for(var s=e(this).data("draggable"),r=s.options,n=r.snapTolerance,o=i.offset.left,a=o+s.helperProportions.width,l=i.offset.top,d=l+s.helperProportions.height,c=s.snapElements.length-1;c>=0;c--){var h=s.snapElements[c].left,u=h+s.snapElements[c].width,p=s.snapElements[c].top,f=p+s.snapElements[c].height;if(h-n<o&&o<u+n&&p-n<l&&l<f+n||h-n<o&&o<u+n&&p-n<d&&d<f+n||h-n<a&&a<u+n&&p-n<l&&l<f+n||h-n<a&&a<u+n&&p-n<d&&d<f+n){if("inner"!=r.snapMode){var g=Math.abs(p-d)<=n,m=Math.abs(f-l)<=n,v=Math.abs(h-a)<=n,b=Math.abs(u-o)<=n;g&&(i.position.top=s._convertPositionTo("relative",{top:p-s.helperProportions.height,left:0}).top-s.margins.top),m&&(i.position.top=s._convertPositionTo("relative",{top:f,left:0}).top-s.margins.top),v&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left-s.margins.left),b&&(i.position.left=s._convertPositionTo("relative",{top:0,left:u}).left-s.margins.left)}var y=g||m||v||b;"outer"!=r.snapMode&&(g=Math.abs(p-l)<=n,m=Math.abs(f-d)<=n,v=Math.abs(h-o)<=n,b=Math.abs(u-a)<=n,g&&(i.position.top=s._convertPositionTo("relative",{top:p,left:0}).top-s.margins.top),m&&(i.position.top=s._convertPositionTo("relative",{top:f-s.helperProportions.height,left:0}).top-s.margins.top),v&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left-s.margins.left),b&&(i.position.left=s._convertPositionTo("relative",{top:0,left:u-s.helperProportions.width}).left-s.margins.left)),!s.snapElements[c].snapping&&(g||m||v||b||y)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=g||m||v||b||y}else s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t=e(this).data("draggable").options;if((t=e.makeArray(e(t.stack)).sort((function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)}))).length){var i=parseInt(t[0].style.zIndex)||0;e(t).each((function(e){this.style.zIndex=i+e})),this[0].style.zIndex=i+t.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){t=e(i.helper),i=e(this).data("draggable").options,t.css("zIndex")&&(i._zIndex=t.css("zIndex")),t.css("zIndex",i.zIndex)},stop:function(t,i){(t=e(this).data("draggable").options)._zIndex&&e(i.helper).css("zIndex",t._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current;if(!s||(s.currentItem||s.element)[0]==this.element[0])return!1;var r=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each((function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==s.options.scope&&t.accept.call(t.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return r=!0,!1})),!r&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.12"}),e.ui.intersect=function(t,i,s){if(!i.offset)return!1;var r=(t.positionAbs||t.position.absolute).left,n=r+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,a=o+t.helperProportions.height,l=i.offset.left,d=l+i.proportions.width,c=i.offset.top,h=c+i.proportions.height;switch(s){case"fit":return l<=r&&n<=d&&c<=o&&a<=h;case"intersect":return l<r+t.helperProportions.width/2&&n-t.helperProportions.width/2<d&&c<o+t.helperProportions.height/2&&a-t.helperProportions.height/2<h;case"pointer":return e.ui.isOver((t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,c,l,i.proportions.height,i.proportions.width);case"touch":return(o>=c&&o<=h||a>=c&&a<=h||o<c&&a>h)&&(r>=l&&r<=d||n>=l&&n<=d||r<l&&n>d);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var s=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,n=(t.currentItem||t.element).find(":data(droppable)").andSelf(),o=0;e:for(;o<s.length;o++)if(!(s[o].options.disabled||t&&!s[o].accept.call(s[o].element[0],t.currentItem||t.element))){for(var a=0;a<n.length;a++)if(n[a]==s[o].element[0]){s[o].proportions.height=0;continue e}s[o].visible="none"!=s[o].element.css("display"),s[o].visible&&("mousedown"==r&&s[o]._activate.call(s[o],i),s[o].offset=s[o].element.offset(),s[o].proportions={width:s[o].element[0].offsetWidth,height:s[o].element[0].offsetHeight})}},drop:function(t,i){var s=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(s=s||this._drop.call(this,i)),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))})),s},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s=e.ui.intersect(t,this,this.options.tolerance);if(s=s||1!=this.isover?s&&0==this.isover?"isover":null:"isout"){var r;if(this.options.greedy){var n=this.element.parents(":data(droppable):eq(0)");n.length&&((r=e.data(n[0],"droppable")).greedyChild="isover"==s?1:0)}r&&"isover"==s&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[s]=1,this["isout"==s?"isover":"isout"]=0,this["isover"==s?"_over":"_out"].call(this,i),r&&"isout"==s&&(r.isout=0,r.isover=1,r._over.call(r,i))}}}))}}}(jQuery),function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&e.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var s=this.handles.split(",");this.handles={};for(var r=0;r<s.length;r++){var n=e.trim(s[r]),o=e('<div class="ui-resizable-handle ui-resizable-'+n+'"></div>');/sw|se|ne|nw/.test(n)&&o.css({zIndex:++i.zIndex}),"se"==n&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(o)}}this._renderAxis=function(t){for(var i in t=t||this.element,this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var s,r=e(this.handles[i],this.element);s=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),r=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(r,s),this._proportionallyResize()}e(this.handles[i])}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover((function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}})),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover((function(){e(this).removeClass("ui-resizable-autohide"),t._handles.show()}),(function(){t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())}))),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;i.after(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var s in this.handles)e(this.handles[s])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(i){var s=this.options,r=this.element.position(),n=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(n.is(".ui-draggable")||/absolute/.test(n.css("position")))&&n.css({position:"absolute",top:r.top,left:r.left}),e.browser.opera&&/relative/.test(n.css("position"))&&n.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy(),r=t(this.helper.css("left"));var o=t(this.helper.css("top"));return s.containment&&(r+=e(s.containment).scrollLeft()||0,o+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:o},this.size=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalPosition={left:r,top:o},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"==s?this.axis+"-resize":s),n.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var t=this.helper,i=this.originalMousePosition,s=this._change[this.axis];return!!s&&(i=s.apply(this,[e,e.pageX-i.left||0,e.pageY-i.top||0]),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(i),this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i=this.options,s=this;if(this._helper){var r=this._proportionallyResizeElements,n=r.length&&/textarea/i.test(r[0].nodeName);r=n&&e.ui.hasScroll(r[0],"left")?0:s.sizeDiff.height,n=n?0:s.sizeDiff.width,n={width:s.helper.width()-n,height:s.helper.height()-r},r=parseInt(s.element.css("left"),10)+(s.position.left-s.originalPosition.left)||null;var o=parseInt(s.element.css("top"),10)+(s.position.top-s.originalPosition.top)||null;i.animate||this.element.css(e.extend(n,{top:o,left:r})),s.helper.height(s.size.height),s.helper.width(s.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return e.height?e.width=i.height*this.aspectRatio:e.width&&(e.height=i.width/this.aspectRatio),"sw"==s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"==s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this.options,s=this.axis,r=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,a=i(e.height)&&t.minHeight&&t.minHeight>e.height;o&&(e.width=t.minWidth),a&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight);var l=this.originalPosition.left+this.originalSize.width,d=this.position.top+this.size.height,c=/sw|nw|w/.test(s);return s=/nw|ne|n/.test(s),o&&c&&(e.left=l-t.minWidth),r&&c&&(e.left=l-t.maxWidth),a&&s&&(e.top=d-t.minHeight),n&&s&&(e.top=d-t.maxHeight),(t=!e.width&&!e.height)&&!e.left&&e.top?e.top=null:t&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var s=this._proportionallyResizeElements[i];if(!this.borderDif){var r=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")];this.borderDif=e.map(r,(function(e,t){return(e=parseInt(e,10)||0)+(t=parseInt(n[t],10)||0)}))}e.browser.msie&&(e(t).is(":hidden")||e(t).parents(":hidden").length)||s.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.options;if(this.elementOffset=this.element.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var i=e.browser.msie&&e.browser.version<7,s=i?1:0;i=i?2:-1,this.helper.addClass(this._helper).css({width:this.element.outerWidth()+i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-s+"px",top:this.elementOffset.top-s+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){return{left:this.originalPosition.left+t,width:this.originalSize.width-t}},n:function(e,t,i){return{top:this.originalPosition.top+i,height:this.originalSize.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.12"}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("resizable").options,i=function(t){e(t).each((function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10),position:t.css("position")})}))};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):e.each(t.alsoResize,(function(e){i(e)}))},resize:function(t,i){var s=e(this).data("resizable");t=s.options;var r=s.originalSize,n=s.originalPosition,o={height:s.size.height-r.height||0,width:s.size.width-r.width||0,top:s.position.top-n.top||0,left:s.position.left-n.left||0},a=function(t,r){e(t).each((function(){var t=e(this),n=e(this).data("resizable-alsoresize"),a={},l=r&&r.length?r:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(l,(function(e,t){(e=(n[t]||0)+(o[t]||0))&&e>=0&&(a[t]=e||null)})),e.browser.opera&&/relative/.test(t.css("position"))&&(s._revertToRelativePosition=!0,t.css({position:"absolute",top:"auto",left:"auto"})),t.css(a)}))};"object"!=typeof t.alsoResize||t.alsoResize.nodeType?a(t.alsoResize):e.each(t.alsoResize,(function(e,t){a(e,t)}))},stop:function(){var t=e(this).data("resizable"),i=t.options,s=function(t){e(t).each((function(){var t=e(this);t.css({position:t.data("resizable-alsoresize").position})}))};t._revertToRelativePosition&&(t._revertToRelativePosition=!1,"object"!=typeof i.alsoResize||i.alsoResize.nodeType?s(i.alsoResize):e.each(i.alsoResize,(function(e){s(e)}))),e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("resizable"),s=i.options,r=i._proportionallyResizeElements,n=r.length&&/textarea/i.test(r[0].nodeName),o=n&&e.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height;n={width:i.size.width-(n?0:i.sizeDiff.width),height:i.size.height-o},o=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null;var a=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(n,a&&o?{top:a,left:o}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i=e(this).data("resizable"),s=i.element,r=i.options.containment;if(s=r instanceof e?r.get(0):/parent/.test(r)?s.parent().get(0):r)if(i.containerElement=e(s),/document/.test(r)||r==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var n=e(s),o=[];e(["Top","Right","Left","Bottom"]).each((function(e,i){o[e]=t(n.css("padding"+i))})),i.containerOffset=n.offset(),i.containerPosition=n.position(),i.containerSize={height:n.innerHeight()-o[3],width:n.innerWidth()-o[1]},r=i.containerOffset;var a=i.containerSize.height,l=i.containerSize.width;l=e.ui.hasScroll(s,"left")?s.scrollWidth:l,a=e.ui.hasScroll(s)?s.scrollHeight:a,i.parentData={element:s,left:r.left,top:r.top,width:l,height:a}}},resize:function(t){var i=e(this).data("resizable"),s=i.options,r=i.containerOffset,n=i.position;t=i._aspectRatio||t.shiftKey;var o={top:0,left:0},a=i.containerElement;a[0]!=document&&/static/.test(a.css("position"))&&(o=r),n.left<(i._helper?r.left:0)&&(i.size.width+=i._helper?i.position.left-r.left:i.position.left-o.left,t&&(i.size.height=i.size.width/s.aspectRatio),i.position.left=s.helper?r.left:0),n.top<(i._helper?r.top:0)&&(i.size.height+=i._helper?i.position.top-r.top:i.position.top,t&&(i.size.width=i.size.height*s.aspectRatio),i.position.top=i._helper?r.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top,s=Math.abs((i._helper,i.offset.left-o.left+i.sizeDiff.width)),r=Math.abs((i._helper?i.offset.top-o.top:i.offset.top-r.top)+i.sizeDiff.height),n=i.containerElement.get(0)==i.element.parent().get(0),o=/relative|absolute/.test(i.containerElement.css("position")),n&&o&&(s-=i.parentData.left),s+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-s,t&&(i.size.height=i.size.width/i.aspectRatio)),r+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-r,t&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=e(this).data("resizable"),i=t.options,s=t.containerOffset,r=t.containerPosition,n=t.containerElement,o=e(t.helper),a=o.offset(),l=o.outerWidth()-t.sizeDiff.width;o=o.outerHeight()-t.sizeDiff.height,t._helper&&!i.animate&&/relative/.test(n.css("position"))&&e(this).css({left:a.left-r.left-s.left,width:l,height:o}),t._helper&&!i.animate&&/static/.test(n.css("position"))&&e(this).css({left:a.left-r.left-s.left,width:l,height:o})}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("resizable"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("resizable"),i=t.options,s=t.size,r=t.originalSize,n=t.originalPosition,o=t.axis;i.grid="number"==typeof i.grid?[i.grid,i.grid]:i.grid;var a=Math.round((s.width-r.width)/(i.grid[0]||1))*(i.grid[0]||1);i=Math.round((s.height-r.height)/(i.grid[1]||1))*(i.grid[1]||1),/^(se|s|e)$/.test(o)?(t.size.width=r.width+a,t.size.height=r.height+i):/^(ne)$/.test(o)?(t.size.width=r.width+a,t.size.height=r.height+i,t.position.top=n.top-i):(/^(sw)$/.test(o)?(t.size.width=r.width+a,t.size.height=r.height+i):(t.size.width=r.width+a,t.size.height=r.height+i,t.position.top=n.top-i),t.position.left=n.left-a)}});var t=function(e){return parseInt(e,10)||0},i=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(t=e(i.options.filter,i.element[0])).each((function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})}))},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var s=this.options;this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))})),e(t.target).parents().andSelf().each((function(){var s=e.data(this,"selectable-item");if(s){var r=!t.metaKey||!s.$element.hasClass("ui-selected");return s.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),s.unselecting=!r,s.selecting=r,(s.selected=r)?i._trigger("selecting",t,{selecting:s.element}):i._trigger("unselecting",t,{unselecting:s.element}),!1}}))}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var s=this.options,r=this.opos[0],n=this.opos[1],o=t.pageX,a=t.pageY;if(r>o){var l=o;o=r,r=l}return n>a&&(l=a,a=n,n=l),this.helper.css({left:r,top:n,width:o-r,height:a-n}),this.selectees.each((function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var d=!1;"touch"==s.tolerance?d=!(l.left>o||l.right<r||l.top>a||l.bottom<n):"fit"==s.tolerance&&(d=l.left>r&&l.right<o&&l.top>n&&l.bottom<a),d?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&(t.metaKey&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&(t.metaKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element}))))}})),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each((function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})})),e(".ui-selecting",this.element[0]).each((function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})})),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.12"})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&(/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData("sortable-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var s=null,r=this;if(e(t.target).parents().each((function(){if(e.data(this,"sortable-item")==r)return s=e(this),!1})),e.data(t.target,"sortable-item")==r&&(s=e(t.target)),!s)return!1;if(this.options.handle&&!i){var n=!1;if(e(this.options.handle,s).find("*").andSelf().each((function(){this==t.target&&(n=!0)})),!n)return!1}return this.currentItem=s,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,s){i=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,s=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}for(this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--){var r=(s=this.items[i]).item[0],n=this._intersectsWithPointer(s);if(n&&!(r==this.currentItem[0]||this.placeholder[1==n?"next":"prev"]()[0]==r||e.ui.contains(this.placeholder[0],r)||"semi-dynamic"==this.options.type&&e.ui.contains(this.element[0],r))){if(this.direction=1==n?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this;i=s.placeholder.offset(),s.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-s.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-s.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,(function(){s._clear(t)}))}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each((function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))})),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each((function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")})),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,r=s+this.helperProportions.height,n=e.left,o=n+e.width,a=e.top,l=a+e.height,d=this.offset.click.top,c=this.offset.click.left;return d=s+d>a&&s+d<l&&t+c>n&&t+c<o,"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:n<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<s+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height);t=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=i&&t,t=this._getDragVerticalDirection();var s=this._getDragHorizontalDirection();return!!i&&(this.floating?s&&"right"==s||"down"==t?2:1:t&&("down"==t?2:1))},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height);t=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width);var s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"==r&&t||"left"==r&&!t:s&&("down"==s&&i||"up"==s&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],s=[],r=this._connectWith();if(r&&t)for(t=r.length-1;t>=0;t--)for(var n=e(r[t]),o=n.length-1;o>=0;o--){var a=e.data(n[o],"sortable");a&&a!=this&&!a.options.disabled&&s.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),t=s.length-1;t>=0;t--)s[t][0].each((function(){i.push(this)}));return e(i)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data(sortable-item)"),t=0;t<this.items.length;t++)for(var i=0;i<e.length;i++)e[i]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,s=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],r=this._connectWith();if(r)for(var n=r.length-1;n>=0;n--)for(var o=e(r[n]),a=o.length-1;a>=0;a--){var l=e.data(o[a],"sortable");l&&l!=this&&!l.options.disabled&&(s.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(n=s.length-1;n>=0;n--)for(t=s[n][1],a=0,o=(r=s[n][0]).length;a<o;a++)(l=e(r[a])).data("sortable-item",t),i.push({item:l,instance:t,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var s=this.items[i];if(s.instance==this.currentContainer||!this.currentContainer||s.item[0]==this.currentItem[0]){var r=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item;t||(s.width=r.outerWidth(),s.height=r.outerHeight()),r=r.offset(),s.left=r.left,s.top=r.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i=t||this,s=i.options;if(!s.placeholder||s.placeholder.constructor==String){var r=s.placeholder;s.placeholder={element:function(){var t=e(document.createElement(i.currentItem[0].nodeName)).addClass(r||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(t.style.visibility="hidden"),t},update:function(e,t){r&&!s.forcePlaceholderSize||(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=e(s.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),s.placeholder.update(i,i.placeholder)},_contactContainers:function(t){for(var i=null,s=null,r=this.containers.length-1;r>=0;r--)e.ui.contains(this.currentItem[0],this.containers[r].element[0])||(this._intersectsWith(this.containers[r].containerCache)?i&&e.ui.contains(this.containers[r].element[0],i.element[0])||(i=this.containers[r],s=r):this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0));if(i)if(1===this.containers.length)this.containers[s]._trigger("over",t,this._uiHash(this)),this.containers[s].containerCache.over=1;else if(this.currentContainer!=this.containers[s]){i=1e4,r=null;for(var n=this.positionAbs[this.containers[s].floating?"left":"top"],o=this.items.length-1;o>=0;o--)if(e.ui.contains(this.containers[s].element[0],this.items[o].item[0])){var a=this.items[o][this.containers[s].floating?"left":"top"];Math.abs(a-n)<i&&(i=Math.abs(a-n),r=this.items[o])}(r||this.options.dropOnEmpty)&&(this.currentContainer=this.containers[s],r?this._rearrange(t,r,null,!0):this._rearrange(t,null,this.containers[s].element,!0),this._trigger("change",t,this._uiHash()),this.containers[s]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[s]._trigger("over",t,this._uiHash(this)),this.containers[s].containerCache.over=1)}},_createHelper:function(t){var i=this.options;return(t=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem).parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(t[0]),t[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==t[0].style.width||i.forceHelperSize)&&t.width(this.currentItem.width()),(""==t[0].style.height||i.forceHelperSize)&&t.height(this.currentItem.height()),t},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),"document"!=t.containment&&"window"!=t.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0];t=e(t.containment).offset();var s="hidden"!=e(i).css("overflow");this.containment=[t.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,t.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,t.left+(s?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,t.top+(s?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position),t="absolute"==t?1:-1;var s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*t+this.offset.parent.top*t-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*t),left:i.left+this.offset.relative.left*t+this.offset.parent.left*t-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*t)}},_generatePosition:function(t){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(s[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var n=t.pageX,o=t.pageY;return this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(o=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment&&(o-this.offset.click.top<this.containment[1]||o-this.offset.click.top>this.containment[3])?o-this.offset.click.top<this.containment[1]?o+i.grid[1]:o-i.grid[1]:o,n=this.originalPageX+Math.round((n-this.originalPageX)/i.grid[0])*i.grid[0],n=this.containment&&(n-this.offset.click.left<this.containment[0]||n-this.offset.click.left>this.containment[2])?n-this.offset.click.left<this.containment[0]?n+i.grid[0]:n-i.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this,n=this.counter;window.setTimeout((function(){n==r.counter&&r.refreshPositions(!s)}),0)},_clear:function(t,i){this.reverting=!1;var s=[];if(!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var r in this._storedCSS)"auto"!=this._storedCSS[r]&&"static"!=this._storedCSS[r]||(this._storedCSS[r]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&s.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||s.push((function(e){this._trigger("update",e,this._uiHash())})),!e.ui.contains(this.element[0],this.currentItem[0]))for(i||s.push((function(e){this._trigger("remove",e,this._uiHash())})),r=this.containers.length-1;r>=0;r--)e.ui.contains(this.containers[r].element[0],this.currentItem[0])&&!i&&(s.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[r])),s.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[r])));for(r=this.containers.length-1;r>=0;r--)i||s.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(s.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){for(this._trigger("beforeStop",t,this._uiHash()),r=0;r<s.length;r++)s[r].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(r=0;r<s.length;r++)s[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.12"})}(jQuery),function(e){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,i=t.options;if(t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",(function(){i.disabled||e(this).addClass("ui-state-hover")})).bind("mouseleave.accordion",(function(){i.disabled||e(this).removeClass("ui-state-hover")})).bind("focus.accordion",(function(){i.disabled||e(this).addClass("ui-state-focus")})).bind("blur.accordion",(function(){i.disabled||e(this).removeClass("ui-state-focus")})),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),i.navigation){var s=t.element.find("a").filter(i.navigationFilter).eq(0);if(s.length){var r=s.closest(".ui-accordion-header");t.active=r.length?r:s.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||i.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",(function(e){return t._keydown(e)})).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),i.event&&t.headers.bind(i.event.split(" ").join(".accordion ")+".accordion",(function(e){t._clickHandler.call(t,e,this),e.preventDefault()}))},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var i=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&i.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"active"==t&&this.activate(i),"icons"==t&&(this._destroyIcons(),i&&this._createIcons()),"disabled"==t&&this.headers.add(this.headers.next())[i?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(!(this.options.disabled||t.altKey||t.ctrlKey)){var i=e.ui.keyCode,s=this.headers.length,r=this.headers.index(t.target),n=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:n=this.headers[(r+1)%s];break;case i.LEFT:case i.UP:n=this.headers[(r-1+s)%s];break;case i.SPACE:case i.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return!n||(e(t.target).attr("tabIndex",-1),e(n).attr("tabIndex",0),n.focus(),!1)}},resize:function(){var t,i=this.options;if(i.fillSpace){if(e.browser.msie){var s=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}t=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",s),this.headers.each((function(){t-=e(this).outerHeight(!0)})),this.headers.next().each((function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")}else i.autoHeight&&(t=0,this.headers.next().each((function(){t=Math.max(t,e(this).height("").height())})).height(t));return this},activate:function(e){return this.options.active=e,e=this._findActive(e)[0],this._clickHandler({target:e},e),this},_findActive:function(t){return t?"number"==typeof t?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):!1===t?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,i){var s=this.options;if(!s.disabled)if(t.target){if(i=(t=e(t.currentTarget||i))[0]===this.active[0],s.active=(!s.collapsible||!i)&&this.headers.index(t),!(this.running||!s.collapsible&&i)){var r=this.active;l=t.next(),o=this.active.next(),a={options:s,newHeader:i&&s.collapsible?e([]):t,oldHeader:this.active,newContent:i&&s.collapsible?e([]):l,oldContent:o};var n=this.headers.index(this.active[0])>this.headers.index(t[0]);this.active=i?e([]):t,this._toggle(l,o,a,i,n),r.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(s.icons.headerSelected).addClass(s.icons.header),i||(t.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(s.icons.header).addClass(s.icons.headerSelected),t.next().addClass("ui-accordion-content-active"))}}else if(s.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(s.icons.headerSelected).addClass(s.icons.header),this.active.next().addClass("ui-accordion-content-active");var o=this.active.next(),a={options:s,newHeader:e([]),oldHeader:s.active,newContent:e([]),oldContent:o},l=this.active=e([]);this._toggle(l,o,a)}},_toggle:function(t,i,s,r,n){var o=this,a=o.options;o.toShow=t,o.toHide=i,o.data=s;var l=function(){if(o)return o._completed.apply(o,arguments)};if(o._trigger("changestart",null,o.data),o.running=0===i.size()?t.size():i.size(),a.animated){s={},s=a.collapsible&&r?{toShow:e([]),toHide:i,complete:l,down:n,autoHeight:a.autoHeight||a.fillSpace}:{toShow:t,toHide:i,complete:l,down:n,autoHeight:a.autoHeight||a.fillSpace},a.proxied||(a.proxied=a.animated),a.proxiedDuration||(a.proxiedDuration=a.duration),a.animated=e.isFunction(a.proxied)?a.proxied(s):a.proxied,a.duration=e.isFunction(a.proxiedDuration)?a.proxiedDuration(s):a.proxiedDuration,r=e.ui.accordion.animations;var d=a.duration,c=a.animated;!c||r[c]||e.easing[c]||(c="slide"),r[c]||(r[c]=function(e){this.slide(e,{easing:c,duration:d||700})}),r[c](s)}else a.collapsible&&r?t.toggle():(i.hide(),t.show()),l(!0);i.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),e.extend(e.ui.accordion,{version:"1.8.12",animations:{slide:function(t,i){if((t=e.extend({easing:"swing",duration:300},t,i)).toHide.size())if(t.toShow.size()){var s,r=t.toShow.css("overflow"),n=0,o={},a={};i=t.toShow,s=i[0].style.width,i.width(parseInt(i.parent().width(),10)-parseInt(i.css("paddingLeft"),10)-parseInt(i.css("paddingRight"),10)-(parseInt(i.css("borderLeftWidth"),10)||0)-(parseInt(i.css("borderRightWidth"),10)||0)),e.each(["height","paddingTop","paddingBottom"],(function(i,s){a[s]="hide",i=(""+e.css(t.toShow[0],s)).match(/^([\d+-.]+)(.*)$/),o[s]={value:i[1],unit:i[2]||"px"}})),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(a,{step:function(e,i){"height"==i.prop&&(n=i.end-i.start==0?0:(i.now-i.start)/(i.end-i.start)),t.toShow[0].style[i.prop]=n*o[i.prop].value+o[i.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:s,overflow:r}),t.complete()}})}else t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);else t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t)},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t,i=this,s=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",(function(s){if(!i.options.disabled&&!i.element.attr("readonly")){t=!1;var r=e.ui.keyCode;switch(s.keyCode){case r.PAGE_UP:i._move("previousPage",s);break;case r.PAGE_DOWN:i._move("nextPage",s);break;case r.UP:i._move("previous",s),s.preventDefault();break;case r.DOWN:i._move("next",s),s.preventDefault();break;case r.ENTER:case r.NUMPAD_ENTER:i.menu.active&&(t=!0,s.preventDefault());case r.TAB:if(!i.menu.active)return;i.menu.select(s);break;case r.ESCAPE:i.element.val(i.term),i.close(s);break;default:clearTimeout(i.searching),i.searching=setTimeout((function(){i.term!=i.element.val()&&(i.selectedItem=null,i.search(null,s))}),i.options.delay)}}})).bind("keypress.autocomplete",(function(e){t&&(t=!1,e.preventDefault())})).bind("focus.autocomplete",(function(){i.options.disabled||(i.selectedItem=null,i.previous=i.element.val())})).bind("blur.autocomplete",(function(e){i.options.disabled||(clearTimeout(i.searching),i.closing=setTimeout((function(){i.close(e),i._change(e)}),150))})),this._initSource(),this.response=function(){return i._response.apply(i,arguments)},this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",s)[0]).mousedown((function(t){var s=i.menu.element[0];e(t.target).closest(".ui-menu-item").length||setTimeout((function(){e(document).one("mousedown",(function(t){t.target!==i.element[0]&&t.target!==s&&!e.ui.contains(s,t.target)&&i.close()}))}),1),setTimeout((function(){clearTimeout(i.closing)}),13)})).menu({focus:function(e,t){t=t.item.data("item.autocomplete"),!1!==i._trigger("focus",e,{item:t})&&/^key/.test(e.originalEvent.type)&&i.element.val(t.value)},selected:function(e,t){var r=t.item.data("item.autocomplete"),n=i.previous;i.element[0]!==s.activeElement&&(i.element.focus(),i.previous=n,setTimeout((function(){i.previous=n,i.selectedItem=r}),1)),!1!==i._trigger("select",e,{item:r})&&i.element.val(r.value),i.term=i.element.val(),i.close(e),i.selectedItem=r},blur:function(){i.menu.element.is(":visible")&&i.element.val()!==i.term&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(e(i||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var i,s,r=this;e.isArray(this.options.source)?(i=this.options.source,this.source=function(t,s){s(e.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(s=this.options.source,this.source=function(i,n){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:s,data:i,dataType:"json",autocompleteRequest:++t,success:function(e){this.autocompleteRequest===t&&n(e)},error:function(){this.autocompleteRequest===t&&n([])}})}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),!1!==this._trigger("search",t)?this._search(e):void 0)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this.response)},_response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,(function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)}))},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth(),this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,(function(e,i){s._renderItem(t,i)}))},_renderItem:function(t,i){return e("<li></li>").data("item.autocomplete",i).append(e("<a></a>").text(i.label)).appendTo(t)},_move:function(e,t){this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),this.menu.deactivate()):this.menu[e](t):this.search(null,t)},widget:function(){return this.menu.element}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,(function(e){return s.test(e.label||e.value||e)}))}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click((function(i){e(i.target).closest(".ui-menu-item a").length&&(i.preventDefault(),t.select(i))})),this.refresh()},refresh:function(){var t=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter((function(i){t.activate(i,e(this).parent())})).mouseleave((function(){t.deactivate()}))},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var i=t.offset().top-this.element.offset().top,s=this.element.attr("scrollTop"),r=this.element.height();i<0?this.element.attr("scrollTop",s+i):i>=r&&this.element.attr("scrollTop",s+i-r+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,i){this.active&&(e=this.active[e+"All"](".ui-menu-item").eq(0)).length?this.activate(i,e):this.activate(i,this.element.children(t))},nextPage:function(t){if(this.hasScroll())if(!this.active||this.last())this.activate(t,this.element.children(".ui-menu-item:first"));else{var i=this.active.offset().top,s=this.element.height(),r=this.element.children(".ui-menu-item").filter((function(){var t=e(this).offset().top-i-s+e(this).height();return t<10&&t>-10}));r.length||(r=this.element.children(".ui-menu-item:last")),this.activate(t,r)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll())if(!this.active||this.first())this.activate(t,this.element.children(".ui-menu-item:last"));else{var i=this.active.offset().top,s=this.element.height();result=this.element.children(".ui-menu-item").filter((function(){var t=e(this).offset().top-i+s-e(this).height();return t<10&&t>-10})),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(t,result)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e){var t,i=function(t){e(":ui-button",t.target.form).each((function(){var t=e(this).data("button");setTimeout((function(){t.refresh()}),1)}))},s=function(t){var i=t.name,s=t.form,r=e([]);return i&&(r=s?e(s).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter((function(){return!this.form}))),r};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",i),"boolean"!=typeof this.options.disabled&&(this.options.disabled=this.element.attr("disabled")),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var r=this,n=this.options,o="checkbox"===this.type||"radio"===this.type,a="ui-state-hover"+(o?"":" ui-state-active");null===n.label&&(n.label=this.buttonElement.html()),this.element.is(":disabled")&&(n.disabled=!0),this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",(function(){n.disabled||(e(this).addClass("ui-state-hover"),this===t&&e(this).addClass("ui-state-active"))})).bind("mouseleave.button",(function(){n.disabled||e(this).removeClass(a)})).bind("focus.button",(function(){e(this).addClass("ui-state-focus")})).bind("blur.button",(function(){e(this).removeClass("ui-state-focus")})),o&&this.element.bind("change.button",(function(){r.refresh()})),"checkbox"===this.type?this.buttonElement.bind("click.button",(function(){if(n.disabled)return!1;e(this).toggleClass("ui-state-active"),r.buttonElement.attr("aria-pressed",r.element[0].checked)})):"radio"===this.type?this.buttonElement.bind("click.button",(function(){if(n.disabled)return!1;e(this).addClass("ui-state-active"),r.buttonElement.attr("aria-pressed",!0);var t=r.element[0];s(t).not(t).map((function(){return e(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed",!1)})):(this.buttonElement.bind("mousedown.button",(function(){if(n.disabled)return!1;e(this).addClass("ui-state-active"),t=this,e(document).one("mouseup",(function(){t=null}))})).bind("mouseup.button",(function(){if(n.disabled)return!1;e(this).removeClass("ui-state-active")})).bind("keydown.button",(function(t){if(n.disabled)return!1;t.keyCode!=e.ui.keyCode.SPACE&&t.keyCode!=e.ui.keyCode.ENTER||e(this).addClass("ui-state-active")})).bind("keyup.button",(function(){e(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()}))),this._setOption("disabled",n.disabled)},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var e=this.element.parents().filter(":last"),t="label[for="+this.element.attr("id")+"]";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(e=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",e)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"disabled"===t&&(i?this.element.attr("disabled",!0):this.element.removeAttr("disabled")),this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?s(this.element[0]).each((function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed",!0):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",!1)})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",!0):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",!1))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var t=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),i=e("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,r=s.primary&&s.secondary,n=[];s.primary||s.secondary?(this.options.text&&n.push("ui-button-text-icon"+(r?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(n.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",i))):n.push("ui-button-text-only"),t.addClass(n.join(" "))}}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,i){"disabled"===t&&this.buttons.button("option",t,i),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function(e,t){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},s={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},r=e.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,i=t.options,s=i.title||"&#160;",r=e.ui.dialog.getTitleId(t.element),n=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+i.dialogClass).css({zIndex:i.zIndex}).attr("tabIndex",-1).css("outline",0).keydown((function(s){i.closeOnEscape&&s.keyCode&&s.keyCode===e.ui.keyCode.ESCAPE&&(t.close(s),s.preventDefault())})).attr({role:"dialog","aria-labelledby":r}).mousedown((function(e){t.moveToTop(!1,e)}));t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(n);var o=(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(n),a=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover((function(){a.addClass("ui-state-hover")}),(function(){a.removeClass("ui-state-hover")})).focus((function(){a.addClass("ui-state-focus")})).blur((function(){a.removeClass("ui-state-focus")})).click((function(e){return t.close(e),!1})).appendTo(o);(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(i.closeText).appendTo(a),e("<span></span>").addClass("ui-dialog-title").attr("id",r).html(s).prependTo(o),e.isFunction(i.beforeclose)&&!e.isFunction(i.beforeClose)&&(i.beforeClose=i.beforeclose),o.find("*").add(o).disableSelection(),i.draggable&&e.fn.draggable&&t._makeDraggable(),i.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(i.buttons),t._isOpen=!1,e.fn.bgiframe&&n.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var i,s,r=this;if(!1!==r._trigger("beforeClose",t))return r.overlay&&r.overlay.destroy(),r.uiDialog.unbind("keypress.ui-dialog"),r._isOpen=!1,r.options.hide?r.uiDialog.hide(r.options.hide,(function(){r._trigger("close",t)})):(r.uiDialog.hide(),r._trigger("close",t)),e.ui.dialog.overlay.resize(),r.options.modal&&(i=0,e(".ui-dialog").each((function(){this!==r.uiDialog[0]&&(s=e(this).css("z-index"),isNaN(s)||(i=Math.max(i,s)))})),e.ui.dialog.maxZ=i),r},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var s=this,r=s.options;return r.modal&&!t||!r.stack&&!r.modal?s._trigger("focus",i):(r.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=r.zIndex),s.overlay&&(e.ui.dialog.maxZ+=1,s.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),t={scrollTop:s.element.attr("scrollTop"),scrollLeft:s.element.attr("scrollLeft")},e.ui.dialog.maxZ+=1,s.uiDialog.css("z-index",e.ui.dialog.maxZ),s.element.attr(t),s._trigger("focus",i),s)},open:function(){if(!this._isOpen){var t=this,i=t.options,s=t.uiDialog;return t.overlay=i.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(i.position),s.show(i.show),t.moveToTop(!0),i.modal&&s.bind("keypress.ui-dialog",(function(t){if(t.keyCode===e.ui.keyCode.TAB){var i=e(":tabbable",this),s=i.filter(":first");if(i=i.filter(":last"),t.target===i[0]&&!t.shiftKey)return s.focus(1),!1;if(t.target===s[0]&&t.shiftKey)return i.focus(1),!1}})),e(t.element.find(":tabbable").get().concat(s.find(".ui-dialog-buttonpane :tabbable").get().concat(s.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t}},_createButtons:function(t){var i=this,s=!1,n=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),o=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(n);i.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&e.each(t,(function(){return!(s=!0)})),s&&(e.each(t,(function(t,s){s=e.isFunction(s)?{click:s,text:t}:s;var n=e('<button type="button"></button>').click((function(){s.click.apply(i.element[0],arguments)})).appendTo(o);e.each(s,(function(e,t){"click"!==e&&(e in r?n[e](t):n.attr(e,t))})),e.fn.button&&n.button()})),n.appendTo(i.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i,s=this,r=s.options,n=e(document);s.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){i="auto"===r.height?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),s._trigger("dragStart",n,t(o))},drag:function(e,i){s._trigger("drag",e,t(i))},stop:function(o,a){r.position=[a.position.left-n.scrollLeft(),a.position.top-n.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(i),s._trigger("dragStop",o,t(a)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(t){function i(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}t=undefined===t?this.options.resizable:t;var s=this,r=s.options,n=s.uiDialog.css("position");t="string"==typeof t?t:"n,e,s,w,se,sw,ne,nw",s.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:s.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:s._minHeight(),handles:t,start:function(t,r){e(this).addClass("ui-dialog-resizing"),s._trigger("resizeStart",t,i(r))},resize:function(e,t){s._trigger("resize",e,i(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),r.height=e(this).height(),r.width=e(this).width(),s._trigger("resizeStop",t,i(n)),e.ui.dialog.overlay.resize()}}).css("position",n).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,s=[],r=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(1===(s=t.split?t.split(" "):[t[0],t[1]]).length&&(s[1]=s[0]),e.each(["left","top"],(function(e,t){+s[e]===s[e]&&(r[e]=s[e],s[e]=t)})),t={my:s.join(" "),at:s.join(" "),offset:r.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,(i=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()},_setOptions:function(t){var r=this,n={},o=!1;e.each(t,(function(e,t){r._setOption(e,t),e in i&&(o=!0),e in s&&(n[e]=t)})),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(t,i){var s=this,r=s.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":s._createButtons(i);break;case"closeText":s.uiDialogTitlebarCloseText.text(""+i);break;case"dialogClass":r.removeClass(s.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+i);break;case"disabled":i?r.addClass("ui-dialog-disabled"):r.removeClass("ui-dialog-disabled");break;case"draggable":var n=r.is(":data(draggable)");n&&!i&&r.draggable("destroy"),!n&&i&&s._makeDraggable();break;case"position":s._position(i);break;case"resizable":(n=r.is(":data(resizable)"))&&!i&&r.resizable("destroy"),n&&"string"==typeof i&&r.resizable("option","handles",i),!n&&!1!==i&&s._makeResizable(i);break;case"title":e(".ui-dialog-title",s.uiDialogTitlebar).html(""+(i||"&#160;"))}e.Widget.prototype._setOption.apply(s,arguments)},_size:function(){var t,i,s=this.options,r=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),s.minWidth>s.width&&(s.width=s.minWidth),t=this.uiDialog.css({height:"auto",width:s.width}).height(),i=Math.max(0,s.minHeight-t),"auto"===s.height?e.support.minHeight?this.element.css({minHeight:i,height:"auto"}):(this.uiDialog.show(),s=this.element.css("height","auto").height(),r||this.uiDialog.hide(),this.element.height(Math.max(s,i))):this.element.height(Math.max(s.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.12",uuid:0,maxZ:0,getTitleId:function(e){return(e=e.attr("id"))||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),(function(e){return e+".dialog-overlay"})).join(" "),create:function(t){0===this.instances.length&&(setTimeout((function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,(function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1}))}),1),e(document).bind("keydown.dialog-overlay",(function(i){t.options.closeOnEscape&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())})),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var i=e.inArray(t,this.instances);-1!=i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.remove();var s=0;e.each(this.instances,(function(){s=Math.max(s,this.css("z-index"))})),this.maxZ=s},height:function(){var t;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))<Math.max(document.documentElement.offsetHeight,document.body.offsetHeight)?e(window).height()+"px":t+"px":e(document).height()+"px"},width:function(){var t;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth))<Math.max(document.documentElement.offsetWidth,document.body.offsetWidth)?e(window).width()+"px":t+"px":e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,(function(){t=t.add(this)})),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,i=this.options;if(this._mouseSliding=this._keySliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),i.disabled&&this.element.addClass("ui-slider-disabled ui-disabled"),this.range=e([]),i.range&&(!0===i.range?(this.range=e("<div></div>"),i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])):this.range=e("<div></div>"),this.range.appendTo(this.element).addClass("ui-slider-range"),"min"!==i.range&&"max"!==i.range||this.range.addClass("ui-slider-range-"+i.range),this.range.addClass("ui-widget-header")),0===e(".ui-slider-handle",this.element).length&&e("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle"),i.values&&i.values.length)for(;e(".ui-slider-handle",this.element).length<i.values.length;)e("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=e(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all"),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click((function(e){e.preventDefault()})).hover((function(){i.disabled||e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})).focus((function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))})).blur((function(){e(this).removeClass("ui-state-focus")})),this.handles.each((function(t){e(this).data("index.ui-slider-handle",t)})),this.handles.keydown((function(i){var s,r,n,o=!0,a=e(this).data("index.ui-slider-handle");if(!t.options.disabled){switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o=!1,!t._keySliding&&(t._keySliding=!0,e(this).addClass("ui-state-active"),!1===(s=t._start(i,a))))return}switch(n=t.options.step,s=r=t.options.values&&t.options.values.length?t.values(a):t.value(),i.keyCode){case e.ui.keyCode.HOME:r=t._valueMin();break;case e.ui.keyCode.END:r=t._valueMax();break;case e.ui.keyCode.PAGE_UP:r=t._trimAlignValue(s+(t._valueMax()-t._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:r=t._trimAlignValue(s-(t._valueMax()-t._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===t._valueMax())return;r=t._trimAlignValue(s+n);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===t._valueMin())return;r=t._trimAlignValue(s-n)}return t._slide(i,a,r),o}})).keyup((function(i){var s=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(i,s),t._change(i,s),e(this).removeClass("ui-state-active"))})),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var i,s,r,n,o,a=this.options;return!a.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i=this._normValueFromMouse({x:t.pageX,y:t.pageY}),s=this._valueMax()-this._valueMin()+1,n=this,this.handles.each((function(t){var a=Math.abs(i-n.values(t));s>a&&(s=a,r=e(this),o=t)})),!0===a.range&&this.values(1)===a.min&&(o+=1,r=e(this.handles[o])),!1!==this._start(t,o)&&(this._mouseSliding=!0,n._handleIndex=o,r.addClass("ui-state-active").focus(),a=r.offset(),this._clickOffset=e(t.target).parents().andSelf().is(".ui-slider-handle")?{left:t.pageX-a.left-r.width()/2,top:t.pageY-a.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)}:{left:0,top:0},this.handles.hasClass("ui-state-hover")||this._slide(t,o,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t=this._normValueFromMouse({x:e.pageX,y:e.pageY});return this._slide(e,this._handleIndex,t),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._clickOffset=this._handleIndex=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t;return"horizontal"===this.orientation?(t=this.elementSize.width,e=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),(t=e/t)>1&&(t=1),t<0&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),this._trimAlignValue(this._valueMin()+t*e)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&i>s||1===t&&i<s)&&(i=s),i!==this.values(t)&&((s=this.values())[t]=i,e=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),this.values(t?0:1),!1!==e&&this.values(t,i,!0))):i!==this.value()&&!1!==(e=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i)},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){if(!arguments.length)return this._value();this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0)},values:function(t,i){var s,r,n;if(arguments.length>1)this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t);else{if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,r=arguments[0],n=0;n<s.length;n+=1)s[n]=this._trimAlignValue(r[n]),this._change(null,n);this._refreshValue()}},_setOption:function(t,i){var s,r=0;switch(e.isArray(this.options.values)&&(r=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled"),this.element.addClass("ui-disabled")):(this.handles.removeAttr("disabled"),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;s<r;s+=1)this._change(null,s);this._animateOff=!1}},_value:function(){var e=this.options.value;return this._trimAlignValue(e)},_values:function(e){var t,i;if(arguments.length)return t=this.options.values[e],this._trimAlignValue(t);for(t=this.options.values.slice(),i=0;i<t.length;i+=1)t[i]=this._trimAlignValue(t[i]);return t},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t;return alignValue=e-i,2*Math.abs(i)>=t&&(alignValue+=i>0?t:-t),parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,s,r,n,o=this.options.range,a=this.options,l=this,d=!this._animateOff&&a.animate,c={};this.options.values&&this.options.values.length?this.handles.each((function(s){t=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[d?"animate":"css"](c,a.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[d?"animate":"css"]({left:t+"%"},a.animate),1===s&&l.range[d?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:a.animate})):(0===s&&l.range.stop(1,1)[d?"animate":"css"]({bottom:t+"%"},a.animate),1===s&&l.range[d?"animate":"css"]({height:t-i+"%"},{queue:!1,duration:a.animate}))),i=t})):(s=this.value(),r=this._valueMin(),n=this._valueMax(),t=n!==r?(s-r)/(n-r)*100:0,c["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[d?"animate":"css"](c,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:t+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[d?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:t+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[d?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:a.animate}))}}),e.extend(e.ui.slider,{version:"1.8.12"})}(jQuery),function(e,i){function s(){return++n}var r=0,n=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){"selected"==e?this.options.collapsible&&t==this.options.selected||this.select(t):(this.options[e]=t,this._tabify())},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++r},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+s());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each((function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")}))},_tabify:function(t){function s(t,i){t.css("display",""),!e.support.opacity&&i.opacity&&t[0].style.removeAttribute("filter")}var r,n,o,a=this,l=this.options,d=/^#.+/;for(this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map((function(){return e("a",this)[0]})),this.panels=e([]),this.anchors.each((function(t,i){var s,r=e(i).attr("href"),n=r.split("#")[0];n&&(n===location.toString().split("#")[0]||(s=e("base")[0])&&n===s.href)&&(r=i.hash,i.href=r),d.test(r)?a.panels=a.panels.add(a.element.find(a._sanitizeSelector(r))):r&&"#"!==r?(e.data(i,"href.tabs",r),e.data(i,"load.tabs",r.replace(/#.*$/,"")),r=a._tabId(i),i.href="#"+r,(i=a.element.find("#"+r)).length||(i=e(l.panelTemplate).attr("id",r).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(a.panels[t-1]||a.list)).data("destroy.tabs",!0),a.panels=a.panels.add(i)):l.disabled.push(t)})),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),l.selected===i?(location.hash&&this.anchors.each((function(e,t){if(t.hash==location.hash)return l.selected=e,!1})),"number"!=typeof l.selected&&l.cookie&&(l.selected=parseInt(a._cookie(),10)),"number"!=typeof l.selected&&this.lis.filter(".ui-tabs-selected").length&&(l.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),l.selected=l.selected||(this.lis.length?0:-1)):null===l.selected&&(l.selected=-1),l.selected=l.selected>=0&&this.anchors[l.selected]||l.selected<0?l.selected:0,l.disabled=e.unique(l.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),(function(e){return a.lis.index(e)})))).sort(),-1!=e.inArray(l.selected,l.disabled)&&l.disabled.splice(e.inArray(l.selected,l.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),l.selected>=0&&this.anchors.length&&(a.element.find(a._sanitizeSelector(a.anchors[l.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(l.selected).addClass("ui-tabs-selected ui-state-active"),a.element.queue("tabs",(function(){a._trigger("show",null,a._ui(a.anchors[l.selected],a.element.find(a._sanitizeSelector(a.anchors[l.selected].hash))[0]))})),this.load(l.selected)),e(window).bind("unload",(function(){a.lis.add(a.anchors).unbind(".tabs"),a.lis=a.anchors=a.panels=null}))):l.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[l.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),l.cookie&&this._cookie(l.selected,l.cookie),t=0;r=this.lis[t];t++)e(r)[-1==e.inArray(t,l.disabled)||e(r).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(!1===l.cache&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==l.event){var c=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},h=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",(function(){c("hover",e(this))})),this.lis.bind("mouseout.tabs",(function(){h("hover",e(this))})),this.anchors.bind("focus.tabs",(function(){c("focus",e(this).closest("li"))})),this.anchors.bind("blur.tabs",(function(){h("focus",e(this).closest("li"))}))}l.fx&&(e.isArray(l.fx)?(n=l.fx[0],o=l.fx[1]):n=o=l.fx);var u=o?function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.hide().removeClass("ui-tabs-hide").animate(o,o.duration||"normal",(function(){s(i,o),a._trigger("show",null,a._ui(t,i[0]))}))}:function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.removeClass("ui-tabs-hide"),a._trigger("show",null,a._ui(t,i[0]))},p=n?function(e,t){t.animate(n,n.duration||"normal",(function(){a.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),s(t,n),a.element.dequeue("tabs")}))}:function(e,t){a.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),a.element.dequeue("tabs")};this.anchors.bind(l.event+".tabs",(function(){var t=this,i=e(t).closest("li"),s=a.panels.filter(":not(.ui-tabs-hide)"),r=a.element.find(a._sanitizeSelector(t.hash));if(i.hasClass("ui-tabs-selected")&&!l.collapsible||i.hasClass("ui-state-disabled")||i.hasClass("ui-state-processing")||a.panels.filter(":animated").length||!1===a._trigger("select",null,a._ui(this,r[0])))return this.blur(),!1;if(l.selected=a.anchors.index(this),a.abort(),l.collapsible){if(i.hasClass("ui-tabs-selected"))return l.selected=-1,l.cookie&&a._cookie(l.selected,l.cookie),a.element.queue("tabs",(function(){p(t,s)})).dequeue("tabs"),this.blur(),!1;if(!s.length)return l.cookie&&a._cookie(l.selected,l.cookie),a.element.queue("tabs",(function(){u(t,r)})),a.load(a.anchors.index(this)),this.blur(),!1}if(l.cookie&&a._cookie(l.selected,l.cookie),!r.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";s.length&&a.element.queue("tabs",(function(){p(t,s)})),a.element.queue("tabs",(function(){u(t,r)})),a.load(a.anchors.index(this)),e.browser.msie&&this.blur()})),this.anchors.bind("click.tabs",(function(){return!1}))},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$="+e+"]"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each((function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var i=e(this).unbind(".tabs");e.each(["href","load","cache"],(function(e,t){i.removeData(t+".tabs")}))})),this.lis.unbind(".tabs").add(this.panels).each((function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")})),t.cookie&&this._cookie(null,t.cookie),this},add:function(t,s,r){r===i&&(r=this.anchors.length);var n=this,o=this.options;s=e(o.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,s)),t=t.indexOf("#")?this._tabId(e("a",s)[0]):t.replace("#",""),s.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var a=n.element.find("#"+t);return a.length||(a=e(o.panelTemplate).attr("id",t).data("destroy.tabs",!0)),a.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),r>=this.lis.length?(s.appendTo(this.list),a.appendTo(this.list[0].parentNode)):(s.insertBefore(this.lis[r]),a.insertBefore(this.panels[r])),o.disabled=e.map(o.disabled,(function(e){return e>=r?++e:e})),this._tabify(),1==this.anchors.length&&(o.selected=0,s.addClass("ui-tabs-selected ui-state-active"),a.removeClass("ui-tabs-hide"),this.element.queue("tabs",(function(){n._trigger("show",null,n._ui(n.anchors[0],n.panels[0]))})),this.load(0)),this._trigger("add",null,this._ui(this.anchors[r],this.panels[r])),this},remove:function(t){t=this._getIndex(t);var i=this.options,s=this.lis.eq(t).remove(),r=this.panels.eq(t).remove();return s.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,(function(e){return e!=t})),(function(e){return e>=t?--e:e})),this._tabify(),this._trigger("remove",null,this._ui(s.find("a")[0],r[0])),this},enable:function(t){t=this._getIndex(t);var i=this.options;if(-1!=e.inArray(t,i.disabled))return this.lis.eq(t).removeClass("ui-state-disabled"),i.disabled=e.grep(i.disabled,(function(e){return e!=t})),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this.options;return e!=t.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),t.disabled.push(e),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){if(-1==(e=this._getIndex(e))){if(!this.options.collapsible||-1==this.options.selected)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var i=this,s=this.options,r=this.anchors.eq(t)[0],n=e.data(r,"load.tabs");if(this.abort(),n&&(0===this.element.queue("tabs").length||!e.data(r,"cache.tabs"))){if(this.lis.eq(t).addClass("ui-state-processing"),s.spinner){var o=e("span",r);o.data("label.tabs",o.html()).html(s.spinner)}return this.xhr=e.ajax(e.extend({},s.ajaxOptions,{url:n,success:function(n,o){i.element.find(i._sanitizeSelector(r.hash)).html(n),i._cleanup(),s.cache&&e.data(r,"cache.tabs",!0),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{s.ajaxOptions.success(n,o)}catch(e){}},error:function(e,n){i._cleanup(),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{s.ajaxOptions.error(e,n,t,r)}catch(e){}}})),i.element.dequeue("tabs"),this}this.element.dequeue("tabs")},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.12"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,i){var s=this,r=this.options,n=s._rotate||(s._rotate=function(t){clearTimeout(s.rotation),s.rotation=setTimeout((function(){var e=r.selected;s.select(++e<s.anchors.length?e:0)}),e),t&&t.stopPropagation()});return i=s._unrotate||(s._unrotate=i?function(){t=r.selected,n()}:function(e){e.clientX&&s.rotate(null)}),e?(this.element.bind("tabsshow",n),this.anchors.bind(r.event+".tabs",i),n()):(clearTimeout(s.rotation),this.element.unbind("tabsshow",n),this.anchors.unbind(r.event+".tabs",i),delete this._rotate,delete this._unrotate),this}})}(jQuery),function(d,A){function K(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._inDialog=this._datepickerShowing=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1},d.extend(this._defaults,this.regional[""]),this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}function F(e,t){for(var i in d.extend(e,t),t)null!=t[i]&&t[i]!=A||(e[i]=t[i]);return e}d.extend(d.ui,{datepicker:{version:"1.8.12"}});var y=(new Date).getTime();d.extend(K.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return F(this._defaults,e||{}),this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(t){c[e]=f}}}e=a.nodeName.toLowerCase(),f="div"==e||"span"==e,a.id||(this.uuid+=1,a.id="dp"+this.uuid);var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{}),"input"==e?this._connectDatepicker(a,i):f&&this._inlineDatepicker(a,i)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'):this.dpDiv}},_connectDatepicker:function(e,t){var i=d(e);t.append=d([]),t.trigger=d([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",(function(e,i,s){t.settings[i]=s})).bind("getData.datepicker",(function(e,i){return this._get(t,i)})),this._autoSize(t),d.data(e,"datepicker",t))},_attachments:function(e,t){var i=this._get(t,"appendText"),s=this._get(t,"isRTL");if(t.append&&t.append.remove(),i&&(t.append=d('<span class="'+this._appendClass+'">'+i+"</span>"),e[s?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!=(i=this._get(t,"showOn"))&&"both"!=i||e.focus(this._showDatepicker),"button"==i||"both"==i){i=this._get(t,"buttonText");var r=this._get(t,"buttonImage");t.trigger=d(this._get(t,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:r,alt:i,title:i}):d('<button type="button"></button>').addClass(this._triggerClass).html(""==r?i:d("<img/>").attr({src:r,alt:i,title:i}))),e[s?"before":"after"](t.trigger),t.trigger.click((function(){return d.datepicker._datepickerShowing&&d.datepicker._lastInput==e[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(e[0]),!1}))}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var s=function(e){for(var t=0,i=0,s=0;s<e.length;s++)e[s].length>t&&(t=e[s].length,i=s);return i};t.setMonth(s(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(s(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=d(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",(function(e,i,s){t.settings[i]=s})).bind("getData.datepicker",(function(e,i){return this._get(t,i)})),d.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.dpDiv.show())},_dialogDatepicker:function(e,t,i,s,r){return(e=this._dialogInst)||(this.uuid+=1,this._dialogInput=d('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),(e=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},d.data(this._dialogInput[0],"datepicker",e)),F(e.settings,s||{}),t=t&&t.constructor==Date?this._formatDate(e,t):t,this._dialogInput.val(t),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),e.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),d.blockUI&&d.blockUI(this.dpDiv),d.data(this._dialogInput[0],"datepicker",e),this},_destroyDatepicker:function(e){var t=d(e),i=d.data(e,"datepicker");if(t.hasClass(this.markerClassName)){var s=e.nodeName.toLowerCase();d.removeData(e,"datepicker"),"input"==s?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=s&&"span"!=s||t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=d(e),i=d.data(e,"datepicker");if(t.hasClass(this.markerClassName)){var s=e.nodeName.toLowerCase();"input"==s?(e.disabled=!1,i.trigger.filter("button").each((function(){this.disabled=!1})).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!=s&&"span"!=s||t.children("."+this._inlineClass).children().removeClass("ui-state-disabled"),this._disabledInputs=d.map(this._disabledInputs,(function(t){return t==e?null:t}))}},_disableDatepicker:function(e){var t=d(e),i=d.data(e,"datepicker");if(t.hasClass(this.markerClassName)){var s=e.nodeName.toLowerCase();"input"==s?(e.disabled=!0,i.trigger.filter("button").each((function(){this.disabled=!0})).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!=s&&"span"!=s||t.children("."+this._inlineClass).children().addClass("ui-state-disabled"),this._disabledInputs=d.map(this._disabledInputs,(function(t){return t==e?null:t})),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return d.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var s=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?d.extend({},d.datepicker._defaults):s?"all"==t?d.extend({},s.settings):this._get(s,t):null;var r=t||{};if("string"==typeof t&&((r={})[t]=i),s){this._curInst==s&&this._hideDatepicker();var n=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(s,"min"),a=this._getMinMaxDate(s,"max");F(s.settings,r),null!==o&&r.dateFormat!==A&&r.minDate===A&&(s.settings.minDate=this._formatDate(s,o)),null!==a&&r.dateFormat!==A&&r.maxDate===A&&(s.settings.maxDate=this._formatDate(s,a)),this._attachments(d(e),s),this._autoSize(s),this._setDateDatepicker(e,n),this._updateDatepicker(s)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){(e=this._getInst(e))&&this._updateDatepicker(e)},_setDateDatepicker:function(e,t){(e=this._getInst(e))&&(this._setDate(e,t),this._updateDatepicker(e),this._updateAlternate(e))},_getDateDatepicker:function(e,t){return(e=this._getInst(e))&&!e.inline&&this._setDateFromField(e,t),e?this._getDate(e):null},_doKeyDown:function(e){var t=d.datepicker._getInst(e.target),i=!0,s=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,d.datepicker._datepickerShowing)switch(e.keyCode){case 9:d.datepicker._hideDatepicker(),i=!1;break;case 13:return(i=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",t.dpDiv))[0]?d.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]):d.datepicker._hideDatepicker(),!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(e.target,e.ctrlKey?-d.datepicker._get(t,"stepBigMonths"):-d.datepicker._get(t,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(e.target,e.ctrlKey?+d.datepicker._get(t,"stepBigMonths"):+d.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&d.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&d.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&d.datepicker._adjustDate(e.target,s?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&d.datepicker._adjustDate(e.target,e.ctrlKey?-d.datepicker._get(t,"stepBigMonths"):-d.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&d.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&d.datepicker._adjustDate(e.target,s?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&d.datepicker._adjustDate(e.target,e.ctrlKey?+d.datepicker._get(t,"stepBigMonths"):+d.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&d.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?d.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=d.datepicker._getInst(e.target);if(d.datepicker._get(t,"constrainInput")){t=d.datepicker._possibleChars(d.datepicker._get(t,"dateFormat"));var i=String.fromCharCode(e.charCode==A?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||i<" "||!t||t.indexOf(i)>-1}},_doKeyUp:function(e){if((e=d.datepicker._getInst(e.target)).input.val()!=e.lastVal)try{d.datepicker.parseDate(d.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,d.datepicker._getFormatConfig(e))&&(d.datepicker._setDateFromField(e),d.datepicker._updateAlternate(e),d.datepicker._updateDatepicker(e))}catch(e){d.datepicker.log(e)}return!0},_showDatepicker:function(e){if("input"!=(e=e.target||e).nodeName.toLowerCase()&&(e=d("input",e.parentNode)[0]),!d.datepicker._isDisabledDatepicker(e)&&d.datepicker._lastInput!=e){var t=d.datepicker._getInst(e);d.datepicker._curInst&&d.datepicker._curInst!=t&&d.datepicker._curInst.dpDiv.stop(!0,!0);var i=d.datepicker._get(t,"beforeShow");F(t.settings,i?i.apply(e,[e,t]):{}),t.lastVal=null,d.datepicker._lastInput=e,d.datepicker._setDateFromField(t),d.datepicker._inDialog&&(e.value=""),d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(e),d.datepicker._pos[1]+=e.offsetHeight);var s=!1;if(d(e).parents().each((function(){return!(s|="fixed"==d(this).css("position"))})),s&&d.browser.opera&&(d.datepicker._pos[0]-=document.documentElement.scrollLeft,d.datepicker._pos[1]-=document.documentElement.scrollTop),i={left:d.datepicker._pos[0],top:d.datepicker._pos[1]},d.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),d.datepicker._updateDatepicker(t),i=d.datepicker._checkOffset(t,i,s),t.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":s?"fixed":"absolute",display:"none",left:i.left+"px",top:i.top+"px"}),!t.inline){i=d.datepicker._get(t,"showAnim");var r=d.datepicker._get(t,"duration"),n=function(){d.datepicker._datepickerShowing=!0;var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=d.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex(d(e).zIndex()+1),d.effects&&d.effects[i]?t.dpDiv.show(i,d.datepicker._get(t,"showOptions"),r,n):t.dpDiv[i||"show"](i?r:null,n),i&&r||n(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),d.datepicker._curInst=t}}},_updateDatepicker:function(e){var t=this,i=d.datepicker._getBorders(e.dpDiv);e.dpDiv.empty().append(this._generateHTML(e));var s=e.dpDiv.find("iframe.ui-datepicker-cover");if(s.length&&s.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",(function(){d(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&d(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&d(this).removeClass("ui-datepicker-next-hover")})).bind("mouseover",(function(){t._isDisabledDatepicker(e.inline?e.dpDiv.parent()[0]:e.input[0])||(d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&d(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&d(this).addClass("ui-datepicker-next-hover"))})).end().find("."+this._dayOverClass+" a").trigger("mouseover").end(),(s=(i=this._getNumberOfMonths(e))[1])>1?e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",17*s+"em"):e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e.dpDiv[(1!=i[0]||1!=i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==d.datepicker._curInst&&d.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var r=e.yearshtml;setTimeout((function(){r===e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),r=e.yearshtml=null}),0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var s=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),n=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+d(document).scrollLeft(),l=document.documentElement.clientHeight+d(document).scrollTop();return t.left-=this._get(e,"isRTL")?s-n:0,t.left-=i&&t.left==e.input.offset().left?d(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+o?d(document).scrollTop():0,t.left-=Math.min(t.left,t.left+s>a&&a>s?Math.abs(t.left+s-a):0),t.top-=Math.min(t.top,t.top+r>l&&l>r?Math.abs(r+o):0),t},_findPos:function(e){for(var t=this._get(this._getInst(e),"isRTL");e&&("hidden"==e.type||1!=e.nodeType||d.expr.filters.hidden(e));)e=e[t?"previousSibling":"nextSibling"];return[(e=d(e).offset()).left,e.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==d.data(e,"datepicker"))&&this._datepickerShowing){e=this._get(t,"showAnim");var i=this._get(t,"duration"),s=function(){d.datepicker._tidyDialog(t),this._curInst=null};d.effects&&d.effects[e]?t.dpDiv.hide(e,d.datepicker._get(t,"showOptions"),i,s):t.dpDiv["slideDown"==e?"slideUp":"fadeIn"==e?"fadeOut":"hide"](e?i:null,s),e||s(),(e=this._get(t,"onClose"))&&e.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._datepickerShowing=!1,this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){d.datepicker._curInst&&(e=d(e.target))[0].id!=d.datepicker._mainDivId&&0==e.parents("#"+d.datepicker._mainDivId).length&&!e.hasClass(d.datepicker.markerClassName)&&!e.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&(!d.datepicker._inDialog||!d.blockUI)&&d.datepicker._hideDatepicker()},_adjustDate:function(e,t,i){e=d(e);var s=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(s,t+("M"==i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(e){e=d(e);var t=this._getInst(e[0]);if(this._get(t,"gotoCurrent")&&t.currentDay)t.selectedDay=t.currentDay,t.drawMonth=t.selectedMonth=t.currentMonth,t.drawYear=t.selectedYear=t.currentYear;else{var i=new Date;t.selectedDay=i.getDate(),t.drawMonth=t.selectedMonth=i.getMonth(),t.drawYear=t.selectedYear=i.getFullYear()}this._notifyChange(t),this._adjustDate(e)},_selectMonthYear:function(e,t,i){e=d(e);var s=this._getInst(e[0]);s._selectingMonthYear=!1,s["selected"+("M"==i?"Month":"Year")]=s["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(e)},_clickMonthYear:function(e){var t=this._getInst(d(e)[0]);t.input&&t._selectingMonthYear&&setTimeout((function(){t.input.focus()}),0),t._selectingMonthYear=!t._selectingMonthYear},_selectDay:function(e,t,i,s){var r=d(e);d(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((r=this._getInst(r[0])).selectedDay=r.currentDay=d("a",s).html(),r.selectedMonth=r.currentMonth=t,r.selectedYear=r.currentYear=i,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){e=d(e),this._getInst(e[0]),this._selectDate(e,"")},_selectDate:function(e,t){e=this._getInst(d(e)[0]),t=null!=t?t:this._formatDate(e),e.input&&e.input.val(t),this._updateAlternate(e);var i=this._get(e,"onSelect");i?i.apply(e.input?e.input[0]:null,[t,e]):e.input&&e.input.trigger("change"),e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!=typeof e.input[0]&&e.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),s=this._getDate(e),r=this.formatDate(i,s,this._getFormatConfig(e));d(t).each((function(){d(this).val(r)}))}},noWeekends:function(e){return[(e=e.getDay())>0&&e<6,""]},iso8601Week:function(e){(e=new Date(e.getTime())).setDate(e.getDate()+4-(e.getDay()||7));var t=e.getTime();return e.setMonth(0),e.setDate(1),Math.floor(Math.round((t-e)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(""==(t="object"==typeof t?t.toString():t+""))return null;var s=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;s="string"!=typeof s?s:(new Date).getFullYear()%100+parseInt(s,10);for(var r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=i=-1,d=-1,c=-1,h=!1,u=function(t){return(t=v+1<e.length&&e.charAt(v+1)==t)&&v++,t},p=function(e){var i=u(e);if(e=new RegExp("^\\d{1,"+("@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2)+"}"),!(e=t.substring(m).match(e)))throw"Missing number at position "+m;return m+=e[0].length,parseInt(e[0],10)},f=function(e,i,s){for(e=u(e)?s:i,i=0;i<e.length;i++)if(t.substr(m,e[i].length).toLowerCase()==e[i].toLowerCase())return m+=e[i].length,i+1;throw"Unknown name at position "+m},g=function(){if(t.charAt(m)!=e.charAt(v))throw"Unexpected literal at position "+m;m++},m=0,v=0;v<e.length;v++)if(h)"'"!=e.charAt(v)||u("'")?g():h=!1;else switch(e.charAt(v)){case"d":d=p("d");break;case"D":f("D",r,n);break;case"o":c=p("o");break;case"m":l=p("m");break;case"M":l=f("M",o,a);break;case"y":i=p("y");break;case"@":var b=new Date(p("@"));i=b.getFullYear(),l=b.getMonth()+1,d=b.getDate();break;case"!":i=(b=new Date((p("!")-this._ticksTo1970)/1e4)).getFullYear(),l=b.getMonth()+1,d=b.getDate();break;case"'":u("'")?g():h=!0;break;default:g()}if(-1==i?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=s?0:-100)),c>-1)for(l=1,d=c;;){if(d<=(s=this._getDaysInMonth(i,l-1)))break;l++,d-=s}if((b=this._daylightSavingAdjust(new Date(i,l-1,d))).getFullYear()!=i||b.getMonth()+1!=l||b.getDate()!=d)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,r=(i?i.dayNames:null)||this._defaults.dayNames,n=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort;i=(i?i.monthNames:null)||this._defaults.monthNames;var o=function(t){return(t=h+1<e.length&&e.charAt(h+1)==t)&&h++,t},a=function(e,t,i){if(t=""+t,o(e))for(;t.length<i;)t="0"+t;return t},l=function(e,t,i,s){return o(e)?s[t]:i[t]},d="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)"'"!=e.charAt(h)||o("'")?d+=e.charAt(h):c=!1;else switch(e.charAt(h)){case"d":d+=a("d",t.getDate(),2);break;case"D":d+=l("D",t.getDay(),s,r);break;case"o":d+=a("o",(t.getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5,3);break;case"m":d+=a("m",t.getMonth()+1,2);break;case"M":d+=l("M",t.getMonth(),n,i);break;case"y":d+=o("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":o("'")?d+="'":c=!0;break;default:d+=e.charAt(h)}return d},_possibleChars:function(e){for(var t="",i=!1,s=function(t){return(t=r+1<e.length&&e.charAt(r+1)==t)&&r++,t},r=0;r<e.length;r++)if(i)"'"!=e.charAt(r)||s("'")?t+=e.charAt(r):i=!1;else switch(e.charAt(r)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":s("'")?t+="'":i=!0;break;default:t+=e.charAt(r)}return t},_get:function(e,t){return e.settings[t]!==A?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,s,r=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(r,n,o)||s}catch(e){this.log(e),n=t?"":n}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=n?i.getDate():0,e.currentMonth=n?i.getMonth():0,e.currentYear=n?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){return(t=(t=null==t||""===t?i:"string"==typeof t?function(t){try{return d.datepicker.parseDate(d.datepicker._get(e,"dateFormat"),t,d.datepicker._getFormatConfig(e))}catch(e){}var i=(t.toLowerCase().match(/^c/)?d.datepicker._getDate(e):null)||new Date,s=i.getFullYear(),r=i.getMonth();i=i.getDate();for(var n=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,o=n.exec(t);o;){switch(o[2]||"d"){case"d":case"D":i+=parseInt(o[1],10);break;case"w":case"W":i+=7*parseInt(o[1],10);break;case"m":case"M":r+=parseInt(o[1],10),i=Math.min(i,d.datepicker._getDaysInMonth(s,r));break;case"y":case"Y":s+=parseInt(o[1],10),i=Math.min(i,d.datepicker._getDaysInMonth(s,r))}o=n.exec(t)}return new Date(s,r,i)}(t):"number"==typeof t?isNaN(t)?i:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(t):new Date(t.getTime()))&&"Invalid Date"==t.toString()?i:t)&&(t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0)),this._daylightSavingAdjust(t)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,r=e.selectedMonth,n=e.selectedYear;t=this._restrictMinMax(e,this._determineDate(e,t,new Date)),e.selectedDay=e.currentDay=t.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=t.getMonth(),e.drawYear=e.selectedYear=e.currentYear=t.getFullYear(),r==e.selectedMonth&&n==e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),s=this._get(e,"showButtonPanel"),r=this._get(e,"hideIfNoPrevNext"),n=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),a=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=o[0]||1!=o[1],h=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(e,"min"),p=this._getMinMaxDate(e,"max");a=e.drawMonth-a;var f=e.drawYear;if(a<0&&(a+=12,f--),p){var g=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-o[0]*o[1]+1,p.getDate()));for(g=u&&g<u?u:g;this._daylightSavingAdjust(new Date(f,a,1))>g;)--a<0&&(a=11,f--)}e.drawMonth=a,e.drawYear=f,g=this._get(e,"prevText"),g=n?this.formatDate(g,this._daylightSavingAdjust(new Date(f,a-l,1)),this._getFormatConfig(e)):g,g=this._canAdjustMonth(e,-1,f,a)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+e.id+"', -"+l+", 'M');\" title=\""+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>":r?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+g+"</span></a>";var m=this._get(e,"nextText");m=n?this.formatDate(m,this._daylightSavingAdjust(new Date(f,a+l,1)),this._getFormatConfig(e)):m,r=this._canAdjustMonth(e,1,f,a)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+e.id+"', +"+l+", 'M');\" title=\""+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+m+"</span></a>":r?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+m+"</span></a>",l=this._get(e,"currentText"),m=this._get(e,"gotoCurrent")&&e.currentDay?h:t,l=n?this.formatDate(l,m,this._getFormatConfig(e)):l,n=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(e,"closeText")+"</button>",s=s?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?n:"")+(this._isInRange(e,m)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+e.id+"');\">"+l+"</button>":"")+(i?"":n)+"</div>":"",n=parseInt(this._get(e,"firstDay"),10),n=isNaN(n)?0:n,l=this._get(e,"showWeek"),m=this._get(e,"dayNames"),this._get(e,"dayNamesShort");var v=this._get(e,"dayNamesMin"),b=this._get(e,"monthNames"),w=this._get(e,"monthNamesShort"),_=this._get(e,"beforeShowDay"),x=this._get(e,"showOtherMonths"),C=this._get(e,"selectOtherMonths");this._get(e,"calculateWeek");for(var k=this._getDefaultDate(e),D="",j=0;j<o[0];j++){for(var S="",M=0;M<o[1];M++){var A=this._daylightSavingAdjust(new Date(f,a,e.selectedDay)),T=" ui-corner-all",F="";if(c){if(F+='<div class="ui-datepicker-group',o[1]>1)switch(M){case 0:F+=" ui-datepicker-group-first",T=" ui-corner-"+(i?"right":"left");break;case o[1]-1:F+=" ui-datepicker-group-last",T=" ui-corner-"+(i?"left":"right");break;default:F+=" ui-datepicker-group-middle",T=""}F+='">'}F+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+T+'">'+(/all|left/.test(T)&&0==j?i?r:g:"")+(/all|right/.test(T)&&0==j?i?g:r:"")+this._generateMonthYearHeader(e,a,f,u,p,j>0||M>0,b,w)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var O=l?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(T=0;T<7;T++){var I=(T+n)%7;O+="<th"+((T+n+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+m[I]+'">'+v[I]+"</span></th>"}F+=O+"</tr></thead><tbody>",O=this._getDaysInMonth(f,a),f==e.selectedYear&&a==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),T=(this._getFirstDayOfMonth(f,a)-n+7)%7,O=c?6:Math.ceil((T+O)/7),I=this._daylightSavingAdjust(new Date(f,a,1-T));for(var P=0;P<O;P++){F+="<tr>";var E=l?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(I)+"</td>":"";for(T=0;T<7;T++){var q=_?_.apply(e.input?e.input[0]:null,[I]):[!0,""],N=I.getMonth()!=a,R=N&&!C||!q[0]||u&&I<u||p&&I>p;E+='<td class="'+((T+n+6)%7>=5?" ui-datepicker-week-end":"")+(N?" ui-datepicker-other-month":"")+(I.getTime()==A.getTime()&&a==e.selectedMonth&&e._keyEvent||k.getTime()==I.getTime()&&k.getTime()==A.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(N&&!x?"":" "+q[1]+(I.getTime()==h.getTime()?" "+this._currentClass:"")+(I.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(N&&!x||!q[2]?"":' title="'+q[2]+'"')+(R?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+e.id+"',"+I.getMonth()+","+I.getFullYear()+', this);return false;"')+">"+(N&&!x?"&#xa0;":R?'<span class="ui-state-default">'+I.getDate()+"</span>":'<a class="ui-state-default'+(I.getTime()==t.getTime()?" ui-state-highlight":"")+(I.getTime()==h.getTime()?" ui-state-active":"")+(N?" ui-priority-secondary":"")+'" href="#">'+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I)}F+=E+"</tr>"}++a>11&&(a=0,f++),S+=F+="</tbody></table>"+(c?"</div>"+(o[0]>0&&M==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"")}D+=S}return D+=s+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,D},_generateMonthYearHeader:function(e,t,i,s,r,n,o,a){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),h=this._get(e,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',p="";if(n||!l)p+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{o=s&&s.getFullYear()==i;var f=r&&r.getFullYear()==i;p+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+e.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+e.id+"');\">";for(var g=0;g<12;g++)(!o||g>=s.getMonth())&&(!f||g<=r.getMonth())&&(p+='<option value="'+g+'"'+(g==t?' selected="selected"':"")+">"+a[g]+"</option>");p+="</select>"}if(h||(u+=p+(!n&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!c)u+='<span class="ui-datepicker-year">'+i+"</span>";else{a=this._get(e,"yearRange").split(":");var m=(new Date).getFullYear();for(t=(o=function(e){return e=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?m+parseInt(e,10):parseInt(e,10),isNaN(e)?m:e})(a[0]),a=Math.max(t,o(a[1]||"")),t=s?Math.max(t,s.getFullYear()):t,a=r?Math.min(a,r.getFullYear()):a,e.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+e.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+e.id+"');\">";t<=a;t++)e.yearshtml+='<option value="'+t+'"'+(t==i?' selected="selected"':"")+">"+t+"</option>";e.yearshtml+="</select>",d.browser.mozilla?u+='<select class="ui-datepicker-year"><option value="'+i+'" selected="selected">'+i+"</option></select>":(u+=e.yearshtml,e.yearshtml=null)}return u+=this._get(e,"yearSuffix"),h&&(u+=(!n&&l&&c?"":"&#xa0;")+p),u+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"==i?t:0),r=e.drawMonth+("M"==i?t:0);t=Math.min(e.selectedDay,this._getDaysInMonth(s,r))+("D"==i?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,r,t))),e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),"M"!=i&&"Y"!=i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min");return t=i&&t<i?i:t,(e=this._getMinMaxDate(e,"max"))&&t>e?e:t},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){return null==(e=this._get(e,"numberOfMonths"))?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var r=this._getNumberOfMonths(e);return i=this._daylightSavingAdjust(new Date(i,s+(t<0?t:r[0]*r[1]),1)),t<0&&i.setDate(this._getDaysInMonth(i.getFullYear(),i.getMonth())),this._isInRange(e,i)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min");return e=this._getMinMaxDate(e,"max"),(!i||t.getTime()>=i.getTime())&&(!e||t.getTime()<=e.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){return t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear),t=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay)),this.formatDate(this._get(e,"dateFormat"),t,this._getFormatConfig(e))}}),d.fn.datepicker=function(e){if(!this.length)return this;d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv),d.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+e+"Datepicker"].apply(d.datepicker,[this[0]].concat(t)):this.each((function(){"string"==typeof e?d.datepicker["_"+e+"Datepicker"].apply(d.datepicker,[this].concat(t)):d.datepicker._attachDatepicker(this,e)})):d.datepicker["_"+e+"Datepicker"].apply(d.datepicker,[this[0]].concat(t))},d.datepicker=new K,d.datepicker.initialized=!1,d.datepicker.uuid=(new Date).getTime(),d.datepicker.version="1.8.12",window["DP_jQuery_"+y]=d}(jQuery),function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return undefined===e?this._value():(this._setOption("value",e),this)},_setOption:function(t,i){"value"===t&&(this.options.value=i,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.12"})}(jQuery),jQuery.effects||function(e,t){function i(t){var i;return t&&t.constructor==Array&&3==t.length?t:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(t)?a.transparent:a[e.trim(t).toLowerCase()]}function s(){var e,t=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,i={};if(t&&t.length&&t[0]&&t[t[0]])for(var s=t.length;s--;)"string"==typeof t[e=t[s]]&&(i[e.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()}))]=t[e]);else for(e in t)"string"==typeof t[e]&&(i[e]=t[e]);return i}function r(t){var i,s;for(i in t)(null==(s=t[i])||e.isFunction(s)||i in d||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(s)))&&delete t[i];return t}function n(t,i,s,r){return"object"==typeof t&&(r=i,s=null,t=(i=t).effect),e.isFunction(i)&&(r=i,s=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(r=s,s=i,i={}),e.isFunction(s)&&(r=s,s=null),i=i||{},s=s||i.duration,[t,i,s=e.fx.off?0:"number"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,r=r||i.complete]}function o(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects[t]}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],(function(t,s){e.fx.step[s]=function(t){t.colorInit||(t.start=function(t,s){var r;do{if(""!=(r=e.curCSS(t,s))&&"transparent"!=r||e.nodeName(t,"body"))break;s="backgroundColor"}while(t=t.parentNode);return i(r)}(t.elem,s),t.end=i(t.end),t.colorInit=!0),t.elem.style[s]="rgb("+Math.max(Math.min(parseInt(t.pos*(t.end[0]-t.start[0])+t.start[0],10),255),0)+","+Math.max(Math.min(parseInt(t.pos*(t.end[1]-t.start[1])+t.start[1],10),255),0)+","+Math.max(Math.min(parseInt(t.pos*(t.end[2]-t.start[2])+t.start[2],10),255),0)+")"}}));var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},l=["add","remove","toggle"],d={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,i,n,o){return e.isFunction(n)&&(o=n,n=null),this.queue("fx",(function(){var a,d=e(this),c=d.attr("style")||" ",h=r(s.call(this)),u=d.attr("className");e.each(l,(function(e,i){t[i]&&d[i+"Class"](t[i])})),a=r(s.call(this)),d.attr("className",u),d.animate(function(e,t){var i,s={_:0};for(i in t)e[i]!=t[i]&&(s[i]=t[i]);return s}(h,a),i,n,(function(){e.each(l,(function(e,i){t[i]&&d[i+"Class"](t[i])})),"object"==typeof d.attr("style")?(d.attr("style").cssText="",d.attr("style").cssText=c):d.attr("style",c),o&&o.apply(this,arguments)})),a=(h=e.queue(this)).splice(h.length-1,1)[0],h.splice(1,0,a),e.dequeue(this)}))},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,s,r){return i?e.effects.animateClass.apply(this,[{add:t},i,s,r]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,s,r){return i?e.effects.animateClass.apply(this,[{remove:t},i,s,r]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,s,r,n,o){return"boolean"==typeof s||s===t?r?e.effects.animateClass.apply(this,[s?{add:i}:{remove:i},r,n,o]):this._toggleClass(i,s):e.effects.animateClass.apply(this,[{toggle:i},s,r,n])},switchClass:function(t,i,s,r,n){return e.effects.animateClass.apply(this,[{add:i,remove:t},s,r,n])}}),e.extend(e.effects,{version:"1.8.12",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data("ec.storage."+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.css(t[i],e.data("ec.storage."+t[i]))},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":e=0;break;case"center":e=.5;break;case"right":e=1;break;default:e=e[1]/t.width}return{x:e,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},s=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});return t.wrap(s),s=t.parent(),"static"==t.css("position")?(s.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],(function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")})),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),s.css(i).show()},removeWrapper:function(e){return e.parent().is(".ui-effects-wrapper")?e.parent().replaceWith(e):e},setTransition:function(t,i,s,r){return r=r||{},e.each(i,(function(e,i){unit=t.cssUnit(i),unit[0]>0&&(r[i]=unit[0]*s+unit[1])})),r}}),e.fn.extend({effect:function(t){var i=n.apply(this,arguments),s={options:i[1],duration:i[2],callback:i[3]};i=s.options.mode;var r=e.effects[t];return e.fx.off||!r?i?this[i](s.duration,s.callback):this.each((function(){s.callback&&s.callback.call(this)})):r.call(this,s)},_show:e.fn.show,show:function(e){if(o(e))return this._show.apply(this,arguments);var t=n.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(o(e))return this._hide.apply(this,arguments);var t=n.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(o(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=n.apply(this,arguments);return i[1].mode="toggle",this.effect.apply(this,i)},cssUnit:function(t){var i=this.css(t),s=[];return e.each(["em","px","%","pt"],(function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])})),s}}),e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,i,s,r,n){return e.easing[e.easing.def](t,i,s,r,n)},easeInQuad:function(e,t,i,s,r){return s*(t/=r)*t+i},easeOutQuad:function(e,t,i,s,r){return-s*(t/=r)*(t-2)+i},easeInOutQuad:function(e,t,i,s,r){return(t/=r/2)<1?s/2*t*t+i:-s/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,s,r){return s*(t/=r)*t*t+i},easeOutCubic:function(e,t,i,s,r){return s*((t=t/r-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,s,r){return(t/=r/2)<1?s/2*t*t*t+i:s/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,s,r){return s*(t/=r)*t*t*t+i},easeOutQuart:function(e,t,i,s,r){return-s*((t=t/r-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,s,r){return(t/=r/2)<1?s/2*t*t*t*t+i:-s/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,s,r){return s*(t/=r)*t*t*t*t+i},easeOutQuint:function(e,t,i,s,r){return s*((t=t/r-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,s,r){return(t/=r/2)<1?s/2*t*t*t*t*t+i:s/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,s,r){return-s*Math.cos(t/r*(Math.PI/2))+s+i},easeOutSine:function(e,t,i,s,r){return s*Math.sin(t/r*(Math.PI/2))+i},easeInOutSine:function(e,t,i,s,r){return-s/2*(Math.cos(Math.PI*t/r)-1)+i},easeInExpo:function(e,t,i,s,r){return 0==t?i:s*Math.pow(2,10*(t/r-1))+i},easeOutExpo:function(e,t,i,s,r){return t==r?i+s:s*(1-Math.pow(2,-10*t/r))+i},easeInOutExpo:function(e,t,i,s,r){return 0==t?i:t==r?i+s:(t/=r/2)<1?s/2*Math.pow(2,10*(t-1))+i:s/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(e,t,i,s,r){return-s*(Math.sqrt(1-(t/=r)*t)-1)+i},easeOutCirc:function(e,t,i,s,r){return s*Math.sqrt(1-(t=t/r-1)*t)+i},easeInOutCirc:function(e,t,i,s,r){return(t/=r/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+i:s/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,s,r){e=1.70158;var n=0,o=s;return 0==t?i:1==(t/=r)?i+s:(n||(n=.3*r),o<Math.abs(s)?(o=s,e=n/4):e=n/(2*Math.PI)*Math.asin(s/o),-o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*r-e)*Math.PI/n)+i)},easeOutElastic:function(e,t,i,s,r){e=1.70158;var n=0,o=s;return 0==t?i:1==(t/=r)?i+s:(n||(n=.3*r),o<Math.abs(s)?(o=s,e=n/4):e=n/(2*Math.PI)*Math.asin(s/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*r-e)*Math.PI/n)+s+i)},easeInOutElastic:function(e,t,i,s,r){e=1.70158;var n=0,o=s;return 0==t?i:2==(t/=r/2)?i+s:(n||(n=.3*r*1.5),o<Math.abs(s)?(o=s,e=n/4):e=n/(2*Math.PI)*Math.asin(s/o),t<1?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*r-e)*Math.PI/n)+i:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*r-e)*Math.PI/n)*.5+s+i)},easeInBack:function(e,i,s,r,n,o){return o==t&&(o=1.70158),r*(i/=n)*i*((o+1)*i-o)+s},easeOutBack:function(e,i,s,r,n,o){return o==t&&(o=1.70158),r*((i=i/n-1)*i*((o+1)*i+o)+1)+s},easeInOutBack:function(e,i,s,r,n,o){return o==t&&(o=1.70158),(i/=n/2)<1?r/2*i*i*((1+(o*=1.525))*i-o)+s:r/2*((i-=2)*i*((1+(o*=1.525))*i+o)+2)+s},easeInBounce:function(t,i,s,r,n){return r-e.easing.easeOutBounce(t,n-i,0,r,n)+s},easeOutBounce:function(e,t,i,s,r){return(t/=r)<1/2.75?7.5625*s*t*t+i:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+i:s*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(t,i,s,r,n){return i<n/2?.5*e.easing.easeInBounce(t,2*i,0,r,n)+s:.5*e.easing.easeOutBounce(t,2*i-n,0,r,n)+.5*r+s}})}(jQuery),function(e){e.effects.blind=function(t){return this.queue((function(){var i=e(this),s=["position","top","bottom","left","right"],r=e.effects.setMode(i,t.options.mode||"hide"),n=t.options.direction||"vertical";e.effects.save(i,s),i.show();var o=e.effects.createWrapper(i).css({overflow:"hidden"}),a="vertical"==n?"height":"width";n="vertical"==n?o.height():o.width(),"show"==r&&o.css(a,0);var l={};l[a]="show"==r?n:0,o.animate(l,t.duration,t.options.easing,(function(){"hide"==r&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()}))}))}}(jQuery),function(e){e.effects.bounce=function(t){return this.queue((function(){var i=e(this),s=["position","top","bottom","left","right"],r=e.effects.setMode(i,t.options.mode||"effect"),n=t.options.direction||"up",o=t.options.distance||20,a=t.options.times||5,l=t.duration||250;/show|hide/.test(r)&&s.push("opacity"),e.effects.save(i,s),i.show(),e.effects.createWrapper(i);var d="up"==n||"down"==n?"top":"left";if(n="up"==n||"left"==n?"pos":"neg",o=t.options.distance||("top"==d?i.outerHeight({margin:!0})/3:i.outerWidth({margin:!0})/3),"show"==r&&i.css("opacity",0).css(d,"pos"==n?-o:o),"hide"==r&&(o/=2*a),"hide"!=r&&a--,"show"==r){var c={opacity:1};c[d]=("pos"==n?"+=":"-=")+o,i.animate(c,l/2,t.options.easing),o/=2,a--}for(c=0;c<a;c++){var h={},u={};h[d]=("pos"==n?"-=":"+=")+o,u[d]=("pos"==n?"+=":"-=")+o,i.animate(h,l/2,t.options.easing).animate(u,l/2,t.options.easing),o="hide"==r?2*o:o/2}"hide"==r?((c={opacity:0})[d]=("pos"==n?"-=":"+=")+o,i.animate(c,l/2,t.options.easing,(function(){i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)}))):(u={},(h={})[d]=("pos"==n?"-=":"+=")+o,u[d]=("pos"==n?"+=":"-=")+o,i.animate(h,l/2,t.options.easing).animate(u,l/2,t.options.easing,(function(){e.effects.restore(i,s),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)}))),i.queue("fx",(function(){i.dequeue()})),i.dequeue()}))}}(jQuery),function(e){e.effects.clip=function(t){return this.queue((function(){var i=e(this),s=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(i,t.options.mode||"hide"),n=t.options.direction||"vertical";e.effects.save(i,s),i.show();var o=e.effects.createWrapper(i).css({overflow:"hidden"});o="IMG"==i[0].tagName?o:i;var a={size:"vertical"==n?"height":"width",position:"vertical"==n?"top":"left"};n="vertical"==n?o.height():o.width(),"show"==r&&(o.css(a.size,0),o.css(a.position,n/2));var l={};l[a.size]="show"==r?n:0,l[a.position]="show"==r?0:n/2,o.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()}})}))}}(jQuery),function(e){e.effects.drop=function(t){return this.queue((function(){var i=e(this),s=["position","top","bottom","left","right","opacity"],r=e.effects.setMode(i,t.options.mode||"hide"),n=t.options.direction||"left";e.effects.save(i,s),i.show(),e.effects.createWrapper(i);var o="up"==n||"down"==n?"top":"left";n="up"==n||"left"==n?"pos":"neg";var a=t.options.distance||("top"==o?i.outerHeight({margin:!0})/2:i.outerWidth({margin:!0})/2);"show"==r&&i.css("opacity",0).css(o,"pos"==n?-a:a);var l={opacity:"show"==r?1:0};l[o]=("show"==r?"pos"==n?"+=":"-=":"pos"==n?"-=":"+=")+a,i.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})}))}}(jQuery),function(e){e.effects.explode=function(t){return this.queue((function(){var i=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,s=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode="toggle"==t.options.mode?e(this).is(":visible")?"hide":"show":t.options.mode;var r=e(this).show().css("visibility","hidden"),n=r.offset();n.top-=parseInt(r.css("marginTop"),10)||0,n.left-=parseInt(r.css("marginLeft"),10)||0;for(var o=r.outerWidth(!0),a=r.outerHeight(!0),l=0;l<i;l++)for(var d=0;d<s;d++)r.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:o/s*-d,top:a/i*-l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:o/s,height:a/i,left:n.left+d*(o/s)+("show"==t.options.mode?(d-Math.floor(s/2))*(o/s):0),top:n.top+l*(a/i)+("show"==t.options.mode?(l-Math.floor(i/2))*(a/i):0),opacity:"show"==t.options.mode?0:1}).animate({left:n.left+d*(o/s)+("show"==t.options.mode?0:(d-Math.floor(s/2))*(o/s)),top:n.top+l*(a/i)+("show"==t.options.mode?0:(l-Math.floor(i/2))*(a/i)),opacity:"show"==t.options.mode?1:0},t.duration||500);setTimeout((function(){"show"==t.options.mode?r.css({visibility:"visible"}):r.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(r[0]),r.dequeue(),e("div.ui-effects-explode").remove()}),t.duration||500)}))}}(jQuery),function(e){e.effects.fade=function(t){return this.queue((function(){var i=e(this),s=e.effects.setMode(i,t.options.mode||"hide");i.animate({opacity:s},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),i.dequeue()}})}))}}(jQuery),function(e){e.effects.fold=function(t){return this.queue((function(){var i=e(this),s=["position","top","bottom","left","right"],r=e.effects.setMode(i,t.options.mode||"hide"),n=t.options.size||15,o=!!t.options.horizFirst,a=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(i,s),i.show();var l=e.effects.createWrapper(i).css({overflow:"hidden"}),d="show"==r!=o,c=d?["width","height"]:["height","width"];d=d?[l.width(),l.height()]:[l.height(),l.width()];var h=/([0-9]+)%/.exec(n);h&&(n=parseInt(h[1],10)/100*d["hide"==r?0:1]),"show"==r&&l.css(o?{height:0,width:n}:{height:n,width:0}),h={},(o={})[c[0]]="show"==r?d[0]:n,h[c[1]]="show"==r?d[1]:0,l.animate(o,a,t.options.easing).animate(h,a,t.options.easing,(function(){"hide"==r&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()}))}))}}(jQuery),function(e){e.effects.highlight=function(t){return this.queue((function(){var i=e(this),s=["backgroundImage","backgroundColor","opacity"],r=e.effects.setMode(i,t.options.mode||"show"),n={backgroundColor:i.css("backgroundColor")};"hide"==r&&(n.opacity=0),e.effects.save(i,s),i.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(n,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&i.hide(),e.effects.restore(i,s),"show"==r&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})}))}}(jQuery),function(e){e.effects.pulsate=function(t){return this.queue((function(){var i=e(this),s=e.effects.setMode(i,t.options.mode||"show");for(times=2*(t.options.times||5)-1,duration=t.duration?t.duration/2:e.fx.speeds._default/2,isVisible=i.is(":visible"),animateTo=0,isVisible||(i.css("opacity",0).show(),animateTo=1),("hide"==s&&isVisible||"show"==s&&!isVisible)&&times--,s=0;s<times;s++)i.animate({opacity:animateTo},duration,t.options.easing),animateTo=(animateTo+1)%2;i.animate({opacity:animateTo},duration,t.options.easing,(function(){0==animateTo&&i.hide(),t.callback&&t.callback.apply(this,arguments)})),i.queue("fx",(function(){i.dequeue()})).dequeue()}))}}(jQuery),function(e){e.effects.puff=function(t){return this.queue((function(){var i=e(this),s=e.effects.setMode(i,t.options.mode||"hide"),r=parseInt(t.options.percent,10)||150,n=r/100,o={height:i.height(),width:i.width()};e.extend(t.options,{fade:!0,mode:s,percent:"hide"==s?r:100,from:"hide"==s?o:{height:o.height*n,width:o.width*n}}),i.effect("scale",t.options,t.duration,t.callback),i.dequeue()}))},e.effects.scale=function(t){return this.queue((function(){var i=e(this),s=e.extend(!0,{},t.options),r=e.effects.setMode(i,t.options.mode||"effect"),n=parseInt(t.options.percent,10)||(0==parseInt(t.options.percent,10)||"hide"==r?0:100),o=t.options.direction||"both",a=t.options.origin;"effect"!=r&&(s.origin=a||["middle","center"],s.restore=!0),a={height:i.height(),width:i.width()},i.from=t.options.from||("show"==r?{height:0,width:0}:a),n={y:"horizontal"!=o?n/100:1,x:"vertical"!=o?n/100:1},i.to={height:a.height*n.y,width:a.width*n.x},t.options.fade&&("show"==r&&(i.from.opacity=0,i.to.opacity=1),"hide"==r&&(i.from.opacity=1,i.to.opacity=0)),s.from=i.from,s.to=i.to,s.mode=r,i.effect("size",s,t.duration,t.callback),i.dequeue()}))},e.effects.size=function(t){return this.queue((function(){var i=e(this),s=["position","top","bottom","left","right","width","height","overflow","opacity"],r=["position","top","bottom","left","right","overflow","opacity"],n=["width","height","overflow"],o=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],d=e.effects.setMode(i,t.options.mode||"effect"),c=t.options.restore||!1,h=t.options.scale||"both",u=t.options.origin,p={height:i.height(),width:i.width()};i.from=t.options.from||p,i.to=t.options.to||p,u&&(u=e.effects.getBaseline(u,p),i.from.top=(p.height-i.from.height)*u.y,i.from.left=(p.width-i.from.width)*u.x,i.to.top=(p.height-i.to.height)*u.y,i.to.left=(p.width-i.to.width)*u.x);var f={from:{y:i.from.height/p.height,x:i.from.width/p.width},to:{y:i.to.height/p.height,x:i.to.width/p.width}};"box"!=h&&"both"!=h||(f.from.y!=f.to.y&&(s=s.concat(a),i.from=e.effects.setTransition(i,a,f.from.y,i.from),i.to=e.effects.setTransition(i,a,f.to.y,i.to)),f.from.x!=f.to.x&&(s=s.concat(l),i.from=e.effects.setTransition(i,l,f.from.x,i.from),i.to=e.effects.setTransition(i,l,f.to.x,i.to))),"content"!=h&&"both"!=h||f.from.y!=f.to.y&&(s=s.concat(o),i.from=e.effects.setTransition(i,o,f.from.y,i.from),i.to=e.effects.setTransition(i,o,f.to.y,i.to)),e.effects.save(i,c?s:r),i.show(),e.effects.createWrapper(i),i.css("overflow","hidden").css(i.from),"content"!=h&&"both"!=h||(a=a.concat(["marginTop","marginBottom"]).concat(o),l=l.concat(["marginLeft","marginRight"]),n=s.concat(a).concat(l),i.find("*[width]").each((function(){child=e(this),c&&e.effects.save(child,n);var i=child.height(),s=child.width();child.from={height:i*f.from.y,width:s*f.from.x},child.to={height:i*f.to.y,width:s*f.to.x},f.from.y!=f.to.y&&(child.from=e.effects.setTransition(child,a,f.from.y,child.from),child.to=e.effects.setTransition(child,a,f.to.y,child.to)),f.from.x!=f.to.x&&(child.from=e.effects.setTransition(child,l,f.from.x,child.from),child.to=e.effects.setTransition(child,l,f.to.x,child.to)),child.css(child.from),child.animate(child.to,t.duration,t.options.easing,(function(){c&&e.effects.restore(child,n)}))}))),i.animate(i.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){0===i.to.opacity&&i.css("opacity",i.from.opacity),"hide"==d&&i.hide(),e.effects.restore(i,c?s:r),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})}))}}(jQuery),function(e){e.effects.shake=function(t){return this.queue((function(){var i=e(this),s=["position","top","bottom","left","right"];e.effects.setMode(i,t.options.mode||"effect");var r=t.options.direction||"left",n=t.options.distance||20,o=t.options.times||3,a=t.duration||t.options.duration||140;e.effects.save(i,s),i.show(),e.effects.createWrapper(i);var l="up"==r||"down"==r?"top":"left",d="up"==r||"left"==r?"pos":"neg",c={},h={};for((r={})[l]=("pos"==d?"-=":"+=")+n,c[l]=("pos"==d?"+=":"-=")+2*n,h[l]=("pos"==d?"-=":"+=")+2*n,i.animate(r,a,t.options.easing),n=1;n<o;n++)i.animate(c,a,t.options.easing).animate(h,a,t.options.easing);i.animate(c,a,t.options.easing).animate(r,a/2,t.options.easing,(function(){e.effects.restore(i,s),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})),i.queue("fx",(function(){i.dequeue()})),i.dequeue()}))}}(jQuery),function(e){e.effects.slide=function(t){return this.queue((function(){var i=e(this),s=["position","top","bottom","left","right"],r=e.effects.setMode(i,t.options.mode||"show"),n=t.options.direction||"left";e.effects.save(i,s),i.show(),e.effects.createWrapper(i).css({overflow:"hidden"});var o="up"==n||"down"==n?"top":"left";n="up"==n||"left"==n?"pos":"neg";var a=t.options.distance||("top"==o?i.outerHeight({margin:!0}):i.outerWidth({margin:!0}));"show"==r&&i.css(o,"pos"==n?isNaN(a)?"-"+a:-a:a);var l={};l[o]=("show"==r?"pos"==n?"+=":"-=":"pos"==n?"-=":"+=")+a,i.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==r&&i.hide(),e.effects.restore(i,s),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})}))}}(jQuery),function(e){e.effects.transfer=function(t){return this.queue((function(){var i=e(this),s=e(t.options.to),r=s.offset();s={top:r.top,left:r.left,height:s.innerHeight(),width:s.innerWidth()},r=i.offset();var n=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:r.top,left:r.left,height:i.innerHeight(),width:i.innerWidth(),position:"absolute"}).animate(s,t.duration,t.options.easing,(function(){n.remove(),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()}))}))}}(jQuery),function(e){e.widget("ui.selectmenu",{getter:"value",version:"1.8",eventPrefix:"selectmenu",options:{transferClasses:!0,typeAhead:"sequential",style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,bgImage:function(){},wrapperElement:""},_create:function(){var t=this,i=this.options,s=this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10);this.ids=[s+"-button",s+"-menu"],this._safemouseup=!0,e.browser.msie&&(i.typeAhead=""),this.newelement=e('<a class="'+this.widgetBaseClass+' ui-widget ui-state-default ui-corner-all" id="'+this.ids[0]+'" role="button" href="#" tabindex="0" aria-haspopup="true" aria-owns="'+this.ids[1]+'"></a>').insertAfter(this.element),this.newelement.wrap(i.wrapperElement);var r=this.element.attr("tabindex");r&&this.newelement.attr("tabindex",r),this.newelement.data("selectelement",this.element),this.selectmenuIcon=e('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement),this.newelement.prepend('<span class="'+t.widgetBaseClass+'-status" />'),e('label[for="'+this.element.attr("id")+'"]').attr("for",this.ids[0]).bind("click.selectmenu",(function(){return t.newelement[0].focus(),!1})),this.newelement.bind("mousedown.selectmenu",(function(e){return t._toggle(e,!0),"popup"==i.style&&(t._safemouseup=!1,setTimeout((function(){t._safemouseup=!0}),300)),!1})).bind("click.selectmenu",(function(){return!1})).bind("keydown.selectmenu",(function(i){var s=!1;switch(i.keyCode){case e.ui.keyCode.ENTER:s=!0;break;case e.ui.keyCode.SPACE:t._toggle(i);break;case e.ui.keyCode.UP:i.altKey?t.open(i):t._moveSelection(-1);break;case e.ui.keyCode.DOWN:i.altKey?t.open(i):t._moveSelection(1);break;case e.ui.keyCode.LEFT:t._moveSelection(-1);break;case e.ui.keyCode.RIGHT:t._moveSelection(1);break;case e.ui.keyCode.TAB:s=!0;break;default:s=!0,t._typeAhead(i.keyCode,"mouseup")}return s})).bind("mouseover.selectmenu focus.selectmenu",(function(){i.disabled||e(this).addClass(t.widgetBaseClass+"-focus ui-state-hover")})).bind("mouseout.selectmenu blur.selectmenu",(function(){i.disabled||e(this).removeClass(t.widgetBaseClass+"-focus ui-state-hover")})),e(document).bind("mousedown.selectmenu",(function(e){t.close(e)})),this.element.bind("click.selectmenu",(function(){t._refreshValue()})).bind("focus.selectmenu",(function(){t.newelement&&t.newelement[0].focus()}));var n=this.element.width();this.newelement.width(i.width?i.width:n),this.element.hide(),this.list=e('<ul class="'+t.widgetBaseClass+'-menu ui-widget ui-widget-content" aria-hidden="true" role="listbox" aria-labelledby="'+this.ids[0]+'" id="'+this.ids[1]+'"></ul>').appendTo("body"),this.list.wrap(i.wrapperElement),this.list.bind("keydown.selectmenu",(function(i){var s=!1;switch(i.keyCode){case e.ui.keyCode.UP:i.altKey?t.close(i,!0):t._moveFocus(-1);break;case e.ui.keyCode.DOWN:i.altKey?t.close(i,!0):t._moveFocus(1);break;case e.ui.keyCode.LEFT:t._moveFocus(-1);break;case e.ui.keyCode.RIGHT:t._moveFocus(1);break;case e.ui.keyCode.HOME:t._moveFocus(":first");break;case e.ui.keyCode.PAGE_UP:t._scrollPage("up");break;case e.ui.keyCode.PAGE_DOWN:t._scrollPage("down");break;case e.ui.keyCode.END:t._moveFocus(":last");break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:t.close(i,!0),e(i.target).parents("li:eq(0)").trigger("mouseup");break;case e.ui.keyCode.TAB:s=!0,t.close(i,!0),e(i.target).parents("li:eq(0)").trigger("mouseup");break;case e.ui.keyCode.ESCAPE:t.close(i,!0);break;default:s=!0,t._typeAhead(i.keyCode,"focus")}return s})),e(window).bind("resize.selectmenu",e.proxy(t._refreshPosition,this))},_init:function(){var t=this,i=this.options,s=[];this.element.find("option").each((function(){s.push({value:e(this).attr("value"),text:t._formatText(e(this).text()),selected:e(this).attr("selected"),disabled:e(this).attr("disabled"),classes:e(this).attr("class"),typeahead:e(this).attr("typeahead"),parentOptGroup:e(this).parent("optgroup"),bgImage:i.bgImage.call(e(this))})}));var r="popup"==t.options.style?" ui-state-active":"";this.list.html("");for(var n=0;n<s.length;n++){var o=e('<li role="presentation"'+(s[n].disabled?' class="'+this.namespace+'-state-disabled"':"")+'><a href="#" tabindex="-1" role="option"'+(s[n].disabled?' aria-disabled="true"':"")+' aria-selected="false"'+(s[n].typeahead?' typeahead="'+s[n].typeahead+'"':"")+">"+s[n].text+"</a></li>").data("index",n).addClass(s[n].classes).data("optionClasses",s[n].classes||"").bind("mouseup.selectmenu",(function(i){if(t._safemouseup&&!t._disabled(i.currentTarget)&&!t._disabled(e(i.currentTarget).parents("ul>li."+t.widgetBaseClass+"-group "))){var s=e(this).data("index")!=t._selectedIndex();t.index(e(this).data("index")),t.select(i),s&&t.change(i),t.close(i,!0)}return!1})).bind("click.selectmenu",(function(){return!1})).bind("mouseover.selectmenu focus.selectmenu",(function(i){e(i.currentTarget).hasClass(t.namespace+"-state-disabled")||(t._selectedOptionLi().addClass(r),t._focusedOptionLi().removeClass(t.widgetBaseClass+"-item-focus ui-state-hover"),e(this).removeClass("ui-state-active").addClass(t.widgetBaseClass+"-item-focus ui-state-hover"))})).bind("mouseout.selectmenu blur.selectmenu",(function(){e(this).is(t._selectedOptionLi().selector)&&e(this).addClass(r),e(this).removeClass(t.widgetBaseClass+"-item-focus ui-state-hover")}));if(s[n].parentOptGroup.length){var a=t.widgetBaseClass+"-group-"+this.element.find("optgroup").index(s[n].parentOptGroup);this.list.find("li."+a).length?this.list.find("li."+a+":last ul").append(o):e(' <li role="presentation" class="'+t.widgetBaseClass+"-group "+a+(s[n].parentOptGroup.attr("disabled")?" "+this.namespace+'-state-disabled" aria-disabled="true"':'"')+'><span class="'+t.widgetBaseClass+'-group-label">'+s[n].parentOptGroup.attr("label")+"</span><ul></ul></li> ").appendTo(this.list).find("ul").append(o)}else o.appendTo(this.list);if(this.list.bind("mousedown.selectmenu mouseup.selectmenu",(function(){return!1})),i.icons)for(var l in i.icons)if(o.is(i.icons[l].find)){o.data("optionClasses",s[n].classes+" "+t.widgetBaseClass+"-hasIcon").addClass(t.widgetBaseClass+"-hasIcon");var d=i.icons[l].icon||"";o.find("a:eq(0)").prepend('<span class="'+t.widgetBaseClass+"-item-icon ui-icon "+d+'"></span>'),s[n].bgImage&&o.find("span").css("background-image",s[n].bgImage)}}var c="dropdown"==i.style;if(this.newelement.toggleClass(t.widgetBaseClass+"-dropdown",c).toggleClass(t.widgetBaseClass+"-popup",!c),this.list.toggleClass(t.widgetBaseClass+"-menu-dropdown ui-corner-bottom",c).toggleClass(t.widgetBaseClass+"-menu-popup ui-corner-all",!c).find("li:first").toggleClass("ui-corner-top",!c).end().find("li:last").addClass("ui-corner-bottom"),this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s",c).toggleClass("ui-icon-triangle-2-n-s",!c),i.transferClasses){var h=this.element.attr("class")||"";this.newelement.add(this.list).addClass(h)}var u=this.element.width();"dropdown"==i.style?this.list.width(i.menuWidth?i.menuWidth:i.width?i.width:u):this.list.width(i.menuWidth?i.menuWidth:i.width?i.width-i.handleWidth:u-i.handleWidth),i.maxHeight?i.maxHeight<this.list.height()&&this.list.height(i.maxHeight):!i.format&&e(window).height()/3<this.list.height()&&(i.maxHeight=e(window).height()/3,this.list.height(i.maxHeight)),this._optionLis=this.list.find("li:not(."+t.widgetBaseClass+"-group)"),!0===this.element.attr("disabled")&&this.disable(),this.index(this._selectedIndex()),window.setTimeout((function(){t._refreshPosition()}),200)},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu"),e(window).unbind(".selectmenu"),e(document).unbind(".selectmenu"),e("label[for="+this.newelement.attr("id")+"]").attr("for",this.element.attr("id")).unbind(".selectmenu"),this.options.wrapperElement?(this.newelement.find(this.options.wrapperElement).remove(),this.list.find(this.options.wrapperElement).remove()):(this.newelement.remove(),this.list.remove()),this.element.show(),e.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(t,i){var s=this,r=!1,n=String.fromCharCode(t);if(c=n.toLowerCase(),"sequential"==s.options.typeAhead){window.clearTimeout("ui.selectmenu-"+s.selectmenuId);var o=void 0===s._prevChar?"":s._prevChar.join("");function a(t,n,o){r=!0,e(t).trigger(i),void 0===s._prevChar?s._prevChar=[o]:s._prevChar[s._prevChar.length]=o}this.list.find("li a").each((function(t){if(!r){var i=e(this).attr("typeahead")||e(this).text();0==i.indexOf(o+n)?a(this,0,n):0==i.indexOf(o+c)&&a(this,0,c)}})),window.setTimeout((function(e){e._prevChar=void 0}),1e3,s)}else{s._prevChar||(s._prevChar=["",0]);r=!1;function l(t,n){r=!0,e(t).trigger(i),s._prevChar[1]=n}this.list.find("li a").each((function(t){if(!r){var i=e(this).text();0!=i.indexOf(n)&&0!=i.indexOf(c)||(s._prevChar[0]==n?s._prevChar[1]<t&&l(this,t):l(this,t))}})),this._prevChar[0]=n}},_uiHash:function(){var t=this.index();return{index:t,option:e("option",this.element).get(t),value:this.element[0].value}},open:function(e){var t=this;"true"!=this.newelement.attr("aria-disabled")&&(this._closeOthers(e),this.newelement.addClass("ui-state-active"),t.options.wrapperElement?this.list.parent().appendTo("body"):this.list.appendTo("body"),this.list.addClass(t.widgetBaseClass+"-open").attr("aria-hidden",!1),this._refreshPosition(),this.list.find("li:not(."+t.widgetBaseClass+"-group):eq("+this._selectedIndex()+") a")[0].focus(),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"),this._trigger("open",e,this._uiHash()))},close:function(e,t){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.list.attr("aria-hidden",!0).removeClass(this.widgetBaseClass+"-open"),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),t&&this.newelement.focus(),this._trigger("close",e,this._uiHash()))},change:function(e){this.element.trigger("change"),this._trigger("change",e,this._uiHash())},select:function(e){this._trigger("select",e,this._uiHash())},_closeOthers:function(t){e("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each((function(){e(this).data("selectelement").selectmenu("close",t)})),e("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(e,t){this.list.is("."+this.widgetBaseClass+"-open")?this.close(e,t):this.open(e)},_formatText:function(e){return this.options.format?this.options.format(e):e},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(e){var t=parseInt(this._selectedOptionLi().data("index"),10)+e;if(t>=0)return this._optionLis.eq(t).trigger("mouseup")},_moveFocus:function(e){if(isNaN(e))t=parseInt(this._optionLis.filter(e).data("index"),10);else var t=parseInt(this._focusedOptionLi().data("index")||0,10)+e;t<0&&(t=0),t>this._optionLis.size()-1&&(t=this._optionLis.size()-1);var i=this.widgetBaseClass+"-item-"+Math.round(1e3*Math.random());this._focusedOptionLi().find("a:eq(0)").attr("id",""),this._optionLis.eq(t).hasClass(this.namespace+"-state-disabled")?(e>0?e++:e--,this._moveFocus(e,t)):this._optionLis.eq(t).find("a:eq(0)").attr("id",i).focus(),this.list.attr("aria-activedescendant",i)},_scrollPage:function(e){var t=Math.floor(this.list.outerHeight()/this.list.find("li:first").outerHeight());t="up"==e?-t:t,this._moveFocus(t)},_setOption:function(e,t){this.options[e]=t,"disabled"==e&&(this.close(),this.element.add(this.newelement).add(this.list)[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",t))},disable:function(e,t){void 0===e?this._setOption("disabled",!0):"optgroup"==t?this._disableOptgroup(e):this._disableOption(e)},enable:function(e,t){void 0===e?this._setOption("disabled",!1):"optgroup"==t?this._enableOptgroup(e):this._enableOption(e)},_disabled:function(t){return e(t).hasClass(this.namespace+"-state-disabled")},_disableOption:function(e){var t=this._optionLis.eq(e);t&&(t.addClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!0),this.element.find("option").eq(e).attr("disabled","disabled"))},_enableOption:function(e){var t=this._optionLis.eq(e);t&&(t.removeClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!1),this.element.find("option").eq(e).removeAttr("disabled"))},_disableOptgroup:function(e){var t=this.list.find("li."+this.widgetBaseClass+"-group-"+e);t&&(t.addClass(this.namespace+"-state-disabled").attr("aria-disabled",!0),this.element.find("optgroup").eq(e).attr("disabled","disabled"))},_enableOptgroup:function(e){var t=this.list.find("li."+this.widgetBaseClass+"-group-"+e);t&&(t.removeClass(this.namespace+"-state-disabled").attr("aria-disabled",!1),this.element.find("optgroup").eq(e).removeAttr("disabled"))},index:function(t){return arguments.length?!this._disabled(e(this._optionLis[t]))&&(this.element[0].selectedIndex=t,void this._refreshValue()):this._selectedIndex()},value:function(e){if(!arguments.length)return this.element[0].value;this.element[0].value=e,this._refreshValue()},_refreshValue:function(){var e="popup"==this.options.style?" ui-state-active":"",t=this.widgetBaseClass+"-item-"+Math.round(1e3*Math.random());this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+e).find("a").attr("aria-selected","false").attr("id",""),this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+e).find("a").attr("aria-selected","true").attr("id",t);var i=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"",s=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(i).data("optionClasses",s).addClass(s).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html()),this.list.attr("aria-activedescendant",t)},_refreshPosition:function(){var e=this.options;if("popup"==e.style&&!e.positionOptions.offset)var t=this._selectedOptionLi(),i="0 -"+(t.outerHeight()+t.offset().top-this.list.offset().top);this.list.css({zIndex:this.element.zIndex()}).position({of:e.positionOptions.of||this.newelement,my:e.positionOptions.my,at:e.positionOptions.at,offset:e.positionOptions.offset||i})}})}(jQuery),function(){var e;(e=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,s,r,n,o;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),o=[],s=0,r=(n=e.childNodes).length;s<r;s++)i=n[s],o.push(this.add_option(i,t,e.disabled));return o},e.prototype.add_option=function(e,t,i){if("OPTION"===e.nodeName)return""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:!0===i?i:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e}()).select_to_array=function(t){var i,s,r,n,o;for(s=new e,r=0,n=(o=t.childNodes).length;r<n;r++)i=o[r],s.add_node(i);return s.parsed},this.SelectParser=e}.call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e,t){this.form_field=e,this.options=null!=t?t:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.default_text_default=this.is_multiple?"Select Some Options":"Select an Option",this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return e.prototype.set_default_values=function(){return this.click_test_action=t((function(e){return this.test_active_click(e)}),this),this.activate_action=t((function(e){return this.activate_field(e)}),this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.choices=0,this.results_none_found=this.options.no_results_text||"No results match"},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(e){if(!this.active_field)return setTimeout(t((function(){return this.container_mousedown()}),this),50)},e.prototype.input_blur=function(e){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(t((function(){return this.blur_test()}),this),100)},e.prototype.result_add_option=function(e){var t,i;return e.disabled?"":(e.dom_id=this.container_id+"_o_"+e.array_index,t=e.selected&&this.is_multiple?[]:["active-result"],e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),i=""!==e.style.cssText?' style="'+e.style+'"':"",'<li id="'+e.dom_id+'" class="'+t.join(" ")+'"'+i+">"+e.html+"</li>")},e.prototype.results_update_field=function(){return this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},e.prototype.generate_random_char=function(){var e,t;return e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ",t=Math.floor(Math.random()*e.length),e.substring(t,t+1)},e}(),this.AbstractChosen=e}.call(this),function(){var e,t,i,s,r=Object.prototype.hasOwnProperty,n=function(e,t){return function(){return e.apply(t,arguments)}};s=this,(e=jQuery).fn.extend({chosen:function(i){return!e.browser.msie||"6.0"!==e.browser.version&&"7.0"!==e.browser.version?e(this).each((function(s){if(!e(this).hasClass("chzn-done"))return new t(this,i)})):this}}),t=function(){function t(){t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var i in t)r.call(t,i)&&(e[i]=t[i]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(t,AbstractChosen),t.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},t.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},t.prototype.set_up_html=function(){var t,s,r,n;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/(:|\.)/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),this.default_text=this.form_field_jq.data("placeholder")?this.form_field_jq.data("placeholder"):this.default_text_default,t=e("<div />",{id:this.container_id,class:"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?t.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):t.html('<a href="javascript:void(0)" class="chzn-single"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(t),this.container=e("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),s=this.container.height(),r=this.f_width-i(this.dropdown),this.dropdown.css({width:r+"px",top:s+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),n=r-i(this.search_container)-i(this.search_field),this.search_field.css({width:n+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},t.prototype.register_observers=function(){return this.container.mousedown(n((function(e){return this.container_mousedown(e)}),this)),this.container.mouseup(n((function(e){return this.container_mouseup(e)}),this)),this.container.mouseenter(n((function(e){return this.mouse_enter(e)}),this)),this.container.mouseleave(n((function(e){return this.mouse_leave(e)}),this)),this.search_results.mouseup(n((function(e){return this.search_results_mouseup(e)}),this)),this.search_results.mouseover(n((function(e){return this.search_results_mouseover(e)}),this)),this.search_results.mouseout(n((function(e){return this.search_results_mouseout(e)}),this)),this.form_field_jq.bind("liszt:updated",n((function(e){return this.results_update_field(e)}),this)),this.search_field.blur(n((function(e){return this.input_blur(e)}),this)),this.search_field.keyup(n((function(e){return this.keyup_checker(e)}),this)),this.search_field.keydown(n((function(e){return this.keydown_checker(e)}),this)),this.is_multiple?(this.search_choices.click(n((function(e){return this.choices_click(e)}),this)),this.search_field.focus(n((function(e){return this.input_focus(e)}),this))):this.container.click(n((function(e){return e.preventDefault()}),this))},t.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},t.prototype.container_mousedown=function(t){var i;if(!this.is_disabled)return i=null!=t&&e(t.target).hasClass("search-choice-close"),t&&"mousedown"===t.type&&t.stopPropagation(),this.pending_destroy_click||i?this.pending_destroy_click=!1:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chzn-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field())},t.prototype.container_mouseup=function(e){if("ABBR"===e.target.nodeName)return this.results_reset(e)},t.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},t.prototype.close_field=function(){return e(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},t.prototype.activate_field=function(){return this.is_multiple||this.active_field||(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},t.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},t.prototype.results_build=function(){var e,t,i,r,n;for(this.parsing=!0,this.results_data=s.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),e="",i=0,r=(n=this.results_data).length;i<r;i++)(t=n[i]).group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&(this.selected_item.find("span").text(t.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},t.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.container_id+"_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},t.prototype.result_do_highlight=function(e){var t,i,s,r,n;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=(s=parseInt(this.search_results.css("maxHeight"),10))+(n=this.search_results.scrollTop()),(t=(i=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=r)return this.search_results.scrollTop(t-s>0?t-s:0);if(i<n)return this.search_results.scrollTop(i)}},t.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},t.prototype.results_show=function(){var e;return this.is_multiple||(this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected)),e=this.is_multiple?this.container.height():this.container.height()-1,this.dropdown.css({top:e+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},t.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},t.prototype.set_tab_index=function(e){var t;if(this.form_field_jq.attr("tabindex"))return t=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",t):(this.selected_item.attr("tabindex",t),this.search_field.attr("tabindex",-1))},t.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},t.prototype.search_results_mouseup=function(t){var i;if((i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first()).length)return this.result_highlight=i,this.result_select(t)},t.prototype.search_results_mouseover=function(t){var i;if(i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first())return this.result_do_highlight(i)},t.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},t.prototype.choices_click=function(t){if(t.preventDefault(),this.active_field&&!e(t.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},t.prototype.choice_build=function(t){var i;return i=this.container_id+"_c_"+t.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+i+'"><span>'+t.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"></a></li>'),e("#"+i).find("a").first().click(n((function(e){return this.choice_destroy_link_click(e)}),this))},t.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),this.is_disabled?t.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(e(t.target)))},t.prototype.choice_destroy=function(e){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(e.attr("rel")),e.parents("li").first().remove()},t.prototype.results_reset=function(t){if(this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.show_search_field_default(),e(t.target).remove(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},t.prototype.result_select=function(e){var t,i,s,r;if(this.result_highlight)return i=(t=this.result_highlight).attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(t):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=t),t.addClass("result-selected"),r=i.substr(i.lastIndexOf("_")+1),(s=this.results_data[r]).selected=!0,this.form_field.options[s.options_index].selected=!0,this.is_multiple?this.choice_build(s):(this.selected_item.find("span").first().text(s.text),this.allow_single_deselect&&this.single_deselect_control_build()),e.metaKey&&this.is_multiple||this.results_hide(),this.search_field.val(""),this.form_field_jq.trigger("change"),this.search_field_scale()},t.prototype.result_activate=function(e){return e.addClass("active-result")},t.prototype.result_deactivate=function(e){return e.removeClass("active-result")},t.prototype.result_deselect=function(t){var i;return(i=this.results_data[t]).selected=!1,this.form_field.options[i.options_index].selected=!1,e("#"+this.container_id+"_o_"+t).removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change"),this.search_field_scale()},t.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},t.prototype.winnow_results=function(){var t,i,s,r,n,o,a,l,d,c,h,u,p,f,g,m,v;for(this.no_results_clear(),l=0,d=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html(),n=new RegExp("^"+d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),u=new RegExp(d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),p=0,g=(v=this.results_data).length;p<g;p++)if(!(i=v[p]).disabled&&!i.empty)if(i.group)e("#"+i.dom_id).css("display","none");else if(!this.is_multiple||!i.selected){if(t=!1,a=i.dom_id,o=e("#"+a),n.test(i.html))t=!0,l+=1;else if((i.html.indexOf(" ")>=0||0===i.html.indexOf("["))&&(r=i.html.replace(/\[|\]/g,"").split(" ")).length)for(f=0,m=r.length;f<m;f++)s=r[f],n.test(s)&&(t=!0,l+=1);t?(d.length?(c=i.html.search(u),h=(h=i.html.substr(0,c+d.length)+"</em>"+i.html.substr(c+d.length)).substr(0,c)+"<em>"+h.substr(c)):h=i.html,o.html(h),this.result_activate(o),null!=i.group_array_index&&e("#"+this.results_data[i.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&a===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(o))}return l<1&&d.length?this.no_results(d):this.winnow_results_set_highlight()},t.prototype.winnow_results_clear=function(){var t,i,s,r,n;for(this.search_field.val(""),n=[],s=0,r=(i=this.search_results.find("li")).length;s<r;s++)t=i[s],t=e(t),n.push(t.hasClass("group-result")?t.css("display","auto"):this.is_multiple&&t.hasClass("result-selected")?void 0:this.result_activate(t));return n},t.prototype.winnow_results_set_highlight=function(){var e,t;if(!this.result_highlight&&null!=(e=(t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?t.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(e)},t.prototype.no_results=function(t){var i;return(i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(t),this.search_results.append(i)},t.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},t.prototype.keydown_arrow=function(){var t,i;if(this.result_highlight?this.results_showing&&(i=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(i):(t=this.search_results.find("li.active-result").first())&&this.result_do_highlight(e(t)),!this.results_showing)return this.results_show()},t.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},t.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.pending_backstroke.addClass("search-choice-focus"))},t.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},t.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},t.prototype.search_field_scale=function(){var t,i,s,r,n,o,a,l;if(this.is_multiple){for(0,o=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",a=0,l=(n=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;a<l;a++)r+=(s=n[a])+":"+this.search_field.css(s)+";";return(i=e("<div />",{style:r})).text(this.search_field.val()),e("body").append(i),o=i.width()+25,i.remove(),o>this.f_width-10&&(o=this.f_width-10),this.search_field.css({width:o+"px"}),t=this.container.height(),this.dropdown.css({top:t+"px"})}},t.prototype.generate_random_id=function(){var t;for(t="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();e("#"+t).length>0;)t+=this.generate_random_char();return t},t}(),i=function(e){return e.outerWidth()-e.width()},s.get_side_border_padding=i}.call(this),function(e){if(e.fn.simpledraw=function(t,i,s){return s&&this[0].vcanvas?this[0].vcanvas:(null==t&&(t=e(this).innerWidth()),null==i&&(i=e(this).innerHeight()),e.browser.hasCanvas?new r(t,i,this):!!e.browser.msie&&new n(t,i,this))},e.fn.sparkline=function(t,i){i=e.extend({type:"line",lineColor:"#00f",fillColor:"#cdf",defaultPixelsPerValue:3,width:"auto",height:"auto",composite:!1},i||{});return this.each((function(){var s="html"==t||null==t?e(this).text().split(","):t,r="auto"==i.width?s.length*i.defaultPixelsPerValue:i.width;if("auto"==i.height){var n=document.createElement("span");n.innerHTML="a",e(this).append(n),height=e(n).innerHeight(),e(n).remove()}else height=i.height;e.fn.sparkline[i.type].call(this,s,i,r,height)}))},e.fn.sparkline.line=function(t,i,s,r){i=e.extend({spotColor:"#f80",spotRadius:1.5,minSpotColor:"#f80",maxSpotColor:"#f80",normalRangeMin:void 0,normalRangeMax:void 0,normalRangeColor:"#ccc",chartRangeMin:void 0,chartRangeMax:void 0},i||{});var n=[],o=[];for(j=0;j<t.length;j++){var a="string"==typeof t[j],l="object"==typeof t[j]&&t[j]instanceof Array,d=a&&t[j].split(":");a&&2==d.length?(n.push(Number(d[0])),o.push(Number(d[1]))):l?(n.push(t[j][0]),o.push(t[j][1])):(n.push(j),o.push(Number(t[j])))}i.xvalues&&(n=i.xvalues);var c=Math.max.apply(Math,o),h=c,u=Math.min.apply(Math,o),p=u,f=Math.max.apply(Math,n),g=Math.min.apply(Math,n);null!=i.normalRangeMin&&(i.normalRangeMin<u&&(u=i.normalRangeMin),i.normalRangeMax>c&&(c=i.normalRangeMax)),null!=i.chartRangeMin&&i.chartRangeMin<u&&(u=i.chartRangeMin),null!=i.chartRangeMax&&i.chartRangeMax>c&&(c=i.chartRangeMax);var m=f-g==0?1:f-g,v=c-u==0?1:c-u,b=o.length-1;if(b<1)this.innerHTML="";else{var y=e(this).simpledraw(s,r,i.composite);if(y){var w=y.pixel_width,_=y.pixel_height,x=0,C=0;if(i.spotRadius&&(w<4*i.spotRadius||_<4*i.spotRadius)&&(i.spotRadius=0),i.spotRadius&&((i.minSpotColor||i.spotColor&&o[b]==u)&&(_-=Math.ceil(i.spotRadius)),(i.maxSpotColor||i.spotColor&&o[b]==c)&&(_-=Math.ceil(i.spotRadius),x+=Math.ceil(i.spotRadius)),(i.minSpotColor||i.maxSpotColor&&(o[0]==u||o[0]==c))&&(C+=Math.ceil(i.spotRadius),w-=Math.ceil(i.spotRadius)),(i.spotColor||i.minSpotColor||i.maxSpotColor&&(o[b]==u||o[b]==c))&&(w-=Math.ceil(i.spotRadius))),_--,null!=i.normalRangeMin){var k=x+Math.round(_-_*((i.normalRangeMax-u)/v));r=Math.round(_*(i.normalRangeMax-i.normalRangeMin)/v);y.drawRect(C,k,w,r,void 0,i.normalRangeColor)}for(var D=[[C,x+_]],j=0;j<o.length;j++){var S=n[j],M=o[j];D.push([C+Math.round(w/m*(S-g)),x+Math.round(_-_*((M-u)/v))])}if(i.fillColor&&(D.push([C+w,x+_-1]),y.drawShape(D,void 0,i.fillColor),D.pop()),D[0]=[C,x+Math.round(_-_*((o[0]-u)/v))],y.drawShape(D,i.lineColor),i.spotRadius&&i.spotColor&&y.drawCircle(C+w,x+Math.round(_-_*((o[b]-u)/v)),i.spotRadius,void 0,i.spotColor),c!=p){if(i.spotRadius&&i.minSpotColor){S=n[o.indexOf(p)];y.drawCircle(C+Math.round(w/m*(S-g)),x+Math.round(_-_*((p-u)/v)),i.spotRadius,void 0,i.minSpotColor)}if(i.spotRadius&&i.maxSpotColor){S=n[o.indexOf(h)];y.drawCircle(C+Math.round(w/m*(S-g)),x+Math.round(_-_*((h-u)/v)),i.spotRadius,void 0,i.maxSpotColor)}}}else this.innerHTML=""}},e.fn.sparkline.bar=function(t,i,s,r){t=e.map(t,Number);i=e.extend({type:"bar",barColor:"#00f",negBarColor:"#f44",zeroColor:void 0,zeroAxis:void 0,barWidth:4,barSpacing:1,chartRangeMax:void 0,chartRangeMin:void 0},i||{}),s=t.length*i.barWidth+(t.length-1)*i.barSpacing;var n=Math.max.apply(Math,t),o=Math.min.apply(Math,t);null!=i.chartRangeMin&&i.chartRangeMin<o&&(o=i.chartRangeMin),null!=i.chartRangeMax&&i.chartRangeMax>n&&(n=i.chartRangeMax),null==i.zeroAxis&&(i.zeroAxis=o<0);var a=n-o+1,l=e(this).simpledraw(s,r);if(l){l.pixel_width;for(var d=l.pixel_height,c=o<0&&i.zeroAxis?d-Math.round(d*(Math.abs(o)/a))-1:d-1,h=0;h<t.length;h++){var u=h*(i.barWidth+i.barSpacing),p=t[h],f=p<0?i.negBarColor:i.barColor;if(i.zeroAxis&&o<0){r=Math.round(d*(Math.abs(p)/a))+1;var g=p<0?c:c-r}else g=d-(r=Math.round(d*((p-o)/a))+1);0==p&&null!=i.zeroColor&&(f=i.zeroColor),e.browser.msie?l.drawRect(u,g,i.barWidth-1,r-1,f,f):l.drawRect(u,g,i.barWidth,r,void 0,f)}}else this.innerHTML=""},e.fn.sparkline.tristate=function(t,i,s,r){t=e.map(t,Number);i=e.extend({barWidth:4,barSpacing:1,posBarColor:"#6f6",negBarColor:"#f44",zeroBarColor:"#999",colorMap:{}},i),s=t.length*i.barWidth+(t.length-1)*i.barSpacing;var n=e(this).simpledraw(s,r);if(n){n.pixel_width;for(var o=n.pixel_height,a=Math.round(o/2),l=0;l<t.length;l++){var d=l*(i.barWidth+i.barSpacing);if(t[l]<0)var c=a,h=(r=a-1,i.negBarColor);else if(t[l]>0)c=0,r=a-1,h=i.posBarColor;else c=a-1,r=2,h=i.zeroBarColor;i.colorMap[t[l]]&&(h=i.colorMap[t[l]]),e.browser.msie?n.drawRect(d,c,i.barWidth-1,r-1,h,h):n.drawRect(d,c,i.barWidth,r,void 0,h)}}else this.innerHTML=""},e.fn.sparkline.discrete=function(t,i,s,r){t=e.map(t,Number),s="auto"==(i=e.extend({lineHeight:"auto",thresholdColor:void 0,thresholdValue:0,chartRangeMax:void 0,chartRangeMin:void 0},i)).width?2*t.length:s;var n=Math.floor(s/t.length),o=e(this).simpledraw(s,r);if(o){o.pixel_width;var a=o.pixel_height,l="auto"==i.lineHeight?Math.round(.3*a):i.lineHeight,d=a-l,c=Math.min.apply(Math,t),h=Math.max.apply(Math,t);null!=i.chartRangeMin&&i.chartRangeMin<c&&(c=i.chartRangeMin),null!=i.chartRangeMax&&i.chartRangeMax>h&&(h=i.chartRangeMax);for(var u=h-c,p=0;p<t.length;p++){var f=t[p],g=p*n,m=Math.round(d-d*((f-c)/u));o.drawLine(g,m,g,m+l,i.thresholdColor&&f<i.thresholdValue?i.thresholdColor:i.lineColor)}}else this.innerHTML=""},e.fn.sparkline.bullet=function(t,s,r,n){t=e.map(t,Number),r="auto"==(s=e.extend({targetColor:"red",targetWidth:3,performanceColor:"blue",rangeColors:["#D3DAFE","#A8B6FF","#7F94FF"],base:void 0},s)).width?"4.0em":r;var o=e(this).simpledraw(r,n);if(o&&t.length>1){var a=o.pixel_width-Math.ceil(s.targetWidth/2),l=o.pixel_height,d=Math.min.apply(Math,t),c=Math.max.apply(Math,t);if(null==s.base)d=d<0?d:0;else d=s.base;var h=c-d;for(i=2;i<t.length;i++){var u=parseInt(t[i]),p=Math.round(a*((u-d)/h));e.browser.msie?o.drawRect(0,0,p-1,l-1,s.rangeColors[i-2],s.rangeColors[i-2]):o.drawRect(0,0,p,l,void 0,s.rangeColors[i-2])}var f=parseInt(t[1]),g=Math.round(a*((f-d)/h));e.browser.msie?o.drawRect(0,Math.round(.3*l),g-1,Math.round(.4*l)-1,s.performanceColor,s.performanceColor):o.drawRect(0,Math.round(.3*l),g,Math.round(.4*l),void 0,s.performanceColor);var m=parseInt(t[0]),v=Math.round(a*((m-d)/h)-s.targetWidth/2),b=Math.round(.1*l),y=l-2*b;e.browser.msie?o.drawRect(v,b,s.targetWidth-1,y-1,s.targetColor,s.targetColor):o.drawRect(v,b,s.targetWidth,y,void 0,s.targetColor)}else this.innerHTML=""},e.fn.sparkline.pie=function(t,i,s,r){t=e.map(t,Number),s="auto"==(i=e.extend({sliceColors:["#f00","#0f0","#00f"]},i)).width?i.height:s;var n=e(this).simpledraw(s,r);if(n&&t.length>1){for(var o=n.pixel_width,a=n.pixel_height,l=Math.floor(Math.min(o,a)/2),d=0,c=0;c<t.length;c++)d+=t[c];var h=0;i.offset&&(h+=2*Math.PI*(i.offset/360));var u=2*Math.PI;for(c=0;c<t.length;c++){var p=h,f=h;d>0&&(f=h+u*(t[c]/d)),n.drawPieSlice(l,l,l,p,f,void 0,i.sliceColors[c%i.sliceColors.length]),h=f}}},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]==e)return t;return-1}),e.browser.msie&&!document.namespaces.v&&(document.namespaces.add("v","urn:schemas-microsoft-com:vml"),document.createStyleSheet().cssText="v\\:*{behavior:url(#default#VML); display:inline-block; padding:0px; margin:0px;}"),null==e.browser.hasCanvas){var t=document.createElement("canvas");e.browser.hasCanvas=null!=t.getContext}var s=function(e,t,i){};s.prototype={init:function(e,t,i){this.width=e,this.height=t,this.target=i,i[0]&&(i=i[0]),i.vcanvas=this},drawShape:function(e,t,i){alert("drawShape not implemented")},drawLine:function(e,t,i,s,r){return this.drawShape([[e,t],[i,s]],r)},drawCircle:function(e,t,i,s,r){alert("drawCircle not implemented")},drawPieSlice:function(e,t,i,s,r,n,o){alert("drawPieSlice not implemented")},drawRect:function(e,t,i,s,r,n){alert("drawRect not implemented")},getElement:function(){return this.canvas},_insert:function(t,i){e(i).html(t)}};var r=function(e,t,i){return this.init(e,t,i)};r.prototype=e.extend(new s,{_super:s.prototype,init:function(t,i,s){this._super.init(t,i,s),this.canvas=document.createElement("canvas"),s[0]&&(s=s[0]),s.vcanvas=this,e(this.canvas).css({display:"inline",width:t,height:i}),this._insert(this.canvas,s),this.pixel_height=e(this.canvas).height(),this.pixel_width=e(this.canvas).width(),this.canvas.width=this.pixel_width,this.canvas.height=this.pixel_height},_getContext:function(e,t){var i=this.canvas.getContext("2d");return null!=e&&(i.strokeStyle=e),i.lineWidth=1,null!=t&&(i.fillStyle=t),i},drawShape:function(e,t,i){var s=this._getContext(t,i);s.beginPath(),s.moveTo(e[0][0]+.5,e[0][1]+.5);for(var r=1;r<e.length;r++)s.lineTo(e[r][0]+.5,e[r][1]+.5);null!=t&&s.stroke(),null!=i&&s.fill()},drawCircle:function(e,t,i,s,r){var n=this._getContext(s,r);n.beginPath(),n.arc(e,t,i,0,2*Math.PI,!1),null!=s&&n.stroke(),null!=r&&n.fill()},drawPieSlice:function(e,t,i,s,r,n,o){var a=this._getContext(n,o);a.beginPath(),a.moveTo(e,t),a.arc(e,t,i,s,r,!1),a.lineTo(e,t),a.closePath(),null!=n&&a.stroke(),o&&a.fill()},drawRect:function(e,t,i,s,r,n){var o=this._getContext(r,n);null!=n&&o.fillRect(e,t,i,s),null!=r&&o.strokeRect(e,t,i,s)}});var n=function(e,t,i){return this.init(e,t,i)};n.prototype=e.extend(new s,{_super:s.prototype,init:function(t,i,s){this._super.init(t,i,s),s[0]&&(s=s[0]),s.vcanvas=this,this.canvas=document.createElement("span"),e(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:t,height:i,margin:"0px",padding:"0px"}),this._insert(this.canvas,s),this.pixel_height=e(this.canvas).height(),this.pixel_width=e(this.canvas).width(),this.canvas.width=this.pixel_width,this.canvas.height=this.pixel_height;var r='<v:group coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" style="position:absolute;top:0;left:0;width:'+this.pixel_width+"px;height="+this.pixel_height+'px;"></v:group>';this.canvas.insertAdjacentHTML("beforeEnd",r),this.group=e(this.canvas).children()[0]},drawShape:function(e,t,i){for(var s=[],r=0;r<e.length;r++)s[r]=e[r][0]-1+","+(e[r][1]-1);var n=s.splice(0,1),o=null==t?' stroked="false" ':' strokeWeight="1" strokeColor="'+t+'" ',a=null==i?' filled="false"':' fillColor="'+i+'" filled="true" ',l=s[0]==s[s.length-1]?"x ":"",d='<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+o+a+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+n+" l "+s.join(", ")+" "+l+'e"> </v:shape>';this.group.insertAdjacentHTML("beforeEnd",d)},drawCircle:function(e,t,i,s,r){var n="<v:oval "+(null==s?' stroked="false" ':' strokeWeight="1" strokeColor="'+s+'" ')+(null==r?' filled="false"':' fillColor="'+r+'" filled="true" ')+' style="position:absolute;top:'+(t-=i+1)+"; left:"+(e-=i+1)+"; width:"+2*i+"; height:"+2*i+'"></v:oval>';this.group.insertAdjacentHTML("beforeEnd",n)},drawPieSlice:function(e,t,i,s,r,n,o){if(s!=r){r-s==2*Math.PI&&(s=0,r=2*Math.PI);var a=[e-i,t-i,e+i,t+i,e+Math.round(Math.cos(s)*i),t+Math.round(Math.sin(s)*i),e+Math.round(Math.cos(r)*i),t+Math.round(Math.sin(r)*i)],l=null==n?' stroked="false" ':' strokeWeight="1" strokeColor="'+n+'" ',d=null==o?' filled="false"':' fillColor="'+o+'" filled="true" ',c='<v:shape coordorigin="0 0" coordsize="'+this.pixel_width+" "+this.pixel_height+'" '+l+d+' style="position:absolute;left:0px;top:0px;height:'+this.pixel_height+"px;width:"+this.pixel_width+'px;padding:0px;margin:0px;"  path="m '+e+","+t+" wa "+a.join(", ")+' x e"> </v:shape>';this.group.insertAdjacentHTML("beforeEnd",c)}},drawRect:function(e,t,i,s,r,n){return this.drawShape([[e,t],[e,t+s],[e+i,t+s],[e+i,t],[e,t]],r,n)}})}(jQuery),function(b){b.jgrid=b.jgrid||{},b.extend(b.jgrid,{htmlDecode:function(e){return"&nbsp;"==e||"&#160;"==e||1==e.length&&160==e.charCodeAt(0)?"":e?String(e).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"'):e},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;"):e},format:function(e){var t=b.makeArray(arguments).slice(1);return void 0===e&&(e=""),e.replace(/\{(\d+)\}/g,(function(e,i){return t[i]}))},getCellIndex:function(e){return e=((e=b(e)).is("td")||e.is("th")?e:e.closest("td,th"))[0],b.browser.msie?b.inArray(e,e.parentNode.cells):e.cellIndex},stripHtml:function(e){return(e+="")?(e=e.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""))&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/\"/g,"'"):"":e},stringToDoc:function(e){var t;if("string"!=typeof e)return e;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(i){(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e)}return t&&t.documentElement&&"parsererror"!=t.documentElement.tagName?t:null},parse:function(f){return"while(1);"==f.substr(0,9)&&(f=f.substr(9)),"/*"==f.substr(0,2)&&(f=f.substr(2,f.length-4)),f||(f="{}"),!0===b.jgrid.useJSON&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(f):eval("("+f+")")},jqID:function(e){return(e+="").replace(/([\.\:\[\]])/g,"\\$1")},ajaxOptions:{},extend:function(e){b.extend(b.fn.jqGrid,e),this.no_legacy_api||b.fn.extend(e)}}),b.fn.jqGrid=function(e){if("string"==typeof e){var t=b.fn.jqGrid[e];if(!t)throw"jqGrid - No such method: "+e;var i=b.makeArray(arguments).slice(1);return t.apply(this,i)}return this.each((function(){if(!this.grid){var t,i,s,r=b.extend(!0,{url:"",height:150,page:1,rowNum:20,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:200},b.jgrid.defaults,e||{}),n={headers:[],cols:[],footers:[],dragStart:function(e,t,i){this.resizing={idx:e,startX:t.clientX,sOL:i[0]},this.hDiv.style.cursor="col-resize",this.curGbox=b("#rs_m"+r.id,"#gbox_"+r.id),this.curGbox.css({display:"block",left:i[0],top:i[1],height:i[2]}),b.isFunction(r.resizeStart)&&r.resizeStart.call(this,t,e),document.onselectstart=function(){return!1}},dragMove:function(e){if(this.resizing){var t=e.clientX-this.resizing.startX;e=this.headers[this.resizing.idx];var i,s="ltr"===r.direction?e.width+t:e.width-t;s>33&&(this.curGbox.css({left:this.resizing.sOL+t}),!0===r.forceFit?(i=this.headers[this.resizing.idx+r.nv],(t="ltr"===r.direction?i.width-t:i.width+t)>33&&(e.newWidth=s,i.newWidth=t)):(this.newWidth="ltr"===r.direction?r.tblwidth+t:r.tblwidth-t,e.newWidth=s))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var e=this.resizing.idx,t=this.headers[e].newWidth||this.headers[e].width;t=parseInt(t,10),this.resizing=!1,b("#rs_m"+r.id).css("display","none"),r.colModel[e].width=t,this.headers[e].width=t,this.headers[e].el.style.width=t+"px",this.cols.length>0&&(this.cols[e].style.width=t+"px"),this.footers.length>0&&(this.footers[e].style.width=t+"px"),!0===r.forceFit?(t=this.headers[e+r.nv].newWidth||this.headers[e+r.nv].width,this.headers[e+r.nv].width=t,this.headers[e+r.nv].el.style.width=t+"px",this.cols.length>0&&(this.cols[e+r.nv].style.width=t+"px"),this.footers.length>0&&(this.footers[e+r.nv].style.width=t+"px"),r.colModel[e+r.nv].width=t):(r.tblwidth=this.newWidth||r.tblwidth,b("table:first",this.bDiv).css("width",r.tblwidth+"px"),b("table:first",this.hDiv).css("width",r.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,r.footerrow&&(b("table:first",this.sDiv).css("width",r.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),b.isFunction(r.resizeStop)&&r.resizeStop.call(this,t,e)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){n.timer&&clearTimeout(n.timer),n.timer=null;var e=b(n.bDiv).height();if(e){var t=b("table:first",n.bDiv),i=b("> tbody > tr:visible:first",t).outerHeight()||n.prevRowHeight;if(i){n.prevRowHeight=i;var s,o,a,l=r.rowNum,d=n.scrollTop=n.bDiv.scrollTop,c=Math.round(t.position().top)-d,h=c+t.height();i*=l,c<=0&&(void 0===r.lastpage||parseInt((h+d+i-1)/i,10)<=r.lastpage)&&(o=parseInt((e-h+i-1)/i,10),h>=0||o<2||!0===r.scroll?(s=Math.round((h+d)/i)+1,c=-1):c=1),c>0&&(s=parseInt(d/i,10)+1,o=parseInt((d+e)/i,10)+2-s,a=!0),o&&(r.lastpage&&s>r.lastpage||(n.hDiv.loading?n.timer=setTimeout(n.populateVisible,r.scrollTimeout):(r.page=s,a&&(n.selectionPreserver(t[0]),n.emptyRows(n.bDiv,!1)),n.populate(o))))}}},scrollGrid:function(){if(r.scroll){var e=n.bDiv.scrollTop;e!=n.scrollTop&&(n.scrollTop=e,n.timer&&clearTimeout(n.timer),n.timer=setTimeout(n.populateVisible,200))}n.hDiv.scrollLeft=n.bDiv.scrollLeft,r.footerrow&&(n.sDiv.scrollLeft=n.bDiv.scrollLeft)},selectionPreserver:function(e){var t=e.p,i=t.selrow,s=t.selarrrow?b.makeArray(t.selarrrow):null,r=e.grid.bDiv.scrollLeft,n=t.gridComplete;t.gridComplete=function(){if(t.selrow=null,t.selarrrow=[],t.multiselect&&s&&s.length>0)for(var o=0;o<s.length;o++)s[o]!=i&&b(e).jqGrid("setSelection",s[o],!1);i&&b(e).jqGrid("setSelection",i,!1),e.grid.bDiv.scrollLeft=r,t.gridComplete=n,t.gridComplete&&n()}}};if(this.p=r,0===this.p.colNames.length)for(t=0;t<this.p.colModel.length;t++)this.p.colNames[t]=this.p.colModel[t].label||this.p.colModel[t].name;if(this.p.colNames.length!==this.p.colModel.length)alert(b.jgrid.errors.model);else{var o,a=b("<div class='ui-jqgrid-view'></div>"),l=!!b.browser.msie,d=!!b.browser.safari;(s=this).p.direction=b.trim(s.p.direction.toLowerCase()),-1==b.inArray(s.p.direction,["ltr","rtl"])&&(s.p.direction="ltr"),i=s.p.direction,b(a).insertBefore(this),b(this).appendTo(a).removeClass("scroll");var c=b("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");b(c).insertBefore(a).attr({id:"gbox_"+this.id,dir:i}),b(a).appendTo(c).attr("id","gview_"+this.id),o=l&&b.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"",b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(o).insertBefore(a),b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(a),b(this).attr({cellSpacing:"0",cellPadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var h=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},u=function(e,t,i){var r=s.p.colModel[e],o=r.align,a='style="',l=r.classes,d=r.name;return o&&(a+="text-align:"+o+";"),!0===r.hidden&&(a+="display:none;"),0===t&&(a+="width: "+n.headers[e].width+"px;"),a+='"'+(void 0!==l?' class="'+l+'"':"")+(r.title&&i?' title="'+b.jgrid.stripHtml(i)+'"':""),a+=' aria-describedby="'+s.p.id+"_"+d+'"'},p=function(e){return null==e||""===e?"&#160;":s.p.autoencode?b.jgrid.htmlEncode(e):e+""},f=function(e,t,i,r,n){return void 0!==(i=s.p.colModel[i]).formatter?(e={rowId:e,colModel:i,gid:s.p.id},t=b.isFunction(i.formatter)?i.formatter.call(s,t,e,r,n):b.fmatter?b.fn.fmatter(i.formatter,t,e,r,n):p(t)):t=p(t),t},g=function(e,t,i,s,r){return e=f(e,t,i,r,"add"),'<td role="gridcell" '+u(i,s,e)+">"+e+"</td>"},m=function(e,t,i){return e='<input role="checkbox" type="checkbox" id="jqg_'+e+'" class="cbox" name="jqg_'+e+'"/>',t=u(t,i,""),'<td role="gridcell" aria-describedby="'+s.p.id+'_cb" '+t+">"+e+"</td>"},v=function(e,t,i,r){return i=(parseInt(i,10)-1)*parseInt(r,10)+1+t,e=u(e,t,""),'<td role="gridcell" aria-describedby="'+s.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+e+">"+i+"</td>"},y=function(e){var t,i,r=[],n=0;for(i=0;i<s.p.colModel.length;i++)"cb"!==(t=s.p.colModel[i]).name&&"subgrid"!==t.name&&"rn"!==t.name&&(r[n]="xml"==e?t.xmlmap||t.name:t.jsonmap||t.name,n++);return r},w=function(e){var t=s.p.remapColumns;return t&&t.length||(t=b.map(s.p.colModel,(function(e,t){return t}))),e&&(t=b.map(t,(function(t){return t<e?null:t-e}))),t},_=function(e,t){s.p.deepempty?b("tbody:first tr",e).remove():b("tbody:first",e).empty(),t&&s.p.scroll&&(b(">div:first",e).css({height:"auto"}).children("div:first").css({height:0,display:"none"}),e.scrollTop=0)},x=function(e,t){var i,s,r;if("function"==typeof t)return t(e);if(void 0===(i=e[t])){"string"==typeof t&&(s=t.split("."));try{if(r=s.length)for(i=e;i&&r--;)i=i[s.shift()]}catch(e){}}return i},C=function(e,t,i,r,n){var o=new Date;if(s.p.reccount=0,b.isXMLDoc(e)){-1!==s.p.treeANode||s.p.scroll?i=i>0?i:0:(_(t,!1),i=0);var a,l,d,c,h,u,p,f,x=0,C=0,k=0,j=0,S=[],M={},A=s.rows.length,T=[],F=0,O=!0===s.p.altRows?" "+s.p.altclass:"";s.p.xmlReader.repeatitems||(S=y("xml")),c=!1===s.p.keyIndex?s.p.xmlReader.id:s.p.keyIndex,S.length>0&&!isNaN(c)&&(s.p.remapColumns&&s.p.remapColumns.length&&(c=b.inArray(c,s.p.remapColumns)),c=S[c]),h=-1===(c+"").indexOf("[")?S.length?function(e,t){return b(c,e).text()||t}:function(e,t){return b(s.p.xmlReader.cell,e).eq(c).text()||t}:function(e,t){return e.getAttribute(c.replace(/[\[\]]/g,""))||t},s.p.userData={},b(s.p.xmlReader.page,e).each((function(){s.p.page=this.textContent||this.text||0})),b(s.p.xmlReader.total,e).each((function(){s.p.lastpage=this.textContent||this.text,void 0===s.p.lastpage&&(s.p.lastpage=1)})),b(s.p.xmlReader.records,e).each((function(){s.p.records=this.textContent||this.text||0})),b(s.p.xmlReader.userdata,e).each((function(){s.p.userData[this.getAttribute("name")]=this.textContent||this.text}));var I=(e=b(s.p.xmlReader.root+" "+s.p.xmlReader.row,e)).length,P=0;if(e&&I){var E=parseInt(s.p.rowNum,10),q=s.p.scroll?(parseInt(s.p.page,10)-1)*E+1:1;for(n&&(E*=n+1),n=b.isFunction(s.p.afterInsertRow);P<I;){if(p=e[P],f=h(p,q+P),a=((a=0===i?0:i+1)+P)%2==1?O:"",T[F++]='<tr id="'+f+'" role="row" class ="ui-widget-content jqgrow ui-row-'+s.p.direction+a+'">',!0===s.p.rownumbers&&(T[F++]=v(0,P,s.p.page,s.p.rowNum),j=1),!0===s.p.multiselect&&(T[F++]=m(f,j,P),C=1),!0===s.p.subGrid&&(T[F++]=b(s).jqGrid("addSubGridCell",C+j,P+i),k=1),s.p.xmlReader.repeatitems){u||(u=w(C+k+j));var N=b(s.p.xmlReader.cell,p);b.each(u,(function(e){var t=N[this];if(!t)return!1;l=t.textContent||t.text,M[s.p.colModel[e+C+k+j].name]=l,T[F++]=g(f,l,e+C+k+j,P+i,p)}))}else for(a=0;a<S.length;a++)l=b(S[a],p).text(),M[s.p.colModel[a+C+k+j].name]=l,T[F++]=g(f,l,a+C+k+j,P+i,p);if(T[F++]="</tr>",!1===s.p.gridview){if(!0===s.p.treeGrid){a=s.p.treeANode>=-1?s.p.treeANode:0,d=b(T.join(""))[0];try{b(s).jqGrid("setTreeNode",M,d)}catch(e){}0===A?b("tbody:first",t).append(d):b(s.rows[P+a+i]).after(d)}else b("tbody:first",t).append(T.join(""));if(!0===s.p.subGrid)try{b(s).jqGrid("addSubGrid",s.rows[s.rows.length-1],C+j)}catch(e){}n&&s.p.afterInsertRow.call(s,f,M,p),T=[],F=0}if(M={},x++,P++,x==E)break}}!0===s.p.gridview&&b("tbody:first",t).append(T.join("")),s.p.totaltime=new Date-o,x>0&&(s.grid.cols=s.rows[0].cells,0===s.p.records&&(s.p.records=I)),T=null,s.p.treeGrid||s.p.scroll||(s.grid.bDiv.scrollTop=0),s.p.reccount=x,s.p.treeANode=-1,s.p.userDataOnFooter&&b(s).jqGrid("footerData","set",s.p.userData,!0),r||D(!1,!0)}},k=function(e,t,i,r,n){var o=new Date;if(s.p.reccount=0,e){-1!==s.p.treeANode||s.p.scroll?i=i>0?i:0:(_(t,!1),i=0);var a,l,d,c,h,u,p,f,C,k=0,j=[],S=0,M=0,A=0,T={},F=s.rows.length;d=[],f=0;var O=!0===s.p.altRows?" "+s.p.altclass:"";if(s.p.page=x(e,s.p.jsonReader.page)||0,p=x(e,s.p.jsonReader.total),s.p.lastpage=void 0===p?1:p,s.p.records=x(e,s.p.jsonReader.records)||0,s.p.userData=x(e,s.p.jsonReader.userdata)||{},s.p.jsonReader.repeatitems||(c=j=y("json")),p=!1===s.p.keyIndex?s.p.jsonReader.id:s.p.keyIndex,j.length>0&&!isNaN(p)&&(s.p.remapColumns&&s.p.remapColumns.length&&(p=b.inArray(p,s.p.remapColumns)),p=j[p]),u=x(e,s.p.jsonReader.root)){h=u.length,e=0;var I=parseInt(s.p.rowNum,10),P=s.p.scroll?(parseInt(s.p.page,10)-1)*I+1:1;n&&(I*=n+1);for(var E=b.isFunction(s.p.afterInsertRow);e<h;){for(n=u[e],void 0===(C=x(n,p))&&(C=P+e,0===j.length&&s.p.jsonReader.cell&&(C=n[s.p.jsonReader.cell][p]||C)),a=((a=0===i?0:i+1)+e)%2==1?O:"",d[f++]='<tr id="'+C+'" role="row" class= "ui-widget-content jqgrow ui-row-'+s.p.direction+a+'">',!0===s.p.rownumbers&&(d[f++]=v(0,e,s.p.page,s.p.rowNum),A=1),s.p.multiselect&&(d[f++]=m(C,A,e),S=1),s.p.subGrid&&(d[f++]=b(s).jqGrid("addSubGridCell",S+A,e+i),M=1),s.p.jsonReader.repeatitems&&(s.p.jsonReader.cell&&(n=x(n,s.p.jsonReader.cell)),c||(c=w(S+M+A))),l=0;l<c.length;l++)a=x(n,c[l]),d[f++]=g(C,a,l+S+M+A,e+i,n),T[s.p.colModel[l+S+M+A].name]=a;if(d[f++]="</tr>",!1===s.p.gridview){if(!0===s.p.treeGrid){f=s.p.treeANode>=-1?s.p.treeANode:0,d=b(d.join(""))[0];try{b(s).jqGrid("setTreeNode",T,d)}catch(e){}0===F?b("tbody:first",t).append(d):b(s.rows[e+f+i]).after(d)}else b("tbody:first",t).append(d.join(""));if(!0===s.p.subGrid)try{b(s).jqGrid("addSubGrid",s.rows[s.rows.length-1],S+A)}catch(e){}E&&s.p.afterInsertRow.call(s,C,T,n),d=[],f=0}if(T={},e++,++k==I)break}!0===s.p.gridview&&b("tbody:first",t).append(d.join("")),s.p.totaltime=new Date-o,k>0&&(s.grid.cols=s.rows[0].cells,0===s.p.records&&(s.p.records=h))}s.p.treeGrid||s.p.scroll||(s.grid.bDiv.scrollTop=0),s.p.reccount=k,s.p.treeANode=-1,s.p.userDataOnFooter&&b(s).jqGrid("footerData","set",s.p.userData,!0),r||D(!1,!0)}},D=function(e,t){var i,r,n,o,a,l,d,c="";(n=parseInt(s.p.page,10)-1)<0&&(n=0),a=(n*=parseInt(s.p.rowNum,10))+s.p.reccount,s.p.scroll&&(i=b("tbody:first > tr",s.grid.bDiv),n=a-i.length,(r=i.outerHeight())&&(i=n*r,r=parseInt(s.p.records,10)*r,b(">div:first",s.grid.bDiv).css({height:r}).children("div:first").css({height:i,display:i?"":"none"}))),c=s.p.pager?s.p.pager:"",(c+=s.p.toppager?c?","+s.p.toppager:s.p.toppager:"")&&(d=b.jgrid.formatter.integer||{},s.p.loadonce?(i=r=1,s.p.lastpage=s.page=1,b(".selbox",c).attr("disabled",!0)):(i=h(s.p.page),r=h(s.p.lastpage),b(".selbox",c).attr("disabled",!1)),!0===s.p.pginput&&(b(".ui-pg-input",c).val(s.p.page),b("#sp_1",c).html(b.fmatter?b.fmatter.util.NumberFormat(s.p.lastpage,d):s.p.lastpage)),s.p.viewrecords&&(0===s.p.reccount?b(".ui-paging-info",c).html(s.p.emptyrecords):(o=n+1,l=s.p.records,b.fmatter&&(o=b.fmatter.util.NumberFormat(o,d),a=b.fmatter.util.NumberFormat(a,d),l=b.fmatter.util.NumberFormat(l,d)),b(".ui-paging-info",c).html(b.jgrid.format(s.p.recordtext,o,a,l)))),!0===s.p.pgbuttons&&(i<=0&&(i=r=0),1==i||0===i?(b("#first, #prev",s.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover"),s.p.toppager&&b("#first_t, #prev_t",s.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#first, #prev",s.p.pager).removeClass("ui-state-disabled"),s.p.toppager&&b("#first_t, #prev_t",s.p.toppager).removeClass("ui-state-disabled")),i==r||0===i?(b("#next, #last",s.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover"),s.p.toppager&&b("#next_t, #last_t",s.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover")):(b("#next, #last",s.p.pager).removeClass("ui-state-disabled"),s.p.toppager&&b("#next_t, #last_t",s.p.toppager).removeClass("ui-state-disabled")))),!0===e&&!0===s.p.rownumbers&&b("td.jqgrid-rownum",s.rows).each((function(e){b(this).html(n+1+e)})),t&&s.p.jqgdnd&&b(s).jqGrid("gridDnD","updateDnD"),b.isFunction(s.p.gridComplete)&&s.p.gridComplete.call(s)},j=function(e){if(!s.grid.hDiv.loading){var t,i=s.p.scroll&&!1===e,r={},n=s.p.prmNames;s.p.page<=0&&(s.p.page=1),null!==n.search&&(r[n.search]=s.p.search),null!==n.nd&&(r[n.nd]=(new Date).getTime()),null!==n.rows&&(r[n.rows]=s.p.rowNum),null!==n.page&&(r[n.page]=s.p.page),null!==n.sort&&(r[n.sort]=s.p.sortname),null!==n.order&&(r[n.order]=s.p.sortorder);var o=s.p.loadComplete,a=b.isFunction(o);a||(o=null);var l=0;(e=e||1)>1?null!==n.npage?(r[n.npage]=e,l=e-1,e=1):o=function(t){a&&s.p.loadComplete.call(s,t),s.grid.hDiv.loading=!1,s.p.page++,j(e-1)}:null!==n.npage&&delete s.p.postData[n.npage],b.extend(s.p.postData,r);var d=s.p.scroll?s.rows.length-1:0;if(b.isFunction(s.p.datatype))s.p.datatype.call(s,s.p.postData,"load_"+s.p.id);else switch(b.isFunction(s.p.beforeRequest)&&s.p.beforeRequest.call(s),t=s.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:s.p.url,type:s.p.mtype,dataType:t,data:b.isFunction(s.p.serializeGridData)?s.p.serializeGridData.call(s,s.p.postData):s.p.postData,success:function(r){"xml"===t?C(r,s.grid.bDiv,d,e>1,l):k(r,s.grid.bDiv,d,e>1,l),o&&o.call(s,r),i&&s.grid.populateVisible(),(s.p.loadonce||s.p.treeGrid)&&(s.p.datatype="local"),M()},error:function(e,t,i){b.isFunction(s.p.loadError)&&s.p.loadError.call(s,e,t,i),M()},beforeSend:function(e){S(),b.isFunction(s.p.loadBeforeSend)&&s.p.loadBeforeSend.call(s,e)}},b.jgrid.ajaxOptions,s.p.ajaxGridOptions));break;case"xmlstring":S(),r=b.jgrid.stringToDoc(s.p.datastr),a&&s.p.loadComplete.call(s,r),C(r,s.grid.bDiv),s.p.datatype="local",s.p.datastr=null,M();break;case"jsonstring":S(),r="string"==typeof s.p.datastr?b.jgrid.parse(s.p.datastr):s.p.datastr,a&&s.p.loadComplete.call(s,r),k(r,s.grid.bDiv),s.p.datatype="local",s.p.datastr=null,M();break;case"local":case"clientside":S(),s.p.datatype="local",a&&s.p.loadComplete.call(s,""),A(),D(!0,!0),M()}}},S=function(){if(s.grid.hDiv.loading=!0,!s.p.hiddengrid)switch(s.p.loadui){case"disable":break;case"enable":b("#load_"+s.p.id).show();break;case"block":b("#lui_"+s.p.id).show(),b("#load_"+s.p.id).show()}},M=function(){switch(s.grid.hDiv.loading=!1,s.p.loadui){case"disable":break;case"enable":b("#load_"+s.p.id).hide();break;case"block":b("#lui_"+s.p.id).hide(),b("#load_"+s.p.id).hide()}},A=function(){var e,t,i,r,o=/[\$,%]/g,a=[],l=0,d="asc"==s.p.sortorder?1:-1,c=!1;if(b.each(s.p.colModel,(function(t){if(this.index==s.p.sortname||this.name==s.p.sortname)return s.p.lastsort==t&&(c=!0),l=t,e=this.sorttype,!1})),i="float"==e||"number"==e||"currency"==e?function(e){return e=parseFloat(e.replace(o,"")),isNaN(e)?0:e}:"int"==e||"integer"==e?function(e){return h(e.replace(o,""),0)}:"date"==e||"datetime"==e?function(e){return T(s.p.colModel[l].datefmt||"Y-m-d",e).getTime()}:b.isFunction(e)?e:function(e){return b.trim(e.toUpperCase())},r=s.p.colModel[l],b.each(s.rows,(function(e,s){try{t=b.unformat(b(s).children("td").eq(l),{rowId:s.id,colModel:r},l,!0)}catch(e){t=b(s).children("td").eq(l).text()}s.sortKey=i(t),a[e]=this})),s.p.treeGrid)b(s).jqGrid("SortTree",d);else{c?a.reverse():a.sort((function(e,t){return e.sortKey<t.sortKey?-d:e.sortKey>t.sortKey?d:0})),a[0]&&(b("td",a[0]).each((function(e){b(this).css("width",n.headers[e].width+"px")})),s.grid.cols=a[0].cells);var u="";s.p.altRows&&(u=s.p.altclass),b.each(a,(function(e,t){u&&(e%2==1?b(t).addClass(u):b(t).removeClass(u)),b("tbody",s.grid.bDiv).append(t),t.sortKey=null}))}s.grid.bDiv.scrollTop=0},T=function(e,t){var i,s,r,n={m:1,d:1,y:1970,h:0,i:0,s:0};if(t=b.trim(t)){t=t.split(/[\\\/:_;.\t\T\s-]/),e=e.split(/[\\\/:_;.\t\T\s-]/);var o=b.jgrid.formatter.date.monthNames,a=b.jgrid.formatter.date.AmPm,l=function(e,t){return 0===e?12==t&&(t=0):12!=t&&(t+=12),t};for(i=0,s=e.length;i<s;i++)"M"==e[i]&&-1!==(r=b.inArray(t[i],o))&&r<12&&(t[i]=r+1),"F"==e[i]&&-1!==(r=b.inArray(t[i],o))&&r>11&&(t[i]=r+1-12),"a"==e[i]&&-1!==(r=b.inArray(t[i],a))&&r<2&&t[i]==a[r]&&(t[i]=r,n.h=l(t[i],n.h)),"A"==e[i]&&-1!==(r=b.inArray(t[i],a))&&r>1&&t[i]==a[r]&&(t[i]=r-2,n.h=l(t[i],n.h)),n[e[i].toLowerCase()]=parseInt(t[i],10);n.m=parseInt(n.m,10)-1,(e=n.y)>=70&&e<=99?n.y=1900+n.y:e>=0&&e<=69&&(n.y=2e3+n.y)}return new Date(n.y,n.m,n.d,n.h,n.i,n.s,0)};o=function(e,t){var r,n,o,a,l="",d="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",c="",u=function(e){var t;return b.isFunction(s.p.onPaging)&&(t=s.p.onPaging.call(s,e)),s.p.selrow=null,s.p.multiselect&&(s.p.selarrrow=[],b("#cb_"+b.jgrid.jqID(s.p.id),s.grid.hDiv).attr("checked",!1)),s.p.savedRow=[],"stop"!=t};if(r="pg_"+(e=e.substr(1)),n=e+"_left",o=e+"_center",a=e+"_right",b("#"+e).append("<div id='"+r+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;' role='row'><tbody><tr><td id='"+n+"' align='left'></td><td id='"+o+"' align='center' style='white-space:pre;'></td><td id='"+a+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),s.p.rowList.length>0){for(c="<td dir='"+i+"'>",c+="<select class='ui-pg-selbox' role='listbox'>",n=0;n<s.p.rowList.length;n++)c+="<option role='option' value='"+s.p.rowList[n]+"'"+(s.p.rowNum==s.p.rowList[n]?" selected":"")+">"+s.p.rowList[n]+"</option>";c+="</select></td>"}"rtl"==i&&(d+=c),!0===s.p.pginput&&(l="<td dir='"+i+"'>"+b.jgrid.format(s.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1'></span>")+"</td>"),!0===s.p.pgbuttons?(n=["first"+t,"prev"+t,"next"+t,"last"+t],"rtl"==i&&n.reverse(),d+="<td id='"+n[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",d+="<td id='"+n[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",d+=""!=l?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+l+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"",d+="<td id='"+n[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>",d+="<td id='"+n[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"):""!=l&&(d+=l),"ltr"==i&&(d+=c),d+="</tr></tbody></table>",!0===s.p.viewrecords&&b("td#"+e+"_"+s.p.recordpos,"#"+r).append("<div dir='"+i+"' style='text-align:"+s.p.recordpos+"' class='ui-paging-info'></div>"),b("td#"+e+"_"+s.p.pagerpos,"#"+r).append(d),c=b(".ui-jqgrid").css("font-size")||"11px",b("body").append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+c+";visibility:hidden;' ></div>"),d=b(d).clone().appendTo("#testpg").width(),b("#testpg").remove(),d>0&&(""!=l&&(d+=50),b("td#"+e+"_"+s.p.pagerpos,"#"+r).width(d)),s.p._nvtd=[],s.p._nvtd[0]=d?Math.floor((s.p.width-d)/2):Math.floor(s.p.width/3),s.p._nvtd[1]=0,d=null,b(".ui-pg-selbox","#"+r).bind("change",(function(){return s.p.page=Math.round(s.p.rowNum*(s.p.page-1)/this.value-.5)+1,s.p.rowNum=this.value,t?b(".ui-pg-selbox",s.p.pager).val(this.value):s.p.toppager&&b(".ui-pg-selbox",s.p.toppager).val(this.value),!!u("records")&&(j(),!1)})),!0===s.p.pgbuttons&&(b(".ui-pg-button","#"+r).hover((function(){b(this).hasClass("ui-state-disabled")?this.style.cursor="default":(b(this).addClass("ui-state-hover"),this.style.cursor="pointer")}),(function(){b(this).hasClass("ui-state-disabled")||(b(this).removeClass("ui-state-hover"),this.style.cursor="default")})),b("#first"+t+", #prev"+t+", #next"+t+", #last"+t,"#"+e).click((function(){var e=h(s.p.page,1),i=h(s.p.lastpage,1),r=!1,n=!0,o=!0,a=!0,l=!0;if(0===i||1===i?l=a=o=n=!1:i>1&&e>=1?1===e?o=n=!1:e>1&&e<i||e===i&&(l=a=!1):i>1&&0===e&&(l=a=!1,e=i-1),this.id==="first"+t&&n&&(s.p.page=1,r=!0),this.id==="prev"+t&&o&&(s.p.page=e-1,r=!0),this.id==="next"+t&&a&&(s.p.page=e+1,r=!0),this.id==="last"+t&&l&&(s.p.page=i,r=!0),r){if(!u(this.id))return!1;j()}return!1}))),!0===s.p.pginput&&b("input.ui-pg-input","#"+r).keypress((function(e){return 13==(e.charCode?e.charCode:e.keyCode?e.keyCode:0)?(s.p.page=b(this).val()>0?b(this).val():s.p.page,!!u("user")&&(j(),!1)):this}))};var F=function(e,t,i,r){if(s.p.colModel[t].sortable&&!(s.p.savedRow.length>0)){if(i||(s.p.lastsort==t?"asc"==s.p.sortorder?s.p.sortorder="desc":"desc"==s.p.sortorder&&(s.p.sortorder="asc"):s.p.sortorder=s.p.colModel[t].firstsortorder||"asc",s.p.page=1),r){if(s.p.lastsort==t&&s.p.sortorder==r&&!i)return;s.p.sortorder=r}if(i=b("thead:first",s.grid.hDiv).get(0),b("tr th:eq("+s.p.lastsort+") span.ui-grid-ico-sort",i).addClass("ui-state-disabled"),b("tr th:eq("+s.p.lastsort+")",i).attr("aria-selected","false"),b("tr th:eq("+t+") span.ui-icon-"+s.p.sortorder,i).removeClass("ui-state-disabled"),b("tr th:eq("+t+")",i).attr("aria-selected","true"),s.p.viewsortcols[0]||s.p.lastsort!=t&&(b("tr th:eq("+s.p.lastsort+") span.s-ico",i).hide(),b("tr th:eq("+t+") span.s-ico",i).show()),e=e.substring(5),s.p.sortname=s.p.colModel[t].index||e,i=s.p.sortorder,b.isFunction(s.p.onSortCol)&&"stop"==s.p.onSortCol.call(s,e,t,i))return void(s.p.lastsort=t);"local"==s.p.datatype?s.p.deselectAfterSort&&b(s).jqGrid("resetSelection"):(s.p.selrow=null,s.p.multiselect&&b("#cb_"+b.jgrid.jqID(s.p.id),s.grid.hDiv).attr("checked",!1),s.p.selarrrow=[],s.p.savedRow=[],s.p.scroll&&_(s.grid.bDiv,!0)),s.p.subGrid&&"local"==s.p.datatype&&b("td.sgexpanded","#"+s.p.id).each((function(){b(this).trigger("click")})),j(),s.p.lastsort=t,s.p.sortname!=e&&t&&(s.p.lastsort=t)}};for(this.p.id=this.id,-1==b.inArray(s.p.multikey,["shiftKey","altKey","ctrlKey"])&&(s.p.multikey=!1),s.p.keyIndex=!1,t=0;t<s.p.colModel.length;t++)if(!0===s.p.colModel[t].key){s.p.keyIndex=t;break}if(s.p.sortorder=s.p.sortorder.toLowerCase(),!0===this.p.treeGrid)try{b(this).jqGrid("setTreeGrid")}catch(e){}if(this.p.subGrid)try{b(s).jqGrid("setSubGrid")}catch(e){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:d?s.p.multiselectWidth+s.p.cellLayout:s.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:s.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),s.p.xmlReader=b.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},s.p.xmlReader),s.p.jsonReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},s.p.jsonReader),s.p.scroll&&(s.p.pgbuttons=!1,s.p.pginput=!1,s.p.rowList=[]);var O,I,P,E,q,N,R,z,W="<thead><tr class='ui-jqgrid-labels' role='rowheader'>";if(I=z="",!0===s.p.shrinkToFit&&!0===s.p.forceFit)for(t=s.p.colModel.length-1;t>=0;t--)if(!s.p.colModel[t].hidden){s.p.colModel[t].resizable=!1;break}for("horizontal"==s.p.viewsortcols[1]&&(z=" ui-i-asc",I=" ui-i-desc"),O=l?"class='ui-th-div-ie'":"",z="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+z+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+i+"'></span>",z+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+I+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+i+"'></span></span>",t=0;t<this.p.colNames.length;t++)I=s.p.headertitles?' title="'+b.jgrid.stripHtml(s.p.colNames[t])+'"':"",W+="<th id='"+s.p.id+"_"+s.p.colModel[t].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+i+"'"+I+">",I=s.p.colModel[t].index||s.p.colModel[t].name,W+="<div id='jqgh_"+s.p.colModel[t].name+"' "+O+">"+s.p.colNames[t],s.p.colModel[t].width=s.p.colModel[t].width?parseInt(s.p.colModel[t].width,10):150,"boolean"!=typeof s.p.colModel[t].title&&(s.p.colModel[t].title=!0),I==s.p.sortname&&(s.p.lastsort=t),W+=z+"</div></th>";if(W+="</tr></thead>",b(this).append(W),b("thead tr:first th",this).hover((function(){b(this).addClass("ui-state-hover")}),(function(){b(this).removeClass("ui-state-hover")})),this.p.multiselect){var L,Q=[];b("#cb_"+b.jgrid.jqID(s.p.id),this).bind("click",(function(){this.checked?(b("[id^=jqg_]",s.rows).attr("checked",!0),b(s.rows).each((function(e){b(this).hasClass("subgrid")||(b(this).addClass("ui-state-highlight").attr("aria-selected","true"),s.p.selarrrow[e]=s.p.selrow=this.id)})),L=!0,Q=[]):(b("[id^=jqg_]",s.rows).attr("checked",!1),b(s.rows).each((function(e){b(this).hasClass("subgrid")||(b(this).removeClass("ui-state-highlight").attr("aria-selected","false"),Q[e]=this.id)})),s.p.selarrrow=[],s.p.selrow=null,L=!1),b.isFunction(s.p.onSelectAll)&&s.p.onSelectAll.call(s,L?s.p.selarrrow:Q,L)}))}!0===s.p.autowidth&&(W=b(c).innerWidth(),s.p.width=W>0?W:"nw"),function(){var e,t,i,r,o=0,a=s.p.cellLayout,l=0,c=s.p.scrollOffset,u=!1,p=0,f=0,g=0;d&&(a=0),b.each(s.p.colModel,(function(){void 0===this.hidden&&(this.hidden=!1),!1===this.hidden&&(o+=h(this.width,0),this.fixed?(p+=this.width,f+=this.width+a):l++,g++)})),isNaN(s.p.width)?s.p.width=n.width=o:n.width=s.p.width,s.p.tblwidth=o,!1===s.p.shrinkToFit&&!0===s.p.forceFit&&(s.p.forceFit=!1),!0===s.p.shrinkToFit&&l>0&&(i=n.width-a*l-f,isNaN(s.p.height)||(i-=c,u=!0),o=0,b.each(s.p.colModel,(function(r){!1!==this.hidden||this.fixed||(this.width=t=Math.round(i*this.width/(s.p.tblwidth-p)),o+=t,e=r)})),r=0,u?n.width-f-(o+a*l)!==c&&(r=n.width-f-(o+a*l)-c):u||1===Math.abs(n.width-f-(o+a*l))||(r=n.width-f-(o+a*l)),s.p.colModel[e].width+=r,s.p.tblwidth=o+r+p+g*a,s.p.tblwidth>s.p.width&&(s.p.colModel[e].width-=s.p.tblwidth-parseInt(s.p.width,10),s.p.tblwidth=s.p.width))}(),b(c).css("width",n.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+s.p.id+"'>&#160;</div>"),b(a).css("width",n.width+"px"),W=b("thead:first",s).get(0);var G="<table role='grid' style='width:"+s.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+i+"'>";if(a=b("tr:first",W),s.p.disableClick=!1,b("th",a).each((function(e){P=s.p.colModel[e].width,void 0===s.p.colModel[e].resizable&&(s.p.colModel[e].resizable=!0),s.p.colModel[e].resizable?(E=document.createElement("span"),b(E).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+i),b.browser.opera||b(E).css("cursor","col-resize"),b(this).addClass(s.p.resizeclass)):E="",b(this).css("width",P+"px").prepend(E),s.p.colModel[e].hidden&&b(this).css("display","none"),n.headers[e]={width:P,el:this},"boolean"!=typeof(q=s.p.colModel[e].sortable)&&(q=s.p.colModel[e].sortable=!0);var t=s.p.colModel[e].name;"cb"==t||"subgrid"==t||"rn"==t||s.p.viewsortcols[2]&&b("div",this).addClass("ui-jqgrid-sortable"),q&&(s.p.viewsortcols[0]?(b("div span.s-ico",this).show(),e==s.p.lastsort&&b("div span.ui-icon-"+s.p.sortorder,this).removeClass("ui-state-disabled")):e==s.p.lastsort&&(b("div span.s-ico",this).show(),b("div span.ui-icon-"+s.p.sortorder,this).removeClass("ui-state-disabled"))),G+="<td role='gridcell' "+u(e,0,"")+">&#160;</td>"})).mousedown((function(e){if(1==b(e.target).closest("th>span.ui-jqgrid-resize").length){var t=b.jgrid.getCellIndex(this);return!0===s.p.forceFit&&(s.p.nv=function(e){var t,i=e;for(t=e+1;t<s.p.colModel.length;t++)if(!0!==s.p.colModel[t].hidden){i=t;break}return i-e}(t)),n.dragStart(t,e,function(e){var t,i={},r=d?0:s.p.cellLayout;for(t=i[0]=i[1]=i[2]=0;t<=e;t++)!1===s.p.colModel[t].hidden&&(i[0]+=s.p.colModel[t].width+r);return"rtl"==s.p.direction&&(i[0]=s.p.width-i[0]),i[0]-=s.grid.bDiv.scrollLeft,b(s.grid.cDiv).is(":visible")&&(i[1]+=b(s.grid.cDiv).height()+parseInt(b(s.grid.cDiv).css("padding-top"),10)+parseInt(b(s.grid.cDiv).css("padding-bottom"),10)),!0!==s.p.toolbar[0]||"top"!=s.p.toolbar[1]&&"both"!=s.p.toolbar[1]||(i[1]+=b(s.grid.uDiv).height()+parseInt(b(s.grid.uDiv).css("border-top-width"),10)+parseInt(b(s.grid.uDiv).css("border-bottom-width"),10)),s.p.toppager&&(i[1]+=b(s.grid.topDiv).height()+parseInt(b(s.grid.topDiv).css("border-bottom-width"),10)),i[2]+=b(s.grid.bDiv).height()+b(s.grid.hDiv).height(),i}(t)),!1}})).click((function(e){if(s.p.disableClick)return s.p.disableClick=!1;var t,i,r="th>div.ui-jqgrid-sortable";return s.p.viewsortcols[2]||(r="th>div>span>span.ui-grid-ico-sort"),1==(e=b(e.target).closest(r)).length?(r=b.jgrid.getCellIndex(this),s.p.viewsortcols[2]||(t=!0,i=e.attr("sort")),F(b("div",this)[0].id,r,t,i),!1):void 0})),s.p.sortable&&b.fn.sortable)try{b(s).jqGrid("sortableColumns",a)}catch(e){}G+="</tr></tbody></table>",this.appendChild(document.createElement("tbody")),b(this).addClass("ui-jqgrid-btable"),a=b("<table class='ui-jqgrid-htable' style='width:"+s.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(W);var B,H,U=!(!s.p.caption||!0!==s.p.hiddengrid);W=b("<div class='ui-jqgrid-hbox"+("rtl"==i?"-rtl":"")+"'></div>"),n.hDiv=document.createElement("div"),b(n.hDiv).css({width:n.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(W),b(W).append(a),U&&b(n.hDiv).hide(),s.p.pager&&("string"==typeof s.p.pager?"#"!=s.p.pager.substr(0,1)&&(s.p.pager="#"+s.p.pager):s.p.pager="#"+b(s.p.pager).attr("id"),b(s.p.pager).css({width:n.width+"px"}).appendTo(c).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),U&&b(s.p.pager).hide(),o(s.p.pager,"")),!1===s.p.cellEdit&&!0===s.p.hoverrows&&b(s).bind("mouseover",(function(e){return R=b(e.target).closest("tr.jqgrow"),"subgrid"!==b(R).attr("class")&&b(R).addClass("ui-state-hover"),!1})).bind("mouseout",(function(e){return R=b(e.target).closest("tr.jqgrow"),b(R).removeClass("ui-state-hover"),!1})),b(s).before(n.hDiv).click((function(e){N=e.target;var t=b(N).hasClass("cbox");if(R=b(N,s.rows).closest("tr.jqgrow"),0===b(R).length)return this;var i=!0;if(b.isFunction(s.p.beforeSelectRow)&&(i=s.p.beforeSelectRow.call(s,R[0].id,e)),"A"==N.tagName||("INPUT"==N.tagName||"TEXTAREA"==N.tagName||"OPTION"==N.tagName||"SELECT"==N.tagName)&&!t)return this;if(!0!==i)return this;if(!0===s.p.cellEdit)if(s.p.multiselect&&t)b(s).jqGrid("setSelection",R[0].id,!0);else{B=R[0].rowIndex,H=b.jgrid.getCellIndex(N);try{b(s).jqGrid("editCell",B,H,!0)}catch(e){}}else s.p.multikey?e[s.p.multikey]?b(s).jqGrid("setSelection",R[0].id,!0):s.p.multiselect&&t&&(t=b("[id^=jqg_]",R).attr("checked"),b("[id^=jqg_]",R).attr("checked",!t)):(s.p.multiselect&&s.p.multiboxonly&&(t||(b(s.p.selarrrow).each((function(e,t){e=s.rows.namedItem(t),b(e).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(t),e).attr("checked",!1)})),s.p.selarrrow=[],b("#cb_"+b.jgrid.jqID(s.p.id),s.grid.hDiv).attr("checked",!1))),b(s).jqGrid("setSelection",R[0].id,!0));b.isFunction(s.p.onCellSelect)&&(B=R[0].id,H=b.jgrid.getCellIndex(N),s.p.onCellSelect.call(s,B,H,b(N).html(),e)),e.stopPropagation()})).bind("reloadGrid",(function(e,t){return!0===s.p.treeGrid&&(s.p.datatype=s.p.treedatatype),t&&t.current&&s.grid.selectionPreserver(s),"local"==s.p.datatype?b(s).jqGrid("resetSelection"):s.p.treeGrid||(s.p.selrow=null,s.p.multiselect&&(s.p.selarrrow=[],b("#cb_"+b.jgrid.jqID(s.p.id),s.grid.hDiv).attr("checked",!1)),s.p.savedRow=[],s.p.scroll&&_(s.grid.bDiv,!0)),t&&t.page&&((e=t.page)>s.p.lastpage&&(e=s.p.lastpage),e<1&&(e=1),s.p.page=e,s.grid.bDiv.scrollTop=s.grid.prevRowHeight?(e-1)*s.grid.prevRowHeight*s.p.rowNum:0),s.grid.prevRowHeight&&s.p.scroll?(delete s.p.lastpage,s.grid.populateVisible()):s.grid.populate(),!1})),b.isFunction(this.p.ondblClickRow)&&b(this).dblclick((function(e){return N=e.target,R=b(N,s.rows).closest("tr.jqgrow"),0===b(R).length||(B=R[0].rowIndex,H=b.jgrid.getCellIndex(N),s.p.ondblClickRow.call(s,b(R).attr("id"),B,H,e)),!1})),b.isFunction(this.p.onRightClickRow)&&b(this).bind("contextmenu",(function(e){return N=e.target,R=b(N,s.rows).closest("tr.jqgrow"),0===b(R).length||(s.p.multiselect||b(s).jqGrid("setSelection",R[0].id,!0),B=R[0].rowIndex,H=b.jgrid.getCellIndex(N),s.p.onRightClickRow.call(s,b(R).attr("id"),B,H,e)),!1})),n.bDiv=document.createElement("div"),b(n.bDiv).append(b('<div style="position:relative;'+(l&&b.browser.version<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:s.p.height+(isNaN(s.p.height)?"":"px"),width:n.width+"px"}).scroll(n.scrollGrid),b("table:first",n.bDiv).css({width:s.p.tblwidth+"px"}),l?(2==b("tbody",this).size()&&b("tbody:first",this).remove(),s.p.multikey&&b(n.bDiv).bind("selectstart",(function(){return!1}))):s.p.multikey&&b(n.bDiv).bind("mousedown",(function(){return!1})),U&&b(n.bDiv).hide(),n.cDiv=document.createElement("div");var Y=!0===s.p.hidegrid?b("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover((function(){Y.addClass("ui-state-hover")}),(function(){Y.removeClass("ui-state-hover")})).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"==i?"left":"right","0px"):"";if(b(n.cDiv).append(Y).append("<span class='ui-jqgrid-title"+("rtl"==i?"-rtl":"")+"'>"+s.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"),b(n.cDiv).insertBefore(n.hDiv),s.p.toolbar[0]&&(n.uDiv=document.createElement("div"),"top"==s.p.toolbar[1]?b(n.uDiv).insertBefore(n.hDiv):"bottom"==s.p.toolbar[1]&&b(n.uDiv).insertAfter(n.hDiv),"both"==s.p.toolbar[1]?(n.ubDiv=document.createElement("div"),b(n.uDiv).insertBefore(n.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),b(n.ubDiv).insertAfter(n.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id),U&&b(n.ubDiv).hide()):b(n.uDiv).width(n.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),U&&b(n.uDiv).hide()),s.p.toppager&&(s.p.toppager=s.p.id+"_toppager",n.topDiv=b("<div id='"+s.p.toppager+"'></div>")[0],s.p.toppager="#"+s.p.toppager,b(n.topDiv).insertBefore(n.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(n.width),o(s.p.toppager,"_t")),s.p.footerrow&&(n.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0],W=b("<div class='ui-jqgrid-hbox"+("rtl"==i?"-rtl":"")+"'></div>"),b(n.sDiv).append(W).insertAfter(n.hDiv).width(n.width),b(W).append(G),n.footers=b(".ui-jqgrid-ftable",n.sDiv)[0].rows[0].cells,s.p.rownumbers&&(n.footers[0].className="ui-state-default jqgrid-rownum"),U&&b(n.sDiv).hide()),s.p.caption){var V=s.p.datatype;!0===s.p.hidegrid&&(b(".ui-jqgrid-titlebar-close",n.cDiv).click((function(e){var t=b.isFunction(s.p.onHeaderClick);return"visible"==s.p.gridstate?(b(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+s.p.id).slideUp("fast"),s.p.pager&&b(s.p.pager).slideUp("fast"),s.p.toppager&&b(s.p.toppager).slideUp("fast"),!0===s.p.toolbar[0]&&("both"==s.p.toolbar[1]&&b(n.ubDiv).slideUp("fast"),b(n.uDiv).slideUp("fast")),s.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+s.p.id).slideUp("fast"),b("span",this).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),s.p.gridstate="hidden",b("#gbox_"+s.p.id).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+s.p.id).hide(),t&&(U||s.p.onHeaderClick.call(s,s.p.gridstate,e))):"hidden"==s.p.gridstate&&(b(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+s.p.id).slideDown("fast"),s.p.pager&&b(s.p.pager).slideDown("fast"),s.p.toppager&&b(s.p.toppager).slideDown("fast"),!0===s.p.toolbar[0]&&("both"==s.p.toolbar[1]&&b(n.ubDiv).slideDown("fast"),b(n.uDiv).slideDown("fast")),s.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+s.p.id).slideDown("fast"),b("span",this).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),U&&(s.p.datatype=V,j(),U=!1),s.p.gridstate="visible",b("#gbox_"+s.p.id).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+s.p.id).show(),t&&s.p.onHeaderClick.call(s,s.p.gridstate,e)),!1})),U&&(s.p.datatype="local",b(".ui-jqgrid-titlebar-close",n.cDiv).trigger("click")))}else b(n.cDiv).hide();b(n.hDiv).after(n.bDiv).mousemove((function(e){if(n.resizing)return n.dragMove(e),!1})),b(".ui-jqgrid-labels",n.hDiv).bind("selectstart",(function(){return!1})),b(document).mouseup((function(){return!n.resizing||(n.dragEnd(),!1)})),this.updateColumns=function(){var e=this.rows[0],t=this;return e&&(b("td",e).each((function(e){b(this).css("width",t.grid.headers[e].width+"px")})),this.grid.cols=e.cells),this},s.formatCol=u,s.sortData=F,s.updatepager=D,s.formatter=function(e,t,i,s,r){return f(e,t,i,s,r)},b.extend(n,{populate:j,emptyRows:_}),this.grid=n,s.addXmlData=function(e){C(e,s.grid.bDiv)},s.addJSONData=function(e){k(e,s.grid.bDiv)},j(),s.p.hiddengrid=!1,b(window).unload((function(){s=null}))}}}))},b.jgrid.extend({getGridParam:function(e){var t=this[0];if(t.grid)return e?void 0!==t.p[e]?t.p[e]:null:t.p},setGridParam:function(e){return this.each((function(){this.grid&&"object"==typeof e&&b.extend(!0,this.p,e)}))},getDataIDs:function(){var e,t=[],i=0;return this.each((function(){if((e=this.rows.length)&&e>0)for(;i<e;)t[i]=this.rows[i].id,i++})),t},setSelection:function(e,t){return this.each((function(){var i,s,r,n=this;void 0!==e&&(t=!1!==t,(s=n.rows.namedItem(e+""))&&(!0===n.p.scrollrows&&(i=n.rows.namedItem(e).rowIndex)>=0&&function(e){var t=b(n.grid.bDiv)[0].clientHeight,i=b(n.grid.bDiv)[0].scrollTop,s=n.rows[e].offsetTop;s+(e=n.rows[e].clientHeight)>=t+i?b(n.grid.bDiv)[0].scrollTop=s-(t+i)+e+i:s<t+i&&s<i&&(b(n.grid.bDiv)[0].scrollTop=s)}(i),n.p.multiselect?(n.p.selrow=s.id,-1===(r=b.inArray(n.p.selrow,n.p.selarrrow))?("ui-subgrid"!==s.className&&b(s).addClass("ui-state-highlight").attr("aria-selected","true"),i=!0,b("#jqg_"+b.jgrid.jqID(n.p.selrow),n.rows[s.rowIndex]).attr("checked",i),n.p.selarrrow.push(n.p.selrow),n.p.onSelectRow&&t&&n.p.onSelectRow.call(n,n.p.selrow,i)):("ui-subgrid"!==s.className&&b(s).removeClass("ui-state-highlight").attr("aria-selected","false"),i=!1,b("#jqg_"+b.jgrid.jqID(n.p.selrow),n.rows[s.rowIndex]).attr("checked",i),n.p.selarrrow.splice(r,1),n.p.onSelectRow&&t&&n.p.onSelectRow.call(n,n.p.selrow,i),s=n.p.selarrrow[0],n.p.selrow=void 0===s?null:s)):"ui-subgrid"!==s.className&&(n.p.selrow&&b(n.rows.namedItem(n.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),n.p.selrow=s.id,b(s).addClass("ui-state-highlight").attr("aria-selected","true"),n.p.onSelectRow&&t&&n.p.onSelectRow.call(n,n.p.selrow,!0))))}))},resetSelection:function(){return this.each((function(){var e,t=this;t.p.multiselect?(b(t.p.selarrrow).each((function(i,s){e=t.rows.namedItem(s),b(e).removeClass("ui-state-highlight").attr("aria-selected","false"),b("#jqg_"+b.jgrid.jqID(s),e).attr("checked",!1)})),b("#cb_"+b.jgrid.jqID(t.p.id),t.grid.hDiv).attr("checked",!1),t.p.selarrrow=[]):t.p.selrow&&(b("tr#"+b.jgrid.jqID(t.p.selrow),t.grid.bDiv).removeClass("ui-state-highlight").attr("aria-selected","false"),t.p.selrow=null),t.p.savedRow=[]}))},getRowData:function(e){var t,i,s={},r=!1,n=0;return this.each((function(){var o,a,l=this;if(void 0===e)r=!0,t=[],i=l.rows.length;else{if(!(a=l.rows.namedItem(e)))return s;i=1}for(;n<i;)r&&(a=l.rows[n]),b("td",a).each((function(e){if("cb"!==(o=l.p.colModel[e].name)&&"subgrid"!==o)if(!0===l.p.treeGrid&&o==l.p.ExpandColumn)s[o]=b.jgrid.htmlDecode(b("span:first",this).html());else try{s[o]=b.unformat(this,{rowId:a.id,colModel:l.p.colModel[e]},e)}catch(e){s[o]=b.jgrid.htmlDecode(b(this).html())}})),n++,r&&(t.push(s),s={})})),t||s},delRowData:function(e){var t,i,s,r=!1;return this.each((function(){var n=this;if(!(t=n.rows.namedItem(e)))return!1;if(s=t.rowIndex,b(t).remove(),n.p.records--,n.p.reccount--,n.updatepager(!0,!1),r=!0,n.p.multiselect&&-1!=(i=b.inArray(e,n.p.selarrrow))&&n.p.selarrrow.splice(i,1),e==n.p.selrow&&(n.p.selrow=null),0===s&&r&&n.updateColumns(),!0===n.p.altRows&&r){var o=n.p.altclass;b(n.rows).each((function(e){e%2==1?b(this).addClass(o):b(this).removeClass(o)}))}})),r},setRowData:function(e,t,i){var s,r,n=!1;return this.each((function(){var o,a,l=this,d=typeof i;return!!l.grid&&(!!(a=l.rows.namedItem(e))&&(t&&b(this.p.colModel).each((function(i){s=this.name,void 0!==t[s]&&(o=l.formatter(e,t[s],i,t,"edit"),r=this.title?{title:b.jgrid.stripHtml(o)}:{},!0===l.p.treeGrid&&s==l.p.ExpandColumn?b("td:eq("+i+") > span:first",a).html(o).attr(r):b("td:eq("+i+")",a).html(o).attr(r),n=!0)})),void("string"===d?b(a).addClass(i):"object"===d&&b(a).css(i))))})),n},addRowData:function(e,t,i,s){i||(i="last");var r,n,o,a,l,d,c,h,u,p,f,g,m=!1,v="";return t&&(b.isArray(t)?(u=!0,i="last",p=e):(t=[t],u=!1),this.each((function(){var y=this,w=t.length;l=!0===y.p.rownumbers?1:0,o=!0===y.p.multiselect?1:0,a=!0===y.p.subGrid?1:0,u||(void 0!==e?e+="":(e=y.p.records+1+"",!1!==y.p.keyIndex&&(p=y.p.colModel[y.p.keyIndex+o+a+l].name,void 0!==t[0][p]&&(e=t[0][p])))),f=y.p.altclass;for(var _=0,x="",C=!!b.isFunction(y.p.afterInsertRow);_<w;){if(g=t[_],n="",u){try{e=g[p]}catch(t){e=y.p.records+1}x=!0===y.p.altRows&&(y.rows.length-1)%2==0?f:""}for(l&&(v=y.formatCol(l,1,""),n+='<td role="gridcell" aria-describedby="'+y.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+v+">0</td>"),o&&(h='<input role="checkbox" type="checkbox" id="jqg_'+e+'" class="cbox"/>',v=y.formatCol(l,1,""),n+='<td role="gridcell" aria-describedby="'+y.p.id+'_cb" '+v+">"+h+"</td>"),a&&(n+=b(y).jqGrid("addSubGridCell",o+l,1)),c=o+a+l;c<this.p.colModel.length;c++)r=this.p.colModel[c].name,h=y.formatter(e,g[r],c,g,"add"),v=y.formatCol(c,1,h),n+='<td role="gridcell" aria-describedby="'+y.p.id+"_"+r+'" '+v+">"+h+"</td>";if(n='<tr id="'+e+'" role="row" class="ui-widget-content jqgrow ui-row-'+y.p.direction+" "+x+'">'+n+"</tr>",!0===y.p.subGrid&&(n=b(n)[0],b(y).jqGrid("addSubGrid",n,o+l)),0===y.rows.length)b("table:first",y.grid.bDiv).append(n);else switch(i){case"last":b(y.rows[y.rows.length-1]).after(n);break;case"first":b(y.rows[0]).before(n);break;case"after":(d=y.rows.namedItem(s))&&(b(y.rows[d.rowIndex+1]).hasClass("ui-subgrid")?b(y.rows[d.rowIndex+1]).after(n):b(d).after(n));break;case"before":(d=y.rows.namedItem(s))&&(b(d).before(n),d=d.rowIndex)}y.p.records++,y.p.reccount++,y.grid.cols&&y.grid.cols.length||(y.grid.cols=y.rows[0].cells),("first"===i||"before"===i&&d<=1||1===y.rows.length)&&y.updateColumns(),C&&y.p.afterInsertRow.call(y,e,g,g),_++}!0!==y.p.altRows||u||("last"==i?(y.rows.length-1)%2==1&&b(y.rows[y.rows.length-1]).addClass(f):b(y.rows).each((function(e){e%2==1?b(this).addClass(f):b(this).removeClass(f)}))),y.updatepager(!0,!0),m=!0}))),m},footerData:function(e,t,i){var s,r,n=!1,o={};return void 0===e&&(e="get"),"boolean"!=typeof i&&(i=!0),e=e.toLowerCase(),this.each((function(){var a,l=this;return!(!l.grid||!l.p.footerrow)&&(("set"!=e||!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(t))&&(n=!0,void b(this.p.colModel).each((function(d){s=this.name,"set"==e?void 0!==t[s]&&(a=i?l.formatter("",t[s],d,t,"edit"):t[s],r=this.title?{title:b.jgrid.stripHtml(a)}:{},b("tr.footrow td:eq("+d+")",l.grid.sDiv).html(a).attr(r),n=!0):"get"==e&&(o[s]=b("tr.footrow td:eq("+d+")",l.grid.sDiv).html())}))))})),"get"==e?o:n},ShowHideCol:function(e,t){return this.each((function(){var i=this,s=!1;if(i.grid){"string"==typeof e&&(e=[e]);var r=""==(t="none"!=t?"":"none");b(this.p.colModel).each((function(n){-1!==b.inArray(this.name,e)&&this.hidden===r&&(b("tr",i.grid.hDiv).each((function(){b("th:eq("+n+")",this).css("display",t)})),b(i.rows).each((function(e){b("td:eq("+n+")",i.rows[e]).css("display",t)})),i.p.footerrow&&b("td:eq("+n+")",i.grid.sDiv).css("display",t),"none"==t?i.p.tblwidth-=this.width:i.p.tblwidth+=this.width,this.hidden=!r,s=!0)})),!0===s&&(b("table:first",i.grid.hDiv).width(i.p.tblwidth),b("table:first",i.grid.bDiv).width(i.p.tblwidth),i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft,i.p.footerrow&&(b("table:first",i.grid.sDiv).width(i.p.tblwidth),i.grid.sDiv.scrollLeft=i.grid.bDiv.scrollLeft))}}))},hideCol:function(e){return this.each((function(){b(this).jqGrid("ShowHideCol",e,"none")}))},showCol:function(e){return this.each((function(){b(this).jqGrid("ShowHideCol",e,"")}))},remapColumns:function(e,t,i){function s(t){var i;i=t.length?b.makeArray(t):b.extend({},t),b.each(e,(function(e){t[e]=i[this]}))}function r(t,i){b(">tr"+(i||""),t).each((function(){var t=this,i=b.makeArray(t.cells);b.each(e,(function(){var e=i[this];e&&t.appendChild(e)}))}))}var n=this.get(0);s(n.p.colModel),s(n.p.colNames),s(n.grid.headers),r(b("thead:first",n.grid.hDiv),i&&":not(.ui-jqgrid-labels)"),t&&r(b("tbody:first",n.grid.bDiv),".jqgrow"),n.p.footerrow&&r(b("tbody:first",n.grid.sDiv)),n.p.remapColumns&&(n.p.remapColumns.length?s(n.p.remapColumns):n.p.remapColumns=b.makeArray(e)),n.p.lastsort=b.inArray(n.p.lastsort,e),n.p.treeGrid&&(n.p.expColInd=b.inArray(n.p.expColInd,e))},setGridWidth:function(e,t){return this.each((function(){var i,s,r,n,o=this,a=0,l=o.p.cellLayout,d=0,c=!1,h=o.p.scrollOffset,u=0,p=0,f=0;if(o.grid&&("boolean"!=typeof t&&(t=o.p.shrinkToFit),!isNaN(e)&&(e=parseInt(e,10),o.grid.width=o.p.width=e,b("#gbox_"+o.p.id).css("width",e+"px"),b("#gview_"+o.p.id).css("width",e+"px"),b(o.grid.bDiv).css("width",e+"px"),b(o.grid.hDiv).css("width",e+"px"),o.p.pager&&b(o.p.pager).css("width",e+"px"),o.p.toppager&&b(o.p.toppager).css("width",e+"px"),!0===o.p.toolbar[0]&&(b(o.grid.uDiv).css("width",e+"px"),"both"==o.p.toolbar[1]&&b(o.grid.ubDiv).css("width",e+"px")),o.p.footerrow&&b(o.grid.sDiv).css("width",e+"px"),!1===t&&!0===o.p.forceFit&&(o.p.forceFit=!1),!0===t&&(b.browser.safari&&(l=0),b.each(o.p.colModel,(function(){!1===this.hidden&&(a+=parseInt(this.width,10),this.fixed?(p+=this.width,u+=this.width+l):d++,f++)})),0!==d)))){o.p.tblwidth=a,r=e-l*d-u,isNaN(o.p.height)||b(o.grid.bDiv)[0].clientHeight<b(o.grid.bDiv)[0].scrollHeight&&(c=!0,r-=h),a=0;var g=o.grid.cols.length>0;b.each(o.p.colModel,(function(e){!1!==this.hidden||this.fixed||(i=Math.round(r*this.width/(o.p.tblwidth-p)))<0||(this.width=i,a+=i,o.grid.headers[e].width=i,o.grid.headers[e].el.style.width=i+"px",o.p.footerrow&&(o.grid.footers[e].style.width=i+"px"),g&&(o.grid.cols[e].style.width=i+"px"),s=e)})),n=0,c?e-u-(a+l*d)!==h&&(n=e-u-(a+l*d)-h):1!==Math.abs(e-u-(a+l*d))&&(n=e-u-(a+l*d)),o.p.colModel[s].width+=n,o.p.tblwidth=a+n+p+l*f,o.p.tblwidth>e?(c=o.p.tblwidth-parseInt(e,10),o.p.tblwidth=e,i=o.p.colModel[s].width-=c):i=o.p.colModel[s].width,o.grid.headers[s].width=i,o.grid.headers[s].el.style.width=i+"px",g&&(o.grid.cols[s].style.width=i+"px"),b("table:first",o.grid.bDiv).css("width",o.p.tblwidth+"px"),b("table:first",o.grid.hDiv).css("width",o.p.tblwidth+"px"),o.grid.hDiv.scrollLeft=o.grid.bDiv.scrollLeft,o.p.footerrow&&(o.grid.footers[s].style.width=i+"px",b("table:first",o.grid.sDiv).css("width",o.p.tblwidth+"px"))}}))},setGridHeight:function(e){return this.each((function(){var t=this;t.grid&&(b(t.grid.bDiv).css({height:e+(isNaN(e)?"":"px")}),t.p.height=e,t.p.scroll&&t.grid.populateVisible())}))},setCaption:function(e){return this.each((function(){this.p.caption=e,b("span.ui-jqgrid-title",this.grid.cDiv).html(e),b(this.grid.cDiv).show()}))},setLabel:function(e,t,i,s){return this.each((function(){var r=this,n=-1;if(r.grid&&(isNaN(e)?b(r.p.colModel).each((function(t){if(this.name==e)return n=t,!1})):n=parseInt(e,10),n>=0)){var o=b("tr.ui-jqgrid-labels th:eq("+n+")",r.grid.hDiv);if(t){var a=b(".s-ico",o);b("[id^=jqgh_]",o).empty().html(t).append(a),r.p.colNames[n]=t}i&&("string"==typeof i?b(o).addClass(i):b(o).css(i)),"object"==typeof s&&b(o).attr(s)}}))},setCell:function(e,t,i,s,r,n){return this.each((function(){var o,a,l=this,d=-1;if(l.grid&&(isNaN(t)?b(l.p.colModel).each((function(e){if(this.name==t)return d=e,!1})):d=parseInt(t,10),d>=0&&(o=l.rows.namedItem(e)))){var c=b("td:eq("+d+")",o);""===i&&!0!==n||(o=l.formatter(e,i,d,o,"edit"),a=l.p.colModel[d].title?{title:b.jgrid.stripHtml(o)}:{},l.p.treeGrid&&b(".tree-wrap",b(c)).length>0?b("span",b(c)).html(o).attr(a):b(c).html(o).attr(a)),"string"==typeof s?b(c).addClass(s):s&&b(c).css(s),"object"==typeof r&&b(c).attr(r)}}))},getCell:function(e,t){var i=!1;return this.each((function(){var s=this,r=-1;if(s.grid&&(isNaN(t)?b(s.p.colModel).each((function(e){if(this.name===t)return r=e,!1})):r=parseInt(t,10),r>=0)){var n=s.rows.namedItem(e);if(n)try{i=b.unformat(b("td:eq("+r+")",n),{rowId:n.id,colModel:s.p.colModel[r]},r)}catch(e){i=b.jgrid.htmlDecode(b("td:eq("+r+")",n).html())}}})),i},getCol:function(e,t,i){var s,r=[],n=0;return t="boolean"==typeof t&&t,void 0===i&&(i=!1),this.each((function(){var o=this,a=-1;if(o.grid&&(isNaN(e)?b(o.p.colModel).each((function(t){if(this.name===e)return a=t,!1})):a=parseInt(e,10),a>=0)){var l=o.rows.length,d=0;if(l&&l>0){for(;d<l;){try{s=b.unformat(b(o.rows[d].cells[a]),{rowId:o.rows[d].id,colModel:o.p.colModel[a]},a)}catch(e){s=b.jgrid.htmlDecode(o.rows[d].cells[a].innerHTML)}i?n+=parseFloat(s):t?r.push({id:o.rows[d].id,value:s}):r[d]=s,d++}if(i)switch(i.toLowerCase()){case"sum":r=n;break;case"avg":r=n/l;break;case"count":r=l}}}})),r},clearGridData:function(e){return this.each((function(){var t=this;t.grid&&("boolean"!=typeof e&&(e=!1),b("tbody:first tr",t.grid.bDiv).remove(),t.p.footerrow&&e&&b(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;"),t.p.selrow=null,t.p.selarrrow=[],t.p.savedRow=[],t.p.records=0,t.p.page="0",t.p.lastpage="0",t.p.reccount=0,t.updatepager(!0,!1))}))},getInd:function(e,t){var i,s=!1;return this.each((function(){(i=this.rows.namedItem(e))&&(s=!0===t?i:i.rowIndex)})),s}})}(jQuery),function(e){e.fmatter={},e.fn.fmatter=function(t,i,s,r,n){return function(t,i,s,r,n){var o=i;return e.fn.fmatter[t]&&(o=e.fn.fmatter[t](i,s,r,n)),o}(t,i,s=e.extend({},e.jgrid.formatter,s),r,n)},e.fmatter.util={NumberFormat:function(e,t){if(isNumber(e)||(e*=1),isNumber(e)){var i=e<0,s=e+"",r=t.decimalSeparator?t.decimalSeparator:".";if(isNumber(t.decimalPlaces)){var n=t.decimalPlaces;if(s=Math.pow(10,n),e=(s=Math.round(e*s)/s+"").lastIndexOf("."),n>0)for(e<0?e=(s+=r).length-1:"."!==r&&(s=s.replace(".",r));s.length-1-e<n;)s+="0"}if(t.thousandsSeparator){n=t.thousandsSeparator,e=(e=s.lastIndexOf(r))>-1?e:s.length,r=s.substring(e);for(var o=-1,a=e;a>0;a--)++o%3==0&&a!==e&&(!i||a>1)&&(r=n+r),r=s.charAt(a-1)+r;s=r}return s=t.prefix?t.prefix+s:s,t.suffix?s+t.suffix:s}return e},DateFormat:function(t,i,s,r){var n,o,a=function(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},l={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},d=0,c=["i18n"];if(c.i18n={dayNames:r.dayNames,monthNames:r.monthNames},t in r.masks&&(t=r.masks[t]),i.constructor===Date)d=i;else{for(i=i.split(/[\\\/:_;.\t\T\s-]/),n=0,o=(t=t.split(/[\\\/:_;.\t\T\s-]/)).length;n<o;n++)"M"==t[n]&&-1!==(d=e.inArray(i[n],c.i18n.monthNames))&&d<12&&(i[n]=d+1),"F"==t[n]&&-1!==(d=e.inArray(i[n],c.i18n.monthNames))&&d>11&&(i[n]=d+1-12),l[t[n].toLowerCase()]=parseInt(i[n],10);l.m=parseInt(l.m,10)-1,(d=l.y)>=70&&d<=99?l.y=1900+l.y:d>=0&&d<=69&&(l.y=2e3+l.y),d=new Date(l.y,l.m,l.d,l.h,l.i,l.s,l.u)}s in r.masks?s=r.masks[s]:s||(s="Y-m-d"),l=d.getHours(),t=d.getMinutes(),i=d.getDate(),n=d.getMonth()+1,o=d.getTimezoneOffset();var h=d.getSeconds(),u=d.getMilliseconds(),p=d.getDay(),f=d.getFullYear(),g=(p+6)%7+1,m=(new Date(f,n-1,i)-new Date(f,0,1))/864e5,v={d:a(i),D:c.i18n.dayNames[p],j:i,l:c.i18n.dayNames[p+7],N:g,S:r.S(i),w:p,z:m,W:g<5?Math.floor((m+g-1)/7)+1:Math.floor((m+g-1)/7)||((new Date(f-1,0,1).getDay()+6)%7<4?53:52),F:c.i18n.monthNames[n-1+12],m:a(n),M:c.i18n.monthNames[n-1],n:n,t:"?",L:"?",o:"?",Y:f,y:String(f).substring(2),a:l<12?r.AmPm[0]:r.AmPm[1],A:l<12?r.AmPm[2]:r.AmPm[3],B:"?",g:l%12||12,G:l,h:a(l%12||12),H:a(l),i:a(t),s:a(h),u:u,e:"?",I:"?",O:(o>0?"-":"+")+a(100*Math.floor(Math.abs(o)/60)+Math.abs(o)%60,4),P:"?",T:(String(d).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(d/1e3)};return s.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,(function(e){return e in v?v[e]:e.substring(1)}))}},e.fn.fmatter.defaultFormat=function(e,t){return isValue(e)&&""!==e?e:t.defaultValue?t.defaultValue:"&#160;"},e.fn.fmatter.email=function(t,i){return isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'">'+t+"</a>"},e.fn.fmatter.checkbox=function(t,i){var s=e.extend({},i.checkbox);return isUndefined(i.colModel.formatoptions)||(s=e.extend({},s,i.colModel.formatoptions)),i=!0===s.disabled?"disabled":"",(isEmpty(t)||isUndefined(t))&&(t=e.fn.fmatter.defaultFormat(t,s)),'<input type="checkbox" '+((t=(t+="").toLowerCase()).search(/(false|0|no|off)/i)<0?" checked='checked' ":"")+' value="'+t+'" offval="no" '+i+"/>"},e.fn.fmatter.link=function(t,i){var s={target:i.target},r="";return isUndefined(i.colModel.formatoptions)||(s=e.extend({},s,i.colModel.formatoptions)),s.target&&(r="target="+s.target),isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):"<a "+r+' href="'+t+'">'+t+"</a>"},e.fn.fmatter.showlink=function(t,i){var s={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName},r="";return isUndefined(i.colModel.formatoptions)||(s=e.extend({},s,i.colModel.formatoptions)),s.target&&(r="target="+s.target),s=s.baseLinkUrl+s.showAction+"?"+s.idName+"="+i.rowId+s.addParam,isString(t)?"<a "+r+' href="'+s+'">'+t+"</a>":e.fn.fmatter.defaultFormat(t,i)},e.fn.fmatter.integer=function(t,i){var s=e.extend({},i.integer);return isUndefined(i.colModel.formatoptions)||(s=e.extend({},s,i.colModel.formatoptions)),isEmpty(t)?s.defaultValue:e.fmatter.util.NumberFormat(t,s)},e.fn.fmatter.number=function(t,i){var s=e.extend({},i.number);return isUndefined(i.colModel.formatoptions)||(s=e.extend({},s,i.colModel.formatoptions)),isEmpty(t)?s.defaultValue:e.fmatter.util.NumberFormat(t,s)},e.fn.fmatter.currency=function(t,i){var s=e.extend({},i.currency);return isUndefined(i.colModel.formatoptions)||(s=e.extend({},s,i.colModel.formatoptions)),isEmpty(t)?s.defaultValue:e.fmatter.util.NumberFormat(t,s)},e.fn.fmatter.date=function(t,i,s,r){return s=e.extend({},i.date),isUndefined(i.colModel.formatoptions)||(s=e.extend({},s,i.colModel.formatoptions)),s.reformatAfterEdit||"edit"!=r?isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):e.fmatter.util.DateFormat(s.srcformat,t,s.newformat,s):e.fn.fmatter.defaultFormat(t,i)},e.fn.fmatter.select=function(t,i){t+="";var s=!1,r=[];if(isUndefined(i.colModel.editoptions)||(s=i.colModel.editoptions.value),s){var n,o=!0===i.colModel.editoptions.multiple,a=[];if(o&&(a=t.split(","),a=e.map(a,(function(t){return e.trim(t)}))),isString(s)){for(var l=s.split(";"),d=0,c=0;c<l.length;c++)if((n=l[c].split(":")).length>2&&(n[1]=jQuery.map(n,(function(e,t){if(t>0)return e})).join(":")),o)jQuery.inArray(n[0],a)>-1&&(r[d]=n[1],d++);else if(e.trim(n[0])==e.trim(t)){r[0]=n[1];break}}else isObject(s)&&(o?r=jQuery.map(a,(function(e){return s[e]})):r[0]=s[t]||"")}return""==(t=r.join(", "))?e.fn.fmatter.defaultFormat(t,i):t},e.fn.fmatter.rowactions=function(t,i,s,r){switch(s){case"edit":s=function(){e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).show(),e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).hide()},e("#"+i).jqGrid("editRow",t,r,null,null,null,{oper:"edit"},s,null,s),e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).hide(),e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).show();break;case"save":e("#"+i).jqGrid("saveRow",t,null,null),e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).show(),e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).hide();break;case"cancel":e("#"+i).jqGrid("restoreRow",t),e("tr#"+t+" div.ui-inline-edit, tr#"+t+" div.ui-inline-del","#"+i).show(),e("tr#"+t+" div.ui-inline-save, tr#"+t+" div.ui-inline-cancel","#"+i).hide()}},e.fn.fmatter.actions=function(t,i){t={keys:!1,editbutton:!0,delbutton:!0},isUndefined(i.colModel.formatoptions)||(t=e.extend(t,i.colModel.formatoptions));var s,r=i.rowId,n="";return void 0===r||isEmpty(r)?"":(t.editbutton&&(s="onclick=$.fn.fmatter.rowactions('"+r+"','"+i.gid+"','edit',"+t.keys+");",n=n+"<div style='margin-left:8px;'><div title='"+e.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+s+"><span class='ui-icon ui-icon-pencil'></span></div>"),t.delbutton&&(s="onclick=jQuery('#"+i.gid+"').jqGrid('delGridRow','"+r+"');",n=n+"<div title='"+e.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+s+"><span class='ui-icon ui-icon-trash'></span></div>"),s="onclick=$.fn.fmatter.rowactions('"+r+"','"+i.gid+"','save',false);",n=n+"<div title='"+e.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save'><span class='ui-icon ui-icon-disk' "+s+"></span></div>",s="onclick=$.fn.fmatter.rowactions('"+r+"','"+i.gid+"','cancel',false);",n+"<div title='"+e.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel'><span class='ui-icon ui-icon-cancel' "+s+"></span></div></div>")},e.unformat=function(t,i,s,r){var n,o=i.colModel.formatter,a=i.colModel.formatoptions||{},l=/([\.\*\_\'\(\)\{\}\+\?\\])/g;if(unformatFunc=i.colModel.unformat||e.fn.fmatter[o]&&e.fn.fmatter[o].unformat,"undefined"!=typeof unformatFunc&&isFunction(unformatFunc))n=unformatFunc(e(t).text(),i,t);else if(void 0!==o&&isString(o))switch(n=e.jgrid.formatter||{},o){case"integer":i=(a=e.extend({},n.integer,a)).thousandsSeparator.replace(l,"\\$1"),i=new RegExp(i,"g"),n=e(t).text().replace(i,"");break;case"number":i=(a=e.extend({},n.number,a)).thousandsSeparator.replace(l,"\\$1"),i=new RegExp(i,"g"),n=e(t).text().replace(i,"").replace(a.decimalSeparator,".");break;case"currency":i=(a=e.extend({},n.currency,a)).thousandsSeparator.replace(l,"\\$1"),i=new RegExp(i,"g"),n=e(t).text().replace(i,"").replace(a.decimalSeparator,".").replace(a.prefix,"").replace(a.suffix,"");break;case"checkbox":a=i.colModel.editoptions?i.colModel.editoptions.value.split(":"):["Yes","No"],n=e("input",t).attr("checked")?a[0]:a[1];break;case"select":n=e.unformat.select(t,i,s,r);break;case"actions":return"";default:n=e(t).text()}return n||(!0===r?e(t).text():e.jgrid.htmlDecode(e(t).html()))},e.unformat.select=function(t,i,s,r){if(s=[],t=e(t).text(),!0===r)return t;if((i=e.extend({},i.colModel.editoptions)).value){var n,o=i.value;if(r=[],(i=!0===i.multiple)&&(r=t.split(","),r=e.map(r,(function(t){return e.trim(t)}))),isString(o)){for(var a=o.split(";"),l=0,d=0;d<a.length;d++)if(n=a[d].split(":"),i)jQuery.inArray(n[1],r)>-1&&(s[l]=n[0],l++);else if(e.trim(n[1])==e.trim(t)){s[0]=n[0];break}}else isObject(o)&&(i||(r[0]=t),s=jQuery.map(r,(function(t){var i;if(e.each(o,(function(e,s){if(s==t)return i=e,!1})),i)return i})));return s.join(", ")}return t||""},isValue=function(e){return isObject(e)||isString(e)||isNumber(e)||isBoolean(e)},isBoolean=function(e){return"boolean"==typeof e},isNull=function(e){return null===e},isNumber=function(e){return"number"==typeof e&&isFinite(e)},isString=function(e){return"string"==typeof e},isEmpty=function(t){return!(!isString(t)&&isValue(t))&&(!isValue(t)||""===(t=e.trim(t).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"")))},isUndefined=function(e){return void 0===e},isObject=function(e){return e&&("object"==typeof e||isFunction(e))||!1},isFunction=function(e){return"function"==typeof e}}(jQuery),function(e){e.jgrid.extend({getColProp:function(e){var t={},i=this[0];if(i.grid){i=i.p.colModel;for(var s=0;s<i.length;s++)if(i[s].name==e){t=i[s];break}return t}},setColProp:function(t,i){return this.each((function(){if(this.grid&&i)for(var s=this.p.colModel,r=0;r<s.length;r++)if(s[r].name==t){e.extend(this.p.colModel[r],i);break}}))},sortGrid:function(e,t,i){return this.each((function(){var s=this,r=-1;if(s.grid){e||(e=s.p.sortname);for(var n=0;n<s.p.colModel.length;n++)if(s.p.colModel[n].index==e||s.p.colModel[n].name==e){r=n;break}-1!=r&&("boolean"!=typeof(n=s.p.colModel[r].sortable)&&(n=!0),"boolean"!=typeof t&&(t=!1),n&&s.sortData("jqgh_"+e,r,t,i))}}))},GridDestroy:function(){return this.each((function(){if(this.grid){this.p.pager&&e(this.p.pager).remove();var t=this.id;try{e("#gbox_"+t).remove()}catch(e){}}}))},GridUnload:function(){return this.each((function(){if(this.grid){var t={id:e(this).attr("id"),cl:e(this).attr("class")};this.p.pager&&e(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var i=document.createElement("table");e(i).attr({id:t.id}),i.className=t.cl,t=this.id,e(i).removeClass("ui-jqgrid-btable"),1===e(this.p.pager).parents("#gbox_"+t).length?(e(i).insertBefore("#gbox_"+t).show(),e(this.p.pager).insertBefore("#gbox_"+t)):e(i).insertBefore("#gbox_"+t).show(),e("#gbox_"+t).remove()}}))},setGridState:function(t){return this.each((function(){if(this.grid){var i=this;"hidden"==t?(e(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+i.p.id).slideUp("fast"),i.p.pager&&e(i.p.pager).slideUp("fast"),i.p.toppager&&e(i.p.toppager).slideUp("fast"),!0===i.p.toolbar[0]&&("both"==i.p.toolbar[1]&&e(i.grid.ubDiv).slideUp("fast"),e(i.grid.uDiv).slideUp("fast")),i.p.footerrow&&e(".ui-jqgrid-sdiv","#gbox_"+i.p.id).slideUp("fast"),e(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden"):"visible"==t&&(e(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+i.p.id).slideDown("fast"),i.p.pager&&e(i.p.pager).slideDown("fast"),i.p.toppager&&e(i.p.toppager).slideDown("fast"),!0===i.p.toolbar[0]&&("both"==i.p.toolbar[1]&&e(i.grid.ubDiv).slideDown("fast"),e(i.grid.uDiv).slideDown("fast")),i.p.footerrow&&e(".ui-jqgrid-sdiv","#gbox_"+i.p.id).slideDown("fast"),e(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),i.p.gridstate="visible")}}))},updateGridRows:function(t,i,s){var r,n,o=!1;return this.each((function(){var a,l,d,c,h=this;if(!h.grid)return!1;i||(i="id"),t&&t.length>0&&e(t).each((function(){if(d=this,l=h.rows.namedItem(d[i])){if(c=d[i],!0===s&&!0===h.p.jsonReader.repeatitems){h.p.jsonReader.cell&&(d=d[h.p.jsonReader.cell]);for(var t=0;t<d.length;t++)a=h.formatter(c,d[t],t,d,"edit"),n=h.p.colModel[t].title?{title:e.jgrid.stripHtml(a)}:{},!0===h.p.treeGrid&&r==h.p.ExpandColumn?e("td:eq("+t+") > span:first",l).html(a).attr(n):e("td:eq("+t+")",l).html(a).attr(n);return o=!0}e(h.p.colModel).each((function(t){r=!0===s&&this.jsonmap||this.name,void 0!==d[r]&&(a=h.formatter(c,d[r],t,d,"edit"),n=this.title?{title:e.jgrid.stripHtml(a)}:{},!0===h.p.treeGrid&&r==h.p.ExpandColumn?e("td:eq("+t+") > span:first",l).html(a).attr(n):e("td:eq("+t+")",l).html(a).attr(n),o=!0)}))}}))})),o},filterGrid:function(t,i){return i=e.extend({gridModel:!1,gridNames:!1,gridToolbar:!1,filterModel:[],formtype:"horizontal",autosearch:!0,formclass:"filterform",tableclass:"filtertable",buttonclass:"filterbutton",searchButton:"Search",clearButton:"Clear",enableSearch:!1,enableClear:!1,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,url:"",marksearched:!0},i||{}),this.each((function(){var s=this;if(this.p=i,0===this.p.filterModel.length&&!1===this.p.gridModel)alert("No filter is set");else if(t){this.p.gridid=-1!=t.indexOf("#")?t:"#"+t;var r=e(this.p.gridid).jqGrid("getGridParam","colModel");if(r){if(!0===this.p.gridModel){var n,o=e(this.p.gridid)[0];e.each(r,(function(e){var t=[];this.search=!1!==this.search,n=!(!this.editrules||!0!==this.editrules.searchhidden)||!0!==this.hidden,!0===this.search&&!0===n&&(t.label=!0===s.p.gridNames?o.p.colNames[e]:"",t.name=this.name,t.index=this.index||this.name,t.stype=this.edittype||"text","select"!=t.stype&&(t.stype="text"),t.defval=this.defval||"",t.surl=this.surl||"",t.sopt=this.editoptions||{},t.width=this.width,s.p.filterModel.push(t))}))}else e.each(s.p.filterModel,(function(){for(var e=0;e<r.length;e++)if(this.name==r[e].name){this.index=r[e].index||this.name;break}this.index||(this.index=this.name)}));var a=function(){var t,i,r={},n=0,o=e(s.p.gridid)[0];o.p.searchdata={},e.isFunction(s.p.beforeSearch)&&s.p.beforeSearch(),e.each(s.p.filterModel,(function(){if(i=this.index,"select"===this.stype)if(t=e("select[name="+i+"]",s).val())r[i]=t,s.p.marksearched&&e("#jqgh_"+this.name,o.grid.hDiv).addClass("dirty-cell"),n++;else{s.p.marksearched&&e("#jqgh_"+this.name,o.grid.hDiv).removeClass("dirty-cell");try{delete o.p.postData[this.index]}catch(e){}}else if(t=e("input[name="+i+"]",s).val())r[i]=t,s.p.marksearched&&e("#jqgh_"+this.name,o.grid.hDiv).addClass("dirty-cell"),n++;else{s.p.marksearched&&e("#jqgh_"+this.name,o.grid.hDiv).removeClass("dirty-cell");try{delete o.p.postData[this.index]}catch(e){}}}));var a,l=n>0;e.extend(o.p.postData,r),s.p.url&&(a=e(o).jqGrid("getGridParam","url"),e(o).jqGrid("setGridParam",{url:s.p.url})),e(o).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]),a&&e(o).jqGrid("setGridParam",{url:a}),e.isFunction(s.p.afterSearch)&&s.p.afterSearch()},l=function(){var t,i,r={},n=0,o=e(s.p.gridid)[0];e.isFunction(s.p.beforeClear)&&s.p.beforeClear(),e.each(s.p.filterModel,(function(){switch(i=this.index,t=this.defval?this.defval:"",this.stype||(this.stype="text"),this.stype){case"select":var a;if(e("select[name="+i+"] option",s).each((function(i){if(0===i&&(this.selected=!0),e(this).text()==t)return this.selected=!0,a=e(this).val(),!1})),a)r[i]=a,s.p.marksearched&&e("#jqgh_"+this.name,o.grid.hDiv).addClass("dirty-cell"),n++;else{s.p.marksearched&&e("#jqgh_"+this.name,o.grid.hDiv).removeClass("dirty-cell");try{delete o.p.postData[this.index]}catch(e){}}break;case"text":if(e("input[name="+i+"]",s).val(t),t)r[i]=t,s.p.marksearched&&e("#jqgh_"+this.name,o.grid.hDiv).addClass("dirty-cell"),n++;else{s.p.marksearched&&e("#jqgh_"+this.name,o.grid.hDiv).removeClass("dirty-cell");try{delete o.p.postData[this.index]}catch(e){}}}}));var a,l=n>0;e.extend(o.p.postData,r),s.p.url&&(a=e(o).jqGrid("getGridParam","url"),e(o).jqGrid("setGridParam",{url:s.p.url})),e(o).jqGrid("setGridParam",{search:l}).trigger("reloadGrid",[{page:1}]),a&&e(o).jqGrid("setGridParam",{url:a}),e.isFunction(s.p.afterClear)&&s.p.afterClear()},d=e("<form name='SearchForm' style=display:inline;' class='"+this.p.formclass+"'></form>"),c=e("<table class='"+this.p.tableclass+"' cellspacing='0' cellpading='0' border='0'><tbody></tbody></table>");e(d).append(c),function(){var t,i,r,n,o=document.createElement("tr");"horizontal"==s.p.formtype&&e(c).append(o),e.each(s.p.filterModel,(function(i){r=document.createElement("td"),e(r).append("<label for='"+this.name+"'>"+this.label+"</label>"),n=document.createElement("td");var l=this;switch(this.stype||(this.stype="text"),this.stype){case"select":if(this.surl)e(n).load(this.surl,(function(){l.defval&&e("select",this).val(l.defval),e("select",this).attr({name:l.index||l.name,id:"sg_"+l.name}),l.sopt&&e("select",this).attr(l.sopt),!0===s.p.gridToolbar&&l.width&&e("select",this).width(l.width),!0===s.p.autosearch&&e("select",this).change((function(){return a(),!1}))}));else if(l.sopt.value){var d,h=l.sopt.value,u=document.createElement("select");if(e(u).attr({name:l.index||l.name,id:"sg_"+l.name}).attr(l.sopt),"string"==typeof h){i=h.split(";");for(var p=0;p<i.length;p++)h=i[p].split(":"),(d=document.createElement("option")).value=h[0],d.innerHTML=h[1],h[1]==l.defval&&(d.selected="selected"),u.appendChild(d)}else if("object"==typeof h)for(p in h)h.hasOwnProperty(p)&&(i++,(d=document.createElement("option")).value=p,d.innerHTML=h[p],h[p]==l.defval&&(d.selected="selected"),u.appendChild(d));!0===s.p.gridToolbar&&l.width&&e(u).width(l.width),e(n).append(u),!0===s.p.autosearch&&e(u).change((function(){return a(),!1}))}break;case"text":u=this.defval?this.defval:"",e(n).append("<input type='text' name='"+(this.index||this.name)+"' id='sg_"+this.name+"' value='"+u+"'/>"),l.sopt&&e("input",n).attr(l.sopt),!0===s.p.gridToolbar&&l.width&&(e.browser.msie?e("input",n).width(l.width-4):e("input",n).width(l.width-2)),!0===s.p.autosearch&&e("input",n).keypress((function(e){return 13==(e.charCode?e.charCode:e.keyCode?e.keyCode:0)?(a(),!1):this}))}"horizontal"==s.p.formtype?(!0===s.p.gridToolbar&&!1===s.p.gridNames?e(o).append(n):e(o).append(r).append(n),e(o).append(n)):(t=document.createElement("tr"),e(t).append(r).append(n),e(c).append(t))})),n=document.createElement("td"),!0===s.p.enableSearch&&(i="<input type='button' id='sButton' class='"+s.p.buttonclass+"' value='"+s.p.searchButton+"'/>",e(n).append(i),e("input#sButton",n).click((function(){return a(),!1}))),!0===s.p.enableClear&&(i="<input type='button' id='cButton' class='"+s.p.buttonclass+"' value='"+s.p.clearButton+"'/>",e(n).append(i),e("input#cButton",n).click((function(){return l(),!1}))),!0!==s.p.enableClear&&!0!==s.p.enableSearch||("horizontal"==s.p.formtype?e(o).append(n):(t=document.createElement("tr"),e(t).append("<td>&#160;</td>").append(n),e(c).append(t)))}(),e(this).append(d),this.triggerSearch=a,this.clearSearch=l}else alert("Could not get grid colModel")}else alert("No target grid is set!")}))},filterToolbar:function(t){return t=e.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND"},t||{}),this.each((function(){function i(t,i){var s=e(t);s[0]&&jQuery.each(i,(function(){void 0!==this.data?s.bind(this.type,this.data,this.fn):s.bind(this.type,this.fn)}))}var s,r=this,n=function(){var i,s,n={},o=0,a={};e.each(r.p.colModel,(function(){s=this.index||this.name;var t=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"bw";switch(this.stype){case"select":if(i=e("select[name="+s+"]",r.grid.hDiv).val())n[s]=i,a[s]=t,o++;else try{delete r.p.postData[s]}catch(e){}break;case"text":if(i=e("input[name="+s+"]",r.grid.hDiv).val())n[s]=i,a[s]=t,o++;else try{delete r.p.postData[s]}catch(e){}}}));var l,d=o>0;if(t.stringResult){var c='{"groupOp":"'+t.groupOp+'","rules":[',h=0;e.each(n,(function(e,t){h>0&&(c+=","),c+='{"field":"'+e+'",',c+='"op":"'+a[e]+'",',c+='"data":"'+t+'"}',h++})),c+="]}",e.extend(r.p.postData,{filters:c})}else e.extend(r.p.postData,n);r.p.searchurl&&(l=r.p.url,e(r).jqGrid("setGridParam",{url:r.p.searchurl}));var u=!1;e.isFunction(t.beforeSearch)&&(u=t.beforeSearch.call(r)),u||e(r).jqGrid("setGridParam",{search:d}).trigger("reloadGrid",[{page:1}]),l&&e(r).jqGrid("setGridParam",{url:l}),e.isFunction(t.afterSearch)&&t.afterSearch()},o=e("<tr class='ui-search-toolbar' role='rowheader'></tr>");e.each(r.p.colModel,(function(){var a,l,d,c,h=this;if(l=e("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+r.p.direction+"'></th>"),a=e("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>"),!0===this.hidden&&e(l).css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),d=e.extend({},this.searchoptions||{}),this.search)switch(this.stype){case"select":var u;if(c=this.surl||d.dataUrl)e.ajax(e.extend({url:c,dataType:"html",complete:function(s){void 0!==d.buildSelect?(s=d.buildSelect(s))&&e(a).append(s):e(a).append(s.responseText),d.defaultValue&&e("select",a).val(d.defaultValue),e("select",a).attr({name:h.index||h.name,id:"gs_"+h.name}),d.attr&&e("select",a).attr(d.attr),e("select",a).css({width:"100%"}),void 0!==d.dataInit&&d.dataInit(e("select",a)[0]),void 0!==d.dataEvents&&i(e("select",a)[0],d.dataEvents),!0===t.autosearch&&e("select",a).change((function(){return n(),!1})),s=null}},e.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));else if(h.searchoptions&&h.searchoptions.value?u=h.searchoptions.value:h.editoptions&&h.editoptions.value&&(u=h.editoptions.value),u){var p,f;if((c=document.createElement("select")).style.width="100%",e(c).attr({name:h.index||h.name,id:"gs_"+h.name}),"string"==typeof u){u=u.split(";");for(var g=0;g<u.length;g++)p=u[g].split(":"),(f=document.createElement("option")).value=p[0],f.innerHTML=p[1],c.appendChild(f)}else if("object"==typeof u)for(p in u)u.hasOwnProperty(p)&&((f=document.createElement("option")).value=p,f.innerHTML=u[p],c.appendChild(f));d.defaultValue&&e(c).val(d.defaultValue),d.attr&&e(c).attr(d.attr),void 0!==d.dataInit&&d.dataInit(c),void 0!==d.dataEvents&&i(c,d.dataEvents),e(a).append(c),!0===t.autosearch&&e(c).change((function(){return n(),!1}))}break;case"text":c=d.defaultValue?d.defaultValue:"",e(a).append("<input type='text' style='width:95%;padding:0px;' name='"+(h.index||h.name)+"' id='gs_"+h.name+"' value='"+c+"'/>"),d.attr&&e("input",a).attr(d.attr),void 0!==d.dataInit&&d.dataInit(e("input",a)[0]),void 0!==d.dataEvents&&i(e("input",a)[0],d.dataEvents),!0===t.autosearch&&(t.searchOnEnter?e("input",a).keypress((function(e){return 13==(e.charCode?e.charCode:e.keyCode?e.keyCode:0)?(n(),!1):this})):e("input",a).keydown((function(e){switch(e.which){case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:s&&clearTimeout(s),s=setTimeout((function(){n()}),500)}})))}e(l).append(a),e(o).append(l)})),e("table thead",r.grid.hDiv).append(o),this.triggerToolbar=n,this.clearToolbar=function(i){var s,n,o={},a=0;i="boolean"!=typeof i||i,e.each(r.p.colModel,(function(){switch(s=this.searchoptions&&this.searchoptions.defaultValue?this.searchoptions.defaultValue:"",n=this.index||this.name,this.stype){case"select":var t;if(e("select[name="+n+"] option",r.grid.hDiv).each((function(i){if(0===i&&(this.selected=!0),e(this).text()==s)return this.selected=!0,t=e(this).val(),!1})),t)o[n]=t,a++;else try{delete r.p.postData[n]}catch(e){}break;case"text":if(e("input[name="+n+"]",r.grid.hDiv).val(s),s)o[n]=s,a++;else try{delete r.p.postData[n]}catch(e){}}}));var l,d=a>0;if(t.stringResult){var c='{"groupOp":"'+t.groupOp+'","rules":[',h=0;e.each(o,(function(e,t){h>0&&(c+=","),c+='{"field":"'+e+'",',c+='"op":"eq",',c+='"data":"'+t+'"}',h++})),c+="]}",e.extend(r.p.postData,{filters:c})}else e.extend(r.p.postData,o);r.p.searchurl&&(l=r.p.url,e(r).jqGrid("setGridParam",{url:r.p.searchurl}));var u=!1;e.isFunction(t.beforeClear)&&(u=t.beforeClear.call(r)),u||i&&e(r).jqGrid("setGridParam",{search:d}).trigger("reloadGrid",[{page:1}]),l&&e(r).jqGrid("setGridParam",{url:l}),e.isFunction(t.afterClear)&&t.afterClear()},this.toggleToolbar=function(){var t=e("tr.ui-search-toolbar",r.grid.hDiv);"none"==t.css("display")?t.show():t.hide()}}))}})}(jQuery);var showModal=function(e){e.w.show()},closeModal=function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal=function(e,t){if((t=jQuery.extend({jqm:!0,gb:""},t||{})).onClose){var i=t.onClose(e);if("boolean"==typeof i&&!i)return}if(jQuery.fn.jqm&&!0===t.jqm)jQuery(e).attr("aria-hidden","true").jqmHide();else{if(""!=t.gb)try{jQuery(".jqgrid-overlay:first",t.gb).hide()}catch(e){}jQuery(e).hide().attr("aria-hidden","true")}};function findPos(e){var t=0,i=0;if(e.offsetParent)do{t+=e.offsetLeft,i+=e.offsetTop}while(e=e.offsetParent);return[t,i]}var createModal=function(e,t,i,s,r,n){var o,a=document.createElement("div");o="rtl"==jQuery(i.gbox).attr("dir"),a.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",a.id=e.themodal;var l=document.createElement("div");l.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",l.id=e.modalhead,jQuery(l).append("<span class='ui-jqdialog-title'>"+i.caption+"</span>");var d=jQuery("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover((function(){d.addClass("ui-state-hover")}),(function(){d.removeClass("ui-state-hover")})).append("<span class='ui-icon ui-icon-closethick'></span>");jQuery(l).append(d),o?(a.dir="rtl",jQuery(".ui-jqdialog-title",l).css("float","right"),jQuery(".ui-jqdialog-titlebar-close",l).css("left","0.3em")):(a.dir="ltr",jQuery(".ui-jqdialog-title",l).css("float","left"),jQuery(".ui-jqdialog-titlebar-close",l).css("right","0.3em"));var c=document.createElement("div");if(jQuery(c).addClass("ui-jqdialog-content ui-widget-content").attr("id",e.modalcontent),jQuery(c).append(t),a.appendChild(c),jQuery(a).prepend(l),!0===n?jQuery("body").append(a):jQuery(a).insertBefore(s),void 0===i.jqModal&&(i.jqModal=!0),t={},jQuery.fn.jqm&&!0===i.jqModal?(0===i.left&&0===i.top&&(s=[],s=findPos(r),i.left=s[0]+4,i.top=s[1]+4),t.top=i.top+"px",t.left=i.left):0===i.left&&0===i.top||(t.left=i.left,t.top=i.top+"px"),jQuery("a.ui-jqdialog-titlebar-close",l).click((function(){var t=jQuery("#"+e.themodal).data("onClose")||i.onClose,s=jQuery("#"+e.themodal).data("gbox")||i.gbox;return hideModal("#"+e.themodal,{gb:s,jqm:i.jqModal,onClose:t}),!1})),0!==i.width&&i.width||(i.width=300),0!==i.height&&i.height||(i.height=200),i.zIndex||(i.zIndex=950),r=0,o&&t.left&&!n&&(r=jQuery(i.gbox).width()-(isNaN(i.width)?0:parseInt(i.width,10))-8,t.left=parseInt(t.left,10)+parseInt(r,10)),t.left&&(t.left+="px"),jQuery(a).css(jQuery.extend({width:isNaN(i.width)?"auto":i.width+"px",height:isNaN(i.height)?"auto":i.height+"px",zIndex:i.zIndex,overflow:"hidden"},t)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":e.modalhead,"aria-hidden":"true"}),void 0===i.drag&&(i.drag=!0),void 0===i.resize&&(i.resize=!0),i.drag)if(jQuery(l).css("cursor","move"),jQuery.fn.jqDrag)jQuery(a).jqDrag(l);else try{jQuery(a).draggable({handle:jQuery("#"+l.id)})}catch(e){}if(i.resize)if(jQuery.fn.jqResize)jQuery(a).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),jQuery("#"+e.themodal).jqResize(".jqResize",!!e.scrollelm&&"#"+e.scrollelm);else try{jQuery(a).resizable({handles:"se, sw",alsoResize:!!e.scrollelm&&"#"+e.scrollelm})}catch(e){}!0===i.closeOnEscape&&jQuery(a).keydown((function(t){27==t.which&&(t=jQuery("#"+e.themodal).data("onClose")||i.onClose,hideModal(this,{gb:i.gbox,jqm:i.jqModal,onClose:t}))}))},viewModal=function(e,t){if(t=jQuery.extend({toTop:!0,overlay:10,modal:!1,onShow:showModal,onHide:closeModal,gbox:"",jqm:!0,jqM:!0},t||{}),jQuery.fn.jqm&&!0===t.jqm)t.jqM?jQuery(e).attr("aria-hidden","false").jqm(t).jqmShow():jQuery(e).attr("aria-hidden","false").jqmShow();else{""!=t.gbox&&(jQuery(".jqgrid-overlay:first",t.gbox).show(),jQuery(e).data("gbox",t.gbox)),jQuery(e).show().attr("aria-hidden","false");try{jQuery(":input:visible",e)[0].focus()}catch(e){}}};function info_dialog(e,t,i,s){var r={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+e+"</b>",left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};jQuery.extend(r,s||{});var n=r.jqModal;if(jQuery.fn.jqm&&!n&&(n=!1),e="",r.buttons.length>0)for(s=0;s<r.buttons.length;s++)void 0===r.buttons[s].id&&(r.buttons[s].id="info_button_"+s),e+="<a href='javascript:void(0)' id='"+r.buttons[s].id+"' class='fm-button ui-state-default ui-corner-all'>"+r.buttons[s].text+"</a>";var o="<div id='info_id'>";o+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+(s=isNaN(r.dataheight)?r.dataheight:r.dataheight+"px")+";text-align:"+r.align+";'>"+t+"</div>",o+=i?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+r.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+i+"</a>"+e+"</div>":""!=e?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+r.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+e+"</div>":"",o+="</div>";try{"false"==jQuery("#info_dialog").attr("aria-hidden")&&hideModal("#info_dialog",{jqm:n}),jQuery("#info_dialog").remove()}catch(e){}createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},o,r,"","",!0),e&&jQuery.each(r.buttons,(function(e){jQuery("#"+this.id,"#info_id").bind("click",(function(){return r.buttons[e].onClick.call(jQuery("#info_dialog")),!1}))})),jQuery("#closedialog","#info_id").click((function(e){return hideModal("#info_dialog",{jqm:n}),!1})),jQuery(".fm-button","#info_dialog").hover((function(){jQuery(this).addClass("ui-state-hover")}),(function(){jQuery(this).removeClass("ui-state-hover")})),viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:r.modal,jqm:n});try{$("#info_dialog").focus()}catch(e){}}function createEl(e,t,i,s,r){function n(e,t){return jQuery.isFunction(t.dataInit)&&(e.id=t.id,t.dataInit(e),delete t.id,delete t.dataInit),t.dataEvents&&(jQuery.each(t.dataEvents,(function(){void 0!==this.data?jQuery(e).bind(this.type,this.data,this.fn):jQuery(e).bind(this.type,this.fn)})),delete t.dataEvents),t}var o="";switch(t.defaultValue&&delete t.defaultValue,e){case"textarea":o=document.createElement("textarea"),s?t.cols||jQuery(o).css({width:"98%"}):t.cols||(t.cols=20),t.rows||(t.rows=2),("&nbsp;"==i||"&#160;"==i||1==i.length&&160==i.charCodeAt(0))&&(i=""),o.value=i,t=n(o,t),jQuery(o).attr(t).attr({role:"textbox",multiline:"true"});break;case"checkbox":if((o=document.createElement("input")).type="checkbox",t.value){var a=t.value.split(":");i===a[0]&&(o.checked=!0,o.defaultChecked=!0),o.value=a[0],jQuery(o).attr("offval",a[1]);try{delete t.value}catch(e){}}else(a=i.toLowerCase()).search(/(false|0|no|off|undefined)/i)<0&&""!==a?(o.checked=!0,o.defaultChecked=!0,o.value=i):o.value="on",jQuery(o).attr("offval","off");t=n(o,t),jQuery(o).attr(t).attr("role","checkbox");break;case"select":(o=document.createElement("select")).setAttribute("role","select");var l,d=[];if(!0===t.multiple?(l=!0,o.multiple="multiple",$(o).attr("aria-multiselectable","true")):l=!1,void 0!==t.dataUrl)jQuery.ajax(jQuery.extend({url:t.dataUrl,type:"GET",complete:function(e,s){try{delete t.dataUrl,delete t.value}catch(e){}void 0!==t.buildSelect?(e=t.buildSelect(e),e=jQuery(e).html(),delete t.buildSelect):e=jQuery(e.responseText).html(),e&&(jQuery(o).append(e),void 0===(t=n(o,t)).size&&(t.size=l?3:1),l?(d=i.split(","),d=jQuery.map(d,(function(e){return jQuery.trim(e)}))):d[0]=jQuery.trim(i),jQuery(o).attr(t),setTimeout((function(){jQuery("option",o).each((function(e){if(0===e&&(this.selected=""),$(this).attr("role","option"),(jQuery.inArray(jQuery.trim(jQuery(this).text()),d)>-1||jQuery.inArray(jQuery.trim(jQuery(this).val()),d)>-1)&&(this.selected="selected",!l))return!1}))}),0))}},r||{}));else if(t.value){if(l?(d=i.split(","),d=jQuery.map(d,(function(e){return jQuery.trim(e)})),void 0===t.size&&(t.size=3)):t.size=1,"function"==typeof t.value&&(t.value=t.value()),"string"==typeof t.value)for(s=t.value.split(";"),a=0;a<s.length;a++)(r=s[a].split(":")).length>2&&(r[1]=jQuery.map(r,(function(e,t){if(t>0)return e})).join(":")),(e=document.createElement("option")).setAttribute("role","option"),e.value=r[0],e.innerHTML=r[1],l||jQuery.trim(r[0])!=jQuery.trim(i)&&jQuery.trim(r[1])!=jQuery.trim(i)||(e.selected="selected"),l&&(jQuery.inArray(jQuery.trim(r[1]),d)>-1||jQuery.inArray(jQuery.trim(r[0]),d)>-1)&&(e.selected="selected"),o.appendChild(e);else if("object"==typeof t.value)for(a in s=t.value)s.hasOwnProperty(a)&&((e=document.createElement("option")).setAttribute("role","option"),e.value=a,e.innerHTML=s[a],l||jQuery.trim(a)!=jQuery.trim(i)&&jQuery.trim(s[a])!=jQuery.trim(i)||(e.selected="selected"),l&&(jQuery.inArray(jQuery.trim(s[a]),d)>-1||jQuery.inArray(jQuery.trim(a),d)>-1)&&(e.selected="selected"),o.appendChild(e));t=n(o,t);try{delete t.value}catch(e){}jQuery(o).attr(t)}break;case"text":case"password":case"button":a="button"==e?"button":"textbox",(o=document.createElement("input")).type=e,o.value=i,t=n(o,t),"button"!=e&&(s?t.size||jQuery(o).css({width:"98%"}):t.size||(t.size=20)),jQuery(o).attr(t).attr("role",a);break;case"image":case"file":(o=document.createElement("input")).type=e,t=n(o,t),jQuery(o).attr(t);break;case"custom":o=document.createElement("span");try{if(!jQuery.isFunction(t.custom_element))throw"e1";var c=t.custom_element.call(this,i,t);if(!c)throw"e2";c=jQuery(c).addClass("customelement").attr({id:t.id,name:t.name}),jQuery(o).empty().append(c)}catch(e){"e1"==e&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose),info_dialog(jQuery.jgrid.errors.errcap,"e2"==e?"function 'custom_element' "+jQuery.jgrid.edit.msg.novalue:e.message,jQuery.jgrid.edit.bClose)}}return o}function daysInFebruary(e){return e%4!=0||e%100==0&&e%400!=0?28:29}function DaysArray(e){for(var t=1;t<=e;t++)this[t]=31,4!=t&&6!=t&&9!=t&&11!=t||(this[t]=30),2==t&&(this[t]=29);return this}function checkDate(e,t){var i,s,r={};if(i=-1!=(e=e.toLowerCase()).indexOf("/")?"/":-1!=e.indexOf("-")?"-":-1!=e.indexOf(".")?".":"/",e=e.split(i),3!=(t=t.split(i)).length)return!1;i=-1;for(var n,o=-1,a=-1,l=0;l<e.length;l++)n=isNaN(t[l])?0:parseInt(t[l],10),r[e[l]]=n,-1!=(n=e[l]).indexOf("y")&&(i=l),-1!=n.indexOf("m")&&(a=l),-1!=n.indexOf("d")&&(o=l);return n="y"==e[i]||"yyyy"==e[i]?4:"yy"==e[i]?2:-1,l=DaysArray(12),-1!==i&&(s=r[e[i]].toString(),2==n&&1==s.length&&(n=1),s.length==n&&(0!==r[e[i]]||"00"==t[i])&&(-1!==a&&(!((s=r[e[a]].toString()).length<1||r[e[a]]<1||r[e[a]]>12)&&(-1!==o&&!((s=r[e[o]].toString()).length<1||r[e[o]]<1||r[e[o]]>31||2==r[e[a]]&&r[e[o]]>daysInFebruary(r[e[i]])||r[e[o]]>l[r[e[a]]])))))}function isEmpty(e){return!(!e.match(/^s+$/)&&""!=e)}function checkTime(e){if(!isEmpty(e)){if(!(e=e.match(/^(\d{1,2}):(\d{2})([ap]m)?$/)))return!1;if(e[3]){if(e[1]<1||e[1]>12)return!1}else if(e[1]>23)return!1;if(e[2]>59)return!1}return!0}function checkValues(e,t,i){var s,r,n;if("string"==typeof t){for(r=0,len=i.p.colModel.length;r<len;r++)if(i.p.colModel[r].name==t){s=i.p.colModel[r].editrules,t=r;try{n=i.p.colModel[r].formoptions.label}catch(e){}break}}else t>=0&&(s=i.p.colModel[t].editrules);if(s){if(n||(n=i.p.colNames[t]),!0===s.required&&(e.match(/^s+$/)||""==e))return[!1,n+": "+jQuery.jgrid.edit.msg.required,""];if(r=!1!==s.required,!0===s.number&&(!1!==r||!isEmpty(e))&&isNaN(e))return[!1,n+": "+jQuery.jgrid.edit.msg.number,""];if(void 0!==s.minValue&&!isNaN(s.minValue)&&parseFloat(e)<parseFloat(s.minValue))return[!1,n+": "+jQuery.jgrid.edit.msg.minValue+" "+s.minValue,""];if(void 0!==s.maxValue&&!isNaN(s.maxValue)&&parseFloat(e)>parseFloat(s.maxValue))return[!1,n+": "+jQuery.jgrid.edit.msg.maxValue+" "+s.maxValue,""];if(!0===s.email&&!(!1===r&&isEmpty(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)))return[!1,n+": "+jQuery.jgrid.edit.msg.email,""];if(!0===s.integer&&(!1!==r||!isEmpty(e))){if(isNaN(e))return[!1,n+": "+jQuery.jgrid.edit.msg.integer,""];if(e%1!=0||-1!=e.indexOf("."))return[!1,n+": "+jQuery.jgrid.edit.msg.integer,""]}if(!0===s.date&&!(!1===r&&isEmpty(e)||checkDate(t=i.p.colModel[t].datefmt||"Y-m-d",e)))return[!1,n+": "+jQuery.jgrid.edit.msg.date+" - "+t,""];if(!0===s.time&&!(!1===r&&isEmpty(e)||checkTime(e)))return[!1,n+": "+jQuery.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(!0===s.url&&!(!1===r&&isEmpty(e)||/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i.test(e)))return[!1,n+": "+jQuery.jgrid.edit.msg.url,""];if(!0===s.custom&&(!1!==r||!isEmpty(e)))return jQuery.isFunction(s.custom_func)?(e=s.custom_func.call(i,e,n),jQuery.isArray(e)?e:[!1,jQuery.jgrid.edit.msg.customarray,""]):[!1,jQuery.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}!function(e){var t=null;e.jgrid.extend({searchGrid:function(t){return t=e.extend({recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,multipleSearch:!1,cloneSearchRowOnAdd:!0,sopt:null,stringResult:void 0,onClose:null,useDataProxy:!1,overlay:!0},e.jgrid.search,t||{}),this.each((function(){function i(i){if(t.onClose){var s=t.onClose(i);if("boolean"==typeof s&&!s)return}i.hide(),!0===t.overlay&&e(".jqgrid-overlay:first","#gbox_"+r.p.id).hide()}function s(){var i=e(".ui-searchFilter").length;if(i>1){var s=e("#"+n).css("zIndex");e("#"+n).css({zIndex:parseInt(s,10)+i})}e("#"+n).show(),!0===t.overlay&&e(".jqgrid-overlay:first","#gbox_"+r.p.id).show();try{e(":input:visible","#"+n)[0].focus()}catch(e){}}var r=this;if(r.grid&&e.fn.searchFilter){var n="fbox_"+r.p.id;if(!0===t.recreateFilter&&e("#"+n).remove(),null!=e("#"+n).html())e.isFunction(t.beforeShowSearch)&&t.beforeShowSearch(e("#"+n)),s(),e.isFunction(t.afterShowSearch)&&t.afterShowSearch(e("#"+n));else{var o,a,l,d=[],c=e("#"+r.p.id).jqGrid("getGridParam","colNames"),h=e("#"+r.p.id).jqGrid("getGridParam","colModel"),u=["eq","ne","lt","le","gt","ge","bw","bn","in","ni","ew","en","cn","nc"],p=[];if(null!==t.sopt)for(o=l=0;o<t.sopt.length;o++)-1!=(a=e.inArray(t.sopt[o],u))&&(p[l]={op:t.sopt[o],text:t.odata[a]},l++);else for(o=0;o<u.length;o++)p[o]={op:u[o],text:t.odata[o]};if(e.each(h,(function(i,s){var r,n,h=void 0===s.search||s.search,p=!0===s.hidden;if(s=!0===(i=e.extend({},{text:c[i],itemval:s.index||s.name},this.searchoptions)).searchhidden,void 0!==i.sopt&&(l=0,i.ops=[],i.sopt.length>0))for(o=0;o<i.sopt.length;o++)-1!=(a=e.inArray(i.sopt[o],u))&&(i.ops[l]={op:i.sopt[o],text:t.odata[a]},l++);if((void 0===this.stype&&(this.stype="text"),"select"==this.stype&&void 0===i.dataUrl)&&(i.value?r=i.value:this.editoptions&&(r=this.editoptions.value),r))if(i.dataValues=[],"string"==typeof r)for(r=r.split(";"),o=0;o<r.length;o++)n=r[o].split(":"),i.dataValues[o]={value:n[0],text:n[1]};else if("object"==typeof r)for(n in o=0,r)r.hasOwnProperty(n)&&(i.dataValues[o]={value:n,text:r[n]},o++);(s&&h||h&&!p)&&d.push(i)})),d.length>0){if(e("<div id='"+n+"' role='dialog' tabindex='-1'></div>").insertBefore("#gview_"+r.p.id),void 0===t.stringResult&&(t.stringResult=t.multipleSearch),r.SearchFilter=e("#"+n).searchFilter(d,{groupOps:t.groupOps,operators:p,onClose:i,resetText:t.Reset,searchText:t.Find,windowTitle:t.caption,rulesText:t.rulesText,matchText:t.matchText,onSearch:function(s){var o=void 0!==s,a=e("#"+r.p.id),l={};!1===t.multipleSearch?(l[t.sField]=s.rules[0].field,l[t.sValue]=s.rules[0].data,l[t.sOper]=s.rules[0].op):l[t.sFilter]=s,a[0].p.search=o,e.extend(a[0].p.postData,l),a.trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&i(e("#"+n))},onReset:function(s){s=void 0!==s;var o=e("#"+r.p.id),a=[];o[0].p.search=s,!1===t.multipleSearch?a[t.sField]=a[t.sValue]=a[t.sOper]="":a[t.sFilter]="",e.extend(o[0].p.postData,a),o.trigger("reloadGrid",[{page:1}]),t.closeAfterReset&&i(e("#"+n))},stringResult:t.stringResult,ajaxSelectOptions:e.extend({},e.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}),clone:t.cloneSearchRowOnAdd}),e(".ui-widget-overlay","#"+n).remove(),"rtl"==r.p.direction&&e(".ui-closer","#"+n).css("float","left"),!0===t.drag)if(e("#"+n+" table thead tr:first td:first").css("cursor","move"),jQuery.fn.jqDrag)e("#"+n).jqDrag(e("#"+n+" table thead tr:first td:first"));else try{e("#"+n).draggable({handle:e("#"+n+" table thead tr:first td:first")})}catch(e){}!1===t.multipleSearch&&(e(".ui-del, .ui-add, .ui-del, .ui-add-last, .matchText, .rulesText","#"+n).hide(),e("select[name='groupOp']","#"+n).hide()),!0===t.multipleSearch&&!0===t.loadDefaults&&function(t,i){if("string"==typeof(i=t.p.postData[i.sFilter])&&(i=e.jgrid.parse(i)),i&&(i.groupOp&&t.SearchFilter.setGroupOp(i.groupOp),i.rules)){var s,r=0,n=i.rules.length;for(s=!1;r<n;r++)void 0!==(s=i.rules[r]).field&&void 0!==s.op&&void 0!==s.data&&(s=t.SearchFilter.setFilter({sfref:t.SearchFilter.$.find(".sf:last"),filter:e.extend({},s)}))&&t.SearchFilter.add()}}(r,t),e.isFunction(t.onInitializeSearch)&&t.onInitializeSearch(e("#"+n)),e.isFunction(t.beforeShowSearch)&&t.beforeShowSearch(e("#"+n)),s(),e.isFunction(t.afterShowSearch)&&t.afterShowSearch(e("#"+n)),!0===t.closeOnEscape&&e("#"+n).keydown((function(t){27==t.which&&i(e("#"+n))}))}}}}))},editGridRow:function(i,s){return t=s=e.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0},e.jgrid.edit,s||{}),this.each((function(){function r(t,i){0===t?e("#pData","#"+v+"_2").addClass("ui-state-disabled"):e("#pData","#"+v+"_2").removeClass("ui-state-disabled"),t==i?e("#nData","#"+v+"_2").addClass("ui-state-disabled"):e("#nData","#"+v+"_2").removeClass("ui-state-disabled")}function n(){var t=e(h).jqGrid("getDataIDs"),i=e("#id_g","#"+v).val();return[e.inArray(i,t),t]}function o(){var i=!0;return e("#FormError","#"+v).hide(),t.checkOnUpdate&&(u={},p={},a(),f=e.extend({},u,p),c(f,t._savedData)&&(e("#"+m).data("disabled",!0),e(".confirm","#"+b.themodal).show(),i=!1)),i}function a(){return e(".FormElement","#"+v).each((function(){var t=e(".customelement",this);if(t.length){var i=t[0].name;e.each(h.p.colModel,(function(){if(this.name==i&&this.editoptions&&e.isFunction(this.editoptions.custom_value)){try{if(u[i]=this.editoptions.custom_value(e("#"+i,"#"+v),"get"),void 0===u[i])throw"e1"}catch(t){info_dialog(jQuery.jgrid.errors.errcap,"e1"==t?"function 'custom_value' "+e.jgrid.edit.msg.novalue:t.message,jQuery.jgrid.edit.bClose)}return!0}}))}else{switch(e(this).get(0).type){case"checkbox":e(this).attr("checked")?u[this.name]=e(this).val():(t=e(this).attr("offval"),u[this.name]=t);break;case"select-one":u[this.name]=e("option:selected",this).val(),p[this.name]=e("option:selected",this).text();break;case"select-multiple":u[this.name]=e(this).val(),u[this.name]=u[this.name]?u[this.name].join(","):"";var s=[];e("option:selected",this).each((function(t,i){s[t]=e(i).text()})),p[this.name]=s.join(",");break;case"password":case"text":case"textarea":case"button":u[this.name]=e(this).val()}h.p.autoencode&&(u[this.name]=e.jgrid.htmlEncode(u[this.name]))}})),!0}function l(i,s,r){var n,o,a,l,d,c,u=0;(t.checkOnSubmit||t.checkOnUpdate)&&(t._savedData={},t._savedData[s.p.id+"_id"]=i);var p=s.p.colModel;if("_empty"==i)e(p).each((function(){n=this.name,l=e.extend({},this.editoptions||{}),null!=(a=e("#"+e.jgrid.jqID(n),"#"+r))[0]&&(d="",l.defaultValue?(d=e.isFunction(l.defaultValue)?l.defaultValue():l.defaultValue,"checkbox"==a[0].type?(c=d.toLowerCase()).search(/(false|0|no|off|undefined)/i)<0&&""!==c?(a[0].checked=!0,a[0].defaultChecked=!0,a[0].value=d):a.attr({checked:"",defaultChecked:""}):a.val(d)):"checkbox"==a[0].type?(a[0].checked=!1,a[0].defaultChecked=!1,d=e(a).attr("offval")):"select"==a[0].type.substr(0,6)?a[0].selectedIndex=0:a.val(d),(!0===t.checkOnSubmit||t.checkOnUpdate)&&(t._savedData[n]=d))})),e("#id_g","#"+r).val(i);else{var f=e(s).jqGrid("getInd",i,!0);f&&(e("td",f).each((function(a){if("cb"!==(n=p[a].name)&&"subgrid"!==n&&"rn"!==n&&!0===p[a].editable){if(n==s.p.ExpandColumn&&!0===s.p.treeGrid)o=e(this).text();else try{o=e.unformat(this,{rowId:i,colModel:p[a]},a)}catch(t){o=e(this).html()}switch(h.p.autoencode&&(o=e.jgrid.htmlDecode(o)),(!0===t.checkOnSubmit||t.checkOnUpdate)&&(t._savedData[n]=o),n=e.jgrid.jqID(n),p[a].edittype){case"password":case"text":case"button":case"image":e("#"+n,"#"+r).val(o);break;case"textarea":("&nbsp;"==o||"&#160;"==o||1==o.length&&160==o.charCodeAt(0))&&(o=""),e("#"+n,"#"+r).val(o);break;case"select":var l=o.split(",");l=e.map(l,(function(t){return e.trim(t)})),e("#"+n+" option","#"+r).each((function(){this.selected=!(p[a].editoptions.multiple||l[0]!=e.trim(e(this).text())&&l[0]!=e.trim(e(this).val()))||!!p[a].editoptions.multiple&&(e.inArray(e.trim(e(this).text()),l)>-1||e.inArray(e.trim(e(this).val()),l)>-1)}));break;case"checkbox":o+="",p[a].editoptions&&p[a].editoptions.value?p[a].editoptions.value.split(":")[0]==o?(e("#"+n,"#"+r).attr("checked",!0),e("#"+n,"#"+r).attr("defaultChecked",!0)):(e("#"+n,"#"+r).attr("checked",!1),e("#"+n,"#"+r).attr("defaultChecked","")):(o=o.toLowerCase()).search(/(false|0|no|off|undefined)/i)<0&&""!==o?(e("#"+n,"#"+r).attr("checked",!0),e("#"+n,"#"+r).attr("defaultChecked",!0)):(e("#"+n,"#"+r).attr("checked",!1),e("#"+n,"#"+r).attr("defaultChecked",""));break;case"custom":try{if(!p[a].editoptions||!e.isFunction(p[a].editoptions.custom_value))throw"e1";p[a].editoptions.custom_value(e("#"+n,"#"+r),"set",o)}catch(t){info_dialog(jQuery.jgrid.errors.errcap,"e1"==t?"function 'custom_value' "+e.jgrid.edit.msg.nodefined:t.message,jQuery.jgrid.edit.bClose)}}u++}})),u>0&&e("#id_g","#"+v).val(i))}}function d(){var i,r,n,o=[!0,"",""],a={},d=h.p.prmNames;if(e.isFunction(t.beforeCheckValues)){var c=t.beforeCheckValues(u,e("#"+m),"_empty"==u[h.p.id+"_id"]?d.addoper:d.editoper);c&&"object"==typeof c&&(u=c)}for(var f in u)if(u.hasOwnProperty(f)&&!1===(o=checkValues(u[f],f,h))[0])break;o[0]&&(e.isFunction(t.onclickSubmit)&&(a=t.onclickSubmit(t,u)||{}),e.isFunction(t.beforeSubmit)&&(o=t.beforeSubmit(u,e("#"+m)))),o[0]&&!t.processing&&(t.processing=!0,e("#sData","#"+v+"_2").addClass("ui-state-active"),n=d.oper,r=d.id,u[n]="_empty"==e.trim(u[h.p.id+"_id"])?d.addoper:d.editoper,(u[n]!=d.addoper||void 0===u[r])&&(u[r]=u[h.p.id+"_id"]),delete u[h.p.id+"_id"],u=e.extend(u,t.editData,a),(a=e.extend({url:t.url?t.url:e(h).jqGrid("getGridParam","editurl"),type:t.mtype,data:e.isFunction(t.serializeEditData)?t.serializeEditData(u):u,complete:function(a,c){if("success"!=c?(o[0]=!1,o[1]=e.isFunction(t.errorTextFormat)?t.errorTextFormat(a):c+" Status: '"+a.statusText+"'. Error code: "+a.status):e.isFunction(t.afterSubmit)&&(o=t.afterSubmit(a,u)),!1===o[0]?(e("#FormError>td","#"+v).html(o[1]),e("#FormError","#"+v).show()):(e.each(h.p.colModel,(function(){if(p[this.name]&&this.formatter&&"select"==this.formatter)try{delete p[this.name]}catch(e){}})),u=e.extend(u,p),h.p.autoencode&&e.each(u,(function(t,i){u[t]=e.jgrid.htmlDecode(i)})),u[n]==d.addoper?(o[2]||(o[2]=parseInt(h.p.records,10)+1),u[r]=o[2],t.closeAfterAdd?(t.reloadAfterSubmit?e(h).trigger("reloadGrid"):(e(h).jqGrid("addRowData",o[2],u,s.addedrow),e(h).jqGrid("setSelection",o[2])),hideModal("#"+b.themodal,{gb:"#gbox_"+g,jqm:s.jqModal,onClose:t.onClose})):t.clearAfterAdd?(t.reloadAfterSubmit?e(h).trigger("reloadGrid"):e(h).jqGrid("addRowData",o[2],u,s.addedrow),l("_empty",h,m)):t.reloadAfterSubmit?e(h).trigger("reloadGrid"):e(h).jqGrid("addRowData",o[2],u,s.addedrow)):(t.reloadAfterSubmit?(e(h).trigger("reloadGrid"),t.closeAfterEdit||setTimeout((function(){e(h).jqGrid("setSelection",u[r])}),1e3)):!0===h.p.treeGrid?e(h).jqGrid("setTreeRow",u[r],u):e(h).jqGrid("setRowData",u[r],u),t.closeAfterEdit&&hideModal("#"+b.themodal,{gb:"#gbox_"+g,jqm:s.jqModal,onClose:t.onClose})),e.isFunction(t.afterComplete)&&(i=a,setTimeout((function(){t.afterComplete(i,u,e("#"+m)),i=null}),500))),t.processing=!1,(t.checkOnSubmit||t.checkOnUpdate)&&(e("#"+m).data("disabled",!1),"_empty"!=t._savedData[h.p.id+"_id"]))for(var f in t._savedData)u[f]&&(t._savedData[f]=u[f]);e("#sData","#"+v+"_2").removeClass("ui-state-active");try{e(":input:visible","#"+m)[0].focus()}catch(e){}},error:function(i,s,r){e("#FormError>td","#"+v).html(s+" : "+r),e("#FormError","#"+v).show(),t.processing=!1,e("#"+m).data("disabled",!1),e("#sData","#"+v+"_2").removeClass("ui-state-active")}},e.jgrid.ajaxOptions,t.ajaxEditOptions)).url||t.useDataProxy||(e.isFunction(h.p.dataProxy)?t.useDataProxy=!0:(o[0]=!1,o[1]+=" "+e.jgrid.errors.nourl)),o[0]&&(t.useDataProxy?h.p.dataProxy.call(h,a,"set_"+h.p.id):e.ajax(a))),!1===o[0]&&(e("#FormError>td","#"+v).html(o[1]),e("#FormError","#"+v).show())}function c(e,t){var i,s=!1;for(i in e)if(e[i]!=t[i]){s=!0;break}return s}var h=this;if(h.grid&&i){var u,p,f,g=h.p.id,m="FrmGrid_"+g,v="TblGrid_"+g,b={themodal:"editmod"+g,modalhead:"edithd"+g,modalcontent:"editcnt"+g,scrollelm:m},y=!!e.isFunction(t.beforeShowForm)&&t.beforeShowForm,w=!!e.isFunction(t.afterShowForm)&&t.afterShowForm,_=!!e.isFunction(t.beforeInitData)&&t.beforeInitData,x=!!e.isFunction(t.onInitializeForm)&&t.onInitializeForm,C=1,k=0;"new"==i?(i="_empty",s.caption=s.addCaption):s.caption=s.editCaption,!0===s.recreateForm&&null!=e("#"+b.themodal).html()&&e("#"+b.themodal).remove();var D=!0;if(s.checkOnUpdate&&s.jqModal&&!s.modal&&(D=!1),null!=e("#"+b.themodal).html())e(".ui-jqdialog-title","#"+b.modalhead).html(s.caption),e("#FormError","#"+v).hide(),t.topinfo?(e(".topinfo","#"+v+"_2").html(t.topinfo),e(".tinfo","#"+v+"_2").show()):e(".tinfo","#"+v+"_2").hide(),t.bottominfo?(e(".bottominfo","#"+v+"_2").html(t.bottominfo),e(".binfo","#"+v+"_2").show()):e(".binfo","#"+v+"_2").hide(),_&&_(e("#"+m)),l(i,h,m),"_empty"!=i&&t.viewPagerButtons?e("#pData, #nData","#"+v+"_2").show():e("#pData, #nData","#"+v+"_2").hide(),!0===t.processing&&(t.processing=!1,e("#sData","#"+v+"_2").removeClass("ui-state-active")),!0===e("#"+m).data("disabled")&&(e(".confirm","#"+b.themodal).hide(),e("#"+m).data("disabled",!1)),y&&y(e("#"+m)),e("#"+b.themodal).data("onClose",t.onClose),viewModal("#"+b.themodal,{gbox:"#gbox_"+g,jqm:s.jqModal,jqM:!1,closeoverlay:D,modal:s.modal}),D||e(".jqmOverlay").click((function(){return!!o()&&(hideModal("#"+b.themodal,{gb:"#gbox_"+g,jqm:s.jqModal,onClose:t.onClose}),!1)})),w&&w(e("#"+m));else{e(h.p.colModel).each((function(){var e=this.formoptions;C=Math.max(C,e&&e.colpos||0),k=Math.max(k,e&&e.rowpos||0)}));var j,S=isNaN(s.dataheight)?s.dataheight:s.dataheight+"px";S=e("<form name='FormPost' id='"+m+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+S+";'></form>").data("disabled",!1);var M=e("<table id='"+v+"' class='EditTable' cellspacing='0' cellpading='0' border='0'><tbody></tbody></table>");e(S).append(M),(j=e("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*C+"'></td></tr>"))[0].rp=0,e(M).append(j),(j=e("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*C+"'>"+t.topinfo+"</td></tr>"))[0].rp=0,e(M).append(j),_&&_(e("#"+m)),j=(_="rtl"==h.p.direction)?"nData":"pData";var A=_?"pData":"nData";!function(i,s,r,n){for(var o,a,l,d,c,u=0,p=[],f=!1,g="",m=1;m<=n;m++)g+="<td class='CaptionTD ui-widget-content'>&#160;</td><td class='DataTD ui-widget-content' style='white-space:pre'>&#160;</td>";"_empty"!=i&&(f=e(s).jqGrid("getInd",i)),e(s.p.colModel).each((function(m){if(o=this.name,d=this.editrules&&!0===this.editrules.edithidden||!0!==this.hidden?"":"style='display:none'","cb"!==o&&"subgrid"!==o&&!0===this.editable&&"rn"!==o){if(!1===f)l="";else if(o==s.p.ExpandColumn&&!0===s.p.treeGrid)l=e("td:eq("+m+")",s.rows[f]).text();else try{l=e.unformat(e("td:eq("+m+")",s.rows[f]),{rowId:i,colModel:this},m)}catch(t){l=e("td:eq("+m+")",s.rows[f]).html()}var v=e.extend({},this.editoptions||{},{id:o,name:o}),b=e.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),y=parseInt(b.rowpos,10)||u+1,w=parseInt(2*(parseInt(b.colpos,10)||1),10);"_empty"==i&&v.defaultValue&&(l=e.isFunction(v.defaultValue)?v.defaultValue():v.defaultValue),this.edittype||(this.edittype="text"),h.p.autoencode&&(l=e.jgrid.htmlDecode(l)),c=createEl(this.edittype,v,l,!1,e.extend({},e.jgrid.ajaxOptions,s.p.ajaxSelectOptions||{})),""==l&&"checkbox"==this.edittype&&(l=e(c).attr("offval")),""==l&&"select"==this.edittype&&(l=e("option:eq(0)",c).text()),(t.checkOnSubmit||t.checkOnUpdate)&&(t._savedData[o]=l),e(c).addClass("FormElement"),a=e(r).find("tr[rowpos="+y+"]"),b.rowabove&&(v=e("<tr><td class='contentinfo' colspan='"+2*n+"'>"+b.rowcontent+"</td></tr>"),e(r).append(v),v[0].rp=y),0===a.length&&(a=e("<tr "+d+" rowpos='"+y+"'></tr>").addClass("FormData").attr("id","tr_"+o),e(a).append(g),e(r).append(a),a[0].rp=y),e("td:eq("+(w-2)+")",a[0]).html(void 0===b.label?s.p.colNames[m]:b.label),e("td:eq("+(w-1)+")",a[0]).append(b.elmprefix).append(c).append(b.elmsuffix),p[u]=m,u++}})),u>0&&((m=e("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*n-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+s.p.id+"_id' value='"+i+"'/></td></tr>"))[0].rp=u+999,e(r).append(m),(t.checkOnSubmit||t.checkOnUpdate)&&(t._savedData[s.p.id+"_id"]=i))}(i,h,M,C),j="<a href='javascript:void(0)' id='"+j+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></div>",A="<a href='javascript:void(0)' id='"+A+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></div>";var T="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+s.bSubmit+"</a>",F="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+s.bCancel+"</a>";if(j="<table border='0' class='EditTable' id='"+v+"_2'><tbody><tr id='Act_Buttons'><td class='navButton ui-widget-content'>"+(_?A+j:j+A)+"</td><td class='EditButton ui-widget-content'>"+T+F+"</td></tr>",j+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+t.bottominfo+"</td></tr>",j+="</tbody></table>",k>0){var O=[];e.each(e(M)[0].rows,(function(e,t){O[e]=t})),O.sort((function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0})),e.each(O,(function(t,i){e("tbody",M).append(i)}))}s.gbox="#gbox_"+g;var I=!1;!0===s.closeOnEscape&&(s.closeOnEscape=!1,I=!0),S=e("<span></span>").append(S).append(j),createModal(b,S,s,"#gview_"+h.p.id,e("#gview_"+h.p.id)[0]),_&&(e("#pData, #nData","#"+v+"_2").css("float","right"),e(".EditButton","#"+v+"_2").css("text-align","left")),t.topinfo&&e(".tinfo","#"+v+"_2").show(),t.bottominfo&&e(".binfo","#"+v+"_2").show(),j=S=null,e("#"+b.themodal).keydown((function(i){var r=i.target;if(!0===e("#"+m).data("disabled"))return!1;if(!0===t.savekey[0]&&i.which==t.savekey[1]&&"TEXTAREA"!=r.tagName)return e("#sData","#"+v+"_2").trigger("click"),!1;if(27===i.which)return!!o()&&(I&&hideModal(this,{gb:s.gbox,jqm:s.jqModal,onClose:t.onClose}),!1);if(!0===t.navkeys[0]){if("_empty"==e("#id_g","#"+v).val())return!0;if(i.which==t.navkeys[1])return e("#pData","#"+v+"_2").trigger("click"),!1;if(i.which==t.navkeys[2])return e("#nData","#"+v+"_2").trigger("click"),!1}})),s.checkOnUpdate&&(e("a.ui-jqdialog-titlebar-close span","#"+b.themodal).removeClass("jqmClose"),e("a.ui-jqdialog-titlebar-close","#"+b.themodal).unbind("click").click((function(){return!!o()&&(hideModal("#"+b.themodal,{gb:"#gbox_"+g,jqm:s.jqModal,onClose:t.onClose}),!1)}))),s.saveicon=e.extend([!0,"left","ui-icon-disk"],s.saveicon),s.closeicon=e.extend([!0,"left","ui-icon-close"],s.closeicon),!0===s.saveicon[0]&&e("#sData","#"+v+"_2").addClass("right"==s.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+s.saveicon[2]+"'></span>"),!0===s.closeicon[0]&&e("#cData","#"+v+"_2").addClass("right"==s.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+s.closeicon[2]+"'></span>"),(t.checkOnSubmit||t.checkOnUpdate)&&(T="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+s.bYes+"</a>",A="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+s.bNo+"</a>",F="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+s.bExit+"</a>",S=s.zIndex||999,S++,e("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+S+";display:none;'>&#160;"+(e.browser.msie&&6==e.browser.version?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"")+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(S+1)+"'>"+s.saveData+"<br/><br/>"+T+A+F+"</div>").insertAfter("#"+m),e("#sNew","#"+b.themodal).click((function(){return d(),e("#"+m).data("disabled",!1),e(".confirm","#"+b.themodal).hide(),!1})),e("#nNew","#"+b.themodal).click((function(){return e(".confirm","#"+b.themodal).hide(),e("#"+m).data("disabled",!1),setTimeout((function(){e(":input","#"+m)[0].focus()}),0),!1})),e("#cNew","#"+b.themodal).click((function(){return e(".confirm","#"+b.themodal).hide(),e("#"+m).data("disabled",!1),hideModal("#"+b.themodal,{gb:"#gbox_"+g,jqm:s.jqModal,onClose:t.onClose}),!1}))),x&&x(e("#"+m)),"_empty"!=i&&t.viewPagerButtons?e("#pData,#nData","#"+v+"_2").show():e("#pData,#nData","#"+v+"_2").hide(),y&&y(e("#"+m)),e("#"+b.themodal).data("onClose",t.onClose),viewModal("#"+b.themodal,{gbox:"#gbox_"+g,jqm:s.jqModal,closeoverlay:D,modal:s.modal}),D||e(".jqmOverlay").click((function(){return!!o()&&(hideModal("#"+b.themodal,{gb:"#gbox_"+g,jqm:s.jqModal,onClose:t.onClose}),!1)})),w&&w(e("#"+m)),e(".fm-button","#"+b.themodal).hover((function(){e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})),e("#sData","#"+v+"_2").click((function(){return u={},p={},e("#FormError","#"+v).hide(),a(),"_empty"==u[h.p.id+"_id"]?d():!0===s.checkOnSubmit?(f=e.extend({},u,p),c(f,t._savedData)?(e("#"+m).data("disabled",!0),e(".confirm","#"+b.themodal).show()):d()):d(),!1})),e("#cData","#"+v+"_2").click((function(){return!!o()&&(hideModal("#"+b.themodal,{gb:"#gbox_"+g,jqm:s.jqModal,onClose:t.onClose}),!1)})),e("#nData","#"+v+"_2").click((function(){if(!o())return!1;e("#FormError","#"+v).hide();var t=n();return t[0]=parseInt(t[0],10),-1!=t[0]&&t[1][t[0]+1]&&(e.isFunction(s.onclickPgButtons)&&s.onclickPgButtons("next",e("#"+m),t[1][t[0]]),l(t[1][t[0]+1],h,m),e(h).jqGrid("setSelection",t[1][t[0]+1]),e.isFunction(s.afterclickPgButtons)&&s.afterclickPgButtons("next",e("#"+m),t[1][t[0]+1]),r(t[0]+1,t[1].length-1)),!1})),e("#pData","#"+v+"_2").click((function(){if(!o())return!1;e("#FormError","#"+v).hide();var t=n();return-1!=t[0]&&t[1][t[0]-1]&&(e.isFunction(s.onclickPgButtons)&&s.onclickPgButtons("prev",e("#"+m),t[1][t[0]]),l(t[1][t[0]-1],h,m),e(h).jqGrid("setSelection",t[1][t[0]-1]),e.isFunction(s.afterclickPgButtons)&&s.afterclickPgButtons("prev",e("#"+m),t[1][t[0]-1]),r(t[0]-1,t[1].length-1)),!1}))}r((y=n())[0],y[1].length-1)}}))},viewGridRow:function(t,i){return i=e.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:!1,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,viewPagerButtons:!0},e.jgrid.view,i||{}),this.each((function(){function s(){!0!==i.closeOnEscape&&!0!==i.navkeys[0]||setTimeout((function(){e(".ui-jqdialog-titlebar-close","#"+h.modalhead).focus()}),0)}function r(t,i){0===t?e("#pData","#"+c+"_2").addClass("ui-state-disabled"):e("#pData","#"+c+"_2").removeClass("ui-state-disabled"),t==i?e("#nData","#"+c+"_2").addClass("ui-state-disabled"):e("#nData","#"+c+"_2").removeClass("ui-state-disabled")}function n(){var t=e(a).jqGrid("getDataIDs"),i=e("#id_g","#"+c).val();return[e.inArray(i,t),t]}function o(t,i){var s,r,n,o,a=0;(o=e(i).jqGrid("getInd",t,!0))&&(e("td",o).each((function(t){s=i.p.colModel[t].name,r=(!i.p.colModel[t].editrules||!0!==i.p.colModel[t].editrules.edithidden)&&!0===i.p.colModel[t].hidden,"cb"!==s&&"subgrid"!==s&&"rn"!==s&&(n=s==i.p.ExpandColumn&&!0===i.p.treeGrid?e(this).text():e(this).html(),e.extend({},i.p.colModel[t].editoptions||{}),s=e.jgrid.jqID("v_"+s),e("#"+s+" span","#"+c).html(n),r&&e("#"+s,"#"+c).parents("tr:first").hide(),a++)})),a>0&&e("#id_g","#"+c).val(t))}var a=this;if(a.grid&&t){i.imgpath||(i.imgpath=a.p.imgpath);var l=a.p.id,d="ViewGrid_"+l,c="ViewTbl_"+l,h={themodal:"viewmod"+l,modalhead:"viewhd"+l,modalcontent:"viewcnt"+l,scrollelm:d},u=1,p=0;if(null!=e("#"+h.themodal).html())e(".ui-jqdialog-title","#"+h.modalhead).html(i.caption),e("#FormError","#"+c).hide(),o(t,a),e.isFunction(i.beforeShowForm)&&i.beforeShowForm(e("#"+d)),viewModal("#"+h.themodal,{gbox:"#gbox_"+l,jqm:i.jqModal,jqM:!1,modal:i.modal}),s();else{e(a.p.colModel).each((function(){var e=this.formoptions;u=Math.max(u,e&&e.colpos||0),p=Math.max(p,e&&e.rowpos||0)}));var f=isNaN(i.dataheight)?i.dataheight:i.dataheight+"px",g=e("<form name='FormPost' id='"+d+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+f+";'></form>"),m=e("<table id='"+c+"' class='EditTable' cellspacing='1' cellpading='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");e(g).append(m),function(t,s,r,n){for(var o,a,l,d,c,h,u,p,f=0,g=[],m="<td class='CaptionTD form-view-label ui-widget-content' width='"+i.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",v="",b=["integer","number","currency"],y=0,w=0,_=1;_<=n;_++)v+=1==_?m:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>";e(s.p.colModel).each((function(){(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden||"right"!==this.align||(this.formatter&&-1!==e.inArray(this.formatter,b)?y=Math.max(y,parseInt(this.width,10)):w=Math.max(w,parseInt(this.width,10)))})),h=0!==y?y:0!==w?w:0,c=e(s).jqGrid("getInd",t),e(s.p.colModel).each((function(t){if(o=this.name,u=!1,d=this.editrules&&!0===this.editrules.edithidden||!0!==this.hidden?"":"style='display:none'",p="boolean"!=typeof this.viewable||this.viewable,"cb"!==o&&"subgrid"!==o&&"rn"!==o&&p){l=!1===c?"":o==s.p.ExpandColumn&&!0===s.p.treeGrid?e("td:eq("+t+")",s.rows[c]).text():e("td:eq("+t+")",s.rows[c]).html(),u="right"===this.align&&0!==h,e.extend({},this.editoptions||{},{id:o,name:o});var i=e.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),m=parseInt(i.rowpos,10)||f+1,b=parseInt(2*(parseInt(i.colpos,10)||1),10);if(i.rowabove){var y=e("<tr><td class='contentinfo' colspan='"+2*n+"'>"+i.rowcontent+"</td></tr>");e(r).append(y),y[0].rp=m}0===(a=e(r).find("tr[rowpos="+m+"]")).length&&(a=e("<tr "+d+" rowpos='"+m+"'></tr>").addClass("FormData").attr("id","trv_"+o),e(a).append(v),e(r).append(a),a[0].rp=m),e("td:eq("+(b-2)+")",a[0]).html("<b>"+(void 0===i.label?s.p.colNames[t]:i.label)+"</b>"),e("td:eq("+(b-1)+")",a[0]).append("<span>"+l+"</span>").attr("id","v_"+o),u&&e("td:eq("+(b-1)+") span",a[0]).css({"text-align":"right",width:h+"px"}),g[f]=t,f++}})),f>0&&((t=e("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*n-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/></td></tr>"))[0].rp=f+99,e(r).append(t))}(t,a,m,u);var v="<a href='javascript:void(0)' id='"+((f="rtl"==a.p.direction)?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></div>",b="<a href='javascript:void(0)' id='"+(f?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></div>",y="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+i.bClose+"</a>";if(p>0){var w=[];e.each(e(m)[0].rows,(function(e,t){w[e]=t})),w.sort((function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0})),e.each(w,(function(t,i){e("tbody",m).append(i)}))}i.gbox="#gbox_"+l;var _=!1;!0===i.closeOnEscape&&(i.closeOnEscape=!1,_=!0),g=e("<span></span>").append(g).append("<table border='0' class='EditTable' id='"+c+"_2'><tbody><tr id='Act_Buttons'><td class='navButton ui-widget-content' width='"+i.labelswidth+"'>"+(f?b+v:v+b)+"</td><td class='EditButton ui-widget-content'>"+y+"</td></tr></tbody></table>"),createModal(h,g,i,"#gview_"+a.p.id,e("#gview_"+a.p.id)[0]),f&&(e("#pData, #nData","#"+c+"_2").css("float","right"),e(".EditButton","#"+c+"_2").css("text-align","left")),i.viewPagerButtons||e("#pData, #nData","#"+c+"_2").hide(),g=null,e("#"+h.themodal).keydown((function(t){if(27===t.which)return _&&hideModal(this,{gb:i.gbox,jqm:i.jqModal,onClose:i.onClose}),!1;if(!0===i.navkeys[0]){if(t.which===i.navkeys[1])return e("#pData","#"+c+"_2").trigger("click"),!1;if(t.which===i.navkeys[2])return e("#nData","#"+c+"_2").trigger("click"),!1}})),i.closeicon=e.extend([!0,"left","ui-icon-close"],i.closeicon),!0===i.closeicon[0]&&e("#cData","#"+c+"_2").addClass("right"==i.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.closeicon[2]+"'></span>"),e.isFunction(i.beforeShowForm)&&i.beforeShowForm(e("#"+d)),viewModal("#"+h.themodal,{gbox:"#gbox_"+l,jqm:i.jqModal,modal:i.modal}),e(".fm-button:not(.ui-state-disabled)","#"+c+"_2").hover((function(){e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})),s(),e("#cData","#"+c+"_2").click((function(){return hideModal("#"+h.themodal,{gb:"#gbox_"+l,jqm:i.jqModal,onClose:i.onClose}),!1})),e("#nData","#"+c+"_2").click((function(){e("#FormError","#"+c).hide();var t=n();return t[0]=parseInt(t[0],10),-1!=t[0]&&t[1][t[0]+1]&&(e.isFunction(i.onclickPgButtons)&&i.onclickPgButtons("next",e("#"+d),t[1][t[0]]),o(t[1][t[0]+1],a),e(a).jqGrid("setSelection",t[1][t[0]+1]),e.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons("next",e("#"+d),t[1][t[0]+1]),r(t[0]+1,t[1].length-1)),s(),!1})),e("#pData","#"+c+"_2").click((function(){e("#FormError","#"+c).hide();var t=n();return-1!=t[0]&&t[1][t[0]-1]&&(e.isFunction(i.onclickPgButtons)&&i.onclickPgButtons("prev",e("#"+d),t[1][t[0]]),o(t[1][t[0]-1],a),e(a).jqGrid("setSelection",t[1][t[0]-1]),e.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons("prev",e("#"+d),t[1][t[0]-1]),r(t[0]-1,t[1].length-1)),s(),!1}))}r((f=n())[0],f[1].length-1)}}))},delGridRow:function(i,s){return t=s=e.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e.jgrid.del,s||{}),this.each((function(){var r=this;if(r.grid&&i){var n,o,a,l,d="function"==typeof s.beforeShowForm,c="function"==typeof s.afterShowForm,h=r.p.id,u={},p="DelTbl_"+h,f={themodal:"delmod"+h,modalhead:"delhd"+h,modalcontent:"delcnt"+h,scrollelm:p};if(jQuery.isArray(i)&&(i=i.join()),null!=e("#"+f.themodal).html())e("#DelData>td","#"+p).text(i),e("#DelError","#"+p).hide(),!0===t.processing&&(t.processing=!1,e("#dData","#"+p).removeClass("ui-state-active")),d&&s.beforeShowForm(e("#"+p)),viewModal("#"+f.themodal,{gbox:"#gbox_"+h,jqm:s.jqModal,jqM:!1,modal:s.modal});else{var g=isNaN(s.dataheight)?s.dataheight:s.dataheight+"px";g="<div id='"+p+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+g+";'>",g+="<table class='DelTable'><tbody>",g+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",g+="<tr id='DelData' style='display:none'><td >"+i+"</td></tr>",g+='<tr><td class="delmsg" style="white-space:pre;">'+s.msg+"</td></tr><tr><td >&#160;</td></tr>",g+="</tbody></table></div>",g+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+p+"_2'><tbody><tr><td class='DataTD ui-widget-content'></td></tr><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DelButton EditButton'><a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+s.bSubmit+"</a>&#160;<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+s.bCancel+"</a></td></tr></tbody></table>",s.gbox="#gbox_"+h,createModal(f,g,s,"#gview_"+r.p.id,e("#gview_"+r.p.id)[0]),e(".fm-button","#"+p+"_2").hover((function(){e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})),s.delicon=e.extend([!0,"left","ui-icon-scissors"],s.delicon),s.cancelicon=e.extend([!0,"left","ui-icon-cancel"],s.cancelicon),!0===s.delicon[0]&&e("#dData","#"+p+"_2").addClass("right"==s.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+s.delicon[2]+"'></span>"),!0===s.cancelicon[0]&&e("#eData","#"+p+"_2").addClass("right"==s.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+s.cancelicon[2]+"'></span>"),e("#dData","#"+p+"_2").click((function(){var i=[!0,""];u={};var d=e("#DelData>td","#"+p).text();if("function"==typeof s.onclickSubmit&&(u=s.onclickSubmit(t,d)||{}),"function"==typeof s.beforeSubmit&&(i=s.beforeSubmit(d)),i[0]&&!t.processing){t.processing=!0,e(this).addClass("ui-state-active"),a=r.p.prmNames,n=e.extend({},t.delData,u),l=a.oper,n[l]=a.deloper,o=a.id,n[o]=d;var c=e.extend({url:t.url?t.url:e(r).jqGrid("getGridParam","editurl"),type:s.mtype,data:e.isFunction(s.serializeDelData)?s.serializeDelData(n):n,complete:function(o,a){if("success"!=a?(i[0]=!1,i[1]=e.isFunction(t.errorTextFormat)?t.errorTextFormat(o):a+" Status: '"+o.statusText+"'. Error code: "+o.status):"function"==typeof t.afterSubmit&&(i=t.afterSubmit(o,n)),!1===i[0])e("#DelError>td","#"+p).html(i[1]),e("#DelError","#"+p).show();else{if(t.reloadAfterSubmit)e(r).trigger("reloadGrid");else{if(a=[],a=d.split(","),!0===r.p.treeGrid)try{e(r).jqGrid("delTreeNode",a[0])}catch(e){}else for(var l=0;l<a.length;l++)e(r).jqGrid("delRowData",a[l]);r.p.selrow=null,r.p.selarrrow=[]}e.isFunction(t.afterComplete)&&setTimeout((function(){t.afterComplete(o,d)}),500)}t.processing=!1,e("#dData","#"+p+"_2").removeClass("ui-state-active"),i[0]&&hideModal("#"+f.themodal,{gb:"#gbox_"+h,jqm:s.jqModal,onClose:t.onClose})},error:function(i,s,r){e("#DelError>td","#"+p).html(s+" : "+r),e("#DelError","#"+p).show(),t.processing=!1,e("#dData","#"+p+"_2").removeClass("ui-state-active")}},e.jgrid.ajaxOptions,s.ajaxDelOptions);c.url||t.useDataProxy||(e.isFunction(r.p.dataProxy)?t.useDataProxy=!0:(i[0]=!1,i[1]+=" "+e.jgrid.errors.nourl)),i[0]&&(t.useDataProxy?r.p.dataProxy.call(r,c,"del_"+r.p.id):e.ajax(c))}return!1===i[0]&&(e("#DelError>td","#"+p).html(i[1]),e("#DelError","#"+p).show()),!1})),e("#eData","#"+p+"_2").click((function(){return hideModal("#"+f.themodal,{gb:"#gbox_"+h,jqm:s.jqModal,onClose:t.onClose}),!1})),d&&s.beforeShowForm(e("#"+p)),viewModal("#"+f.themodal,{gbox:"#gbox_"+h,jqm:s.jqModal,modal:s.modal})}c&&s.afterShowForm(e("#"+p)),!0===s.closeOnEscape&&setTimeout((function(){e(".ui-jqdialog-titlebar-close","#"+f.modalhead).focus()}),0)}}))},navGrid:function(t,i,s,r,n,o,a){return i=e.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1},e.jgrid.nav,i||{}),this.each((function(){var l,d,c,h={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},u=this;if(u.grid&&"string"==typeof t)for(null===e("#"+h.themodal).html()&&(void 0!==window.innerWidth?(l=window.innerWidth,d=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(l=document.documentElement.clientWidth,d=document.documentElement.clientHeight):(l=1024,d=768),createModal(h,"<div>"+i.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+u.p.id,jqModal:!0,drag:!0,resize:!0,caption:i.alertcap,top:d/2-25,left:l/2-100,width:200,height:"auto",closeOnEscape:i.closeOnEscape},"","",!0)),l=1,i.cloneToTop&&u.p.toppager&&(l=2),d=0;d<l;d++){var p,f,g=e("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>");0===d?(p=t,f=u.p.id,p==u.p.toppager&&(f+="_top",l=1)):(p=u.p.toppager,f=u.p.id+"_top"),"rtl"==u.p.direction&&e(g).attr("dir","rtl").css("float","right"),i.add&&(r=r||{},c=e("<td class='ui-pg-button ui-corner-all'></td>"),e(c).append("<div class='ui-pg-div'><span class='ui-icon "+i.addicon+"'></span>"+i.addtext+"</div>"),e("tr",g).append(c),e(c,g).attr({title:i.addtitle||"",id:r.id||"add_"+f}).click((function(){return e(this).hasClass("ui-state-disabled")||("function"==typeof i.addfunc?i.addfunc():e(u).jqGrid("editGridRow","new",r)),!1})).hover((function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})),c=null),i.edit&&(c=e("<td class='ui-pg-button ui-corner-all'></td>"),s=s||{},e(c).append("<div class='ui-pg-div'><span class='ui-icon "+i.editicon+"'></span>"+i.edittext+"</div>"),e("tr",g).append(c),e(c,g).attr({title:i.edittitle||"",id:s.id||"edit_"+f}).click((function(){if(!e(this).hasClass("ui-state-disabled")){var t=u.p.selrow;t?"function"==typeof i.editfunc?i.editfunc(t):e(u).jqGrid("editGridRow",t,s):(viewModal("#"+h.themodal,{gbox:"#gbox_"+u.p.id,jqm:!0}),e("#jqg_alrt").focus())}return!1})).hover((function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})),c=null),i.view&&(c=e("<td class='ui-pg-button ui-corner-all'></td>"),a=a||{},e(c).append("<div class='ui-pg-div'><span class='ui-icon "+i.viewicon+"'></span>"+i.viewtext+"</div>"),e("tr",g).append(c),e(c,g).attr({title:i.viewtitle||"",id:a.id||"view_"+f}).click((function(){if(!e(this).hasClass("ui-state-disabled")){var t=u.p.selrow;t?e(u).jqGrid("viewGridRow",t,a):(viewModal("#"+h.themodal,{gbox:"#gbox_"+u.p.id,jqm:!0}),e("#jqg_alrt").focus())}return!1})).hover((function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})),c=null),i.del&&(c=e("<td class='ui-pg-button ui-corner-all'></td>"),n=n||{},e(c).append("<div class='ui-pg-div'><span class='ui-icon "+i.delicon+"'></span>"+i.deltext+"</div>"),e("tr",g).append(c),e(c,g).attr({title:i.deltitle||"",id:n.id||"del_"+f}).click((function(){var t;e(this).hasClass("ui-state-disabled")||(u.p.multiselect?0===(t=u.p.selarrrow).length&&(t=null):t=u.p.selrow,t?"function"==typeof i.delfunc?i.delfunc(t):e(u).jqGrid("delGridRow",t,n):(viewModal("#"+h.themodal,{gbox:"#gbox_"+u.p.id,jqm:!0}),e("#jqg_alrt").focus()));return!1})).hover((function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})),c=null),(i.add||i.edit||i.del||i.view)&&e("tr",g).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"),i.search&&(c=e("<td class='ui-pg-button ui-corner-all'></td>"),o=o||{},e(c).append("<div class='ui-pg-div'><span class='ui-icon "+i.searchicon+"'></span>"+i.searchtext+"</div>"),e("tr",g).append(c),e(c,g).attr({title:i.searchtitle||"",id:o.id||"search_"+f}).click((function(){return e(this).hasClass("ui-state-disabled")||e(u).jqGrid("searchGrid",o),!1})).hover((function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})),c=null),i.refresh&&(c=e("<td class='ui-pg-button ui-corner-all'></td>"),e(c).append("<div class='ui-pg-div'><span class='ui-icon "+i.refreshicon+"'></span>"+i.refreshtext+"</div>"),e("tr",g).append(c),e(c,g).attr({title:i.refreshtitle||"",id:"refresh_"+f}).click((function(){if(!e(this).hasClass("ui-state-disabled")){e.isFunction(i.beforeRefresh)&&i.beforeRefresh(),u.p.search=!1;try{e("#fbox_"+u.p.id).searchFilter().reset(),e.isFunction(u.clearToolbar)&&u.clearToolbar(!1)}catch(e){}switch(i.refreshstate){case"firstpage":e(u).trigger("reloadGrid",[{page:1}]);break;case"current":e(u).trigger("reloadGrid",[{current:!0}])}e.isFunction(i.afterRefresh)&&i.afterRefresh()}return!1})).hover((function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})),c=null),c=e(".ui-jqgrid").css("font-size")||"11px",e("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+c+";visibility:hidden;' ></div>"),c=e(g).clone().appendTo("#testpg2").width(),e("#testpg2").remove(),e(p+"_"+i.position,p).append(g),u.p._nvtd&&(c>u.p._nvtd[0]&&(e(p+"_"+i.position,p).width(c),u.p._nvtd[0]=c),u.p._nvtd[1]=c),g=c=c=null}}))},navButtonAdd:function(t,i){return i=e.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},i||{}),this.each((function(){if(this.grid){0!==t.indexOf("#")&&(t="#"+t);var s=e(".navtable",t)[0],r=this;if(s){var n=e("<td></td>");"NONE"==i.buttonicon.toString().toUpperCase()?e(n).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+i.caption+"</div>"):e(n).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+i.buttonicon+"'></span>"+i.caption+"</div>"),i.id&&e(n).attr("id",i.id),"first"==i.position?0===s.rows[0].cells.length?e("tr",s).append(n):e("tr td:eq(0)",s).before(n):e("tr",s).append(n),e(n,s).attr("title",i.title||"").click((function(t){return e(this).hasClass("ui-state-disabled")||e.isFunction(i.onClickButton)&&i.onClickButton.call(r,t),!1})).hover((function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")}))}}}))},navSeparatorAdd:function(t,i){return i=e.extend({sepclass:"ui-separator",sepcontent:""},i||{}),this.each((function(){if(this.grid){0!==t.indexOf("#")&&(t="#"+t);var s=e(".navtable",t)[0];if(s){var r="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+i.sepclass+"'></span>"+i.sepcontent+"</td>";e("tr",s).append(r)}}}))},GridToForm:function(t,i){return this.each((function(){if(this.grid){var s=e(this).jqGrid("getRowData",t);if(s)for(var r in s)e("[name="+r+"]",i).is("input:radio")||e("[name="+r+"]",i).is("input:checkbox")?e("[name="+r+"]",i).each((function(){e(this).val()==s[r]?e(this).attr("checked","checked"):e(this).attr("checked","")})):e("[name="+r+"]",i).val(s[r])}}))},FormToGrid:function(t,i,s,r){return this.each((function(){var n=this;if(n.grid){s||(s="set"),r||(r="first");var o=e(i).serializeArray(),a={};e.each(o,(function(e,t){a[t.name]=t.value})),"add"==s?e(n).jqGrid("addRowData",t,a,r):"set"==s&&e(n).jqGrid("setRowData",t,a)}}))}})}(jQuery),jQuery.fn.searchFilter=function(e,t){return new function(e,t,i){if(this.$=e,this.add=function(t){return null==t?e.find(".ui-add-last").click():e.find(".sf:eq("+t+") .ui-add").click(),this},this.del=function(t){return null==t?e.find(".sf:last .ui-del").click():e.find(".sf:eq("+t+") .ui-del").click(),this},this.search=function(){return e.find(".ui-search").click(),this},this.reset=function(){return e.find(".ui-reset").click(),this},this.close=function(){return e.find(".ui-closer").click(),this},null!=t){function s(){return jQuery(this).toggleClass("ui-state-hover"),!1}function r(e){return jQuery(this).toggleClass("ui-state-active","mousedown"==e.type),!1}function n(e,t){return"<option value='"+e+"'>"+t+"</option>"}function o(e,t,i){return"<select class='"+e+"'"+(i?" style='display:none;'":"")+">"+t+"</select>"}function a(t,i){null!=(t=e.find("tr.sf td.data "+t))[0]&&i(t)}function l(t,i){var s=e.find("tr.sf td.data "+t);null!=s[0]&&jQuery.each(i,(function(){null!=this.data?s.bind(this.type,this.data,this.fn):s.bind(this.type,this.fn)}))}var d=jQuery.extend({},jQuery.fn.searchFilter.defaults,i),c=-1,h="";jQuery.each(d.groupOps,(function(){h+=n(this.op,this.text)})),h="<select name='groupOp'>"+h+"</select>",e.html("").addClass("ui-searchFilter").append("<div class='ui-widget-overlay' style='z-index: -1'>&#160;</div><table class='ui-widget-content ui-corner-all'><thead><tr><td colspan='5' class='ui-widget-header ui-corner-all' style='line-height: 18px;'><div class='ui-closer ui-state-default ui-corner-all ui-helper-clearfix' style='float: right;'><span class='ui-icon ui-icon-close'></span></div>"+d.windowTitle+"</td></tr></thead><tbody><tr class='sf'><td class='fields'></td><td class='ops'></td><td class='data'></td><td><div class='ui-del ui-state-default ui-corner-all'><span class='ui-icon ui-icon-minus'></span></div></td><td><div class='ui-add ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plus'></span></div></td></tr><tr><td colspan='5' class='divider'><div>&#160;</div></td></tr></tbody><tfoot><tr><td colspan='3'><span class='ui-reset ui-state-default ui-corner-all' style='display: inline-block; float: left;'><span class='ui-icon ui-icon-arrowreturnthick-1-w' style='float: left;'></span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+d.resetText+"</span></span><span class='ui-search ui-state-default ui-corner-all' style='display: inline-block; float: right;'><span class='ui-icon ui-icon-search' style='float: left;'></span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+d.searchText+"</span></span><span class='matchText'>"+d.matchText+"</span> "+h+" <span class='rulesText'>"+d.rulesText+"</span></td><td>&#160;</td><td><div class='ui-add-last ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plusthick'></span></div></td></tr></tfoot></table>");var u=e.find("tr.sf"),p=u.find("td.fields"),f=u.find("td.ops"),g=u.find("td.data"),m="";jQuery.each(d.operators,(function(){m+=n(this.op,this.text)})),m=o("default",m,!0),f.append(m),g.append("<input type='text' class='default' style='display:none;' />");var v="",b=!1,y=!1;jQuery.each(t,(function(t){if(v+=n(this.itemval,this.text),null!=this.ops){b=!0;var i="";jQuery.each(this.ops,(function(){i+=n(this.op,this.text)})),i=o("field"+t,i,!0),f.append(i)}if(null!=this.dataUrl){t>c&&(c=t),y=!0;var s=this.dataEvents,r=this.dataInit,h=this.buildSelect;jQuery.ajax(jQuery.extend({url:this.dataUrl,complete:function(i){(i=null!=h?jQuery("<div />").append(h(i)):jQuery("<div />").append(i.responseText)).find("select").addClass("field"+t).hide(),g.append(i.html()),r&&a(".field"+t,r),s&&l(".field"+t,s),t==c&&e.find("tr.sf td.fields select[name='field']").change()}},d.ajaxSelectOptions))}else if(null!=this.dataValues){y=!0;var u="";jQuery.each(this.dataValues,(function(){u+=n(this.value,this.text)})),u=o("field"+t,u,!0),g.append(u)}else null==this.dataEvents&&null==this.dataInit||(y=!0,u="<input type='text' class='field"+t+"' />",g.append(u));null!=this.dataInit&&t!=c&&a(".field"+t,this.dataInit),null!=this.dataEvents&&t!=c&&l(".field"+t,this.dataEvents)})),v="<select name='field'>"+v+"</select>",p.append(v),t=p.find("select[name='field']"),b?t.change((function(e){var t=e.target.selectedIndex;(e=jQuery(e.target).parents("tr.sf").find("td.ops")).find("select").removeAttr("name").hide(),null==(t=e.find(".field"+t))[0]&&(t=e.find(".default")),t.attr("name","op").show()})):f.find(".default").attr("name","op").show(),y?t.change((function(e){var t=e.target.selectedIndex;(e=jQuery(e.target).parents("tr.sf").find("td.data")).find("select,input").removeClass("vdata").hide(),null==(t=e.find(".field"+t))[0]&&(t=e.find(".default")),t.show().addClass("vdata")})):g.find(".default").show().addClass("vdata"),(b||y)&&t.change(),e.find(".ui-state-default").hover(s,s).mousedown(r).mouseup(r),e.find(".ui-closer").click((function(){return d.onClose(jQuery(e.selector)),!1})),e.find(".ui-del").click((function(e){return(e=jQuery(e.target).parents(".sf")).siblings(".sf").length>0?(!0===d.datepickerFix&&void 0!==jQuery.fn.datepicker&&e.find(".hasDatepicker").datepicker("destroy"),e.remove()):(e.find("select[name='field']")[0].selectedIndex=0,e.find("select[name='op']")[0].selectedIndex=0,e.find(".data input").val(""),e.find(".data select").each((function(){this.selectedIndex=0})),e.find("select[name='field']").change()),!1})),e.find(".ui-add").click((function(e){var t=(e=jQuery(e.target).parents(".sf")).clone(!0).insertAfter(e);if(t.find(".ui-state-default").removeClass("ui-state-hover ui-state-active"),d.clone){t.find("select[name='field']")[0].selectedIndex=e.find("select[name='field']")[0].selectedIndex,null!=t.find("select[name='op']")[0]&&(t.find("select[name='op']").focus()[0].selectedIndex=e.find("select[name='op']")[0].selectedIndex);var i=t.find("select.vdata");null!=i[0]&&(i[0].selectedIndex=e.find("select.vdata")[0].selectedIndex)}else t.find(".data input").val(""),t.find("select[name='field']").focus();return!0===d.datepickerFix&&void 0!==jQuery.fn.datepicker&&e.find(".hasDatepicker").each((function(){var e=jQuery.data(this,"datepicker").settings;t.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(e)})),t.find("select[name='field']").change(),!1})),e.find(".ui-search").click((function(){var t,i=jQuery(e.selector),s=i.find("select[name='groupOp'] :selected").val();return t=d.stringResult?'{"groupOp":"'+s+'","rules":[':{groupOp:s,rules:[]},i.find(".sf").each((function(e){var i=jQuery(this).find("select[name='field'] :selected").val(),s=jQuery(this).find("select[name='op'] :selected").val(),r=jQuery(this).find("input.vdata,select.vdata :selected").val();r=(r+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),d.stringResult?(e>0&&(t+=","),t+='{"field":"'+i+'",',t+='"op":"'+s+'",',t+='"data":"'+r+'"}'):t.rules.push({field:i,op:s,data:r})})),d.stringResult&&(t+="]}"),d.onSearch(t),!1})),e.find(".ui-reset").click((function(){var t=jQuery(e.selector);return t.find(".ui-del").click(),t.find("select[name='groupOp']")[0].selectedIndex=0,d.onReset(),!1})),e.find(".ui-add-last").click((function(){var t=jQuery(e.selector+" .sf:last"),i=t.clone(!0).insertAfter(t);return i.find(".ui-state-default").removeClass("ui-state-hover ui-state-active"),i.find(".data input").val(""),i.find("select[name='field']").focus(),!0===d.datepickerFix&&void 0!==jQuery.fn.datepicker&&t.find(".hasDatepicker").each((function(){var e=jQuery.data(this,"datepicker").settings;i.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(e)})),i.find("select[name='field']").change(),!1})),this.setGroupOp=function(e){selDOMobj=this.$.find("select[name='groupOp']")[0];var t,i={},s=selDOMobj.options.length;for(t=0;t<s;t++)i[selDOMobj.options[t].value]=t;selDOMobj.selectedIndex=i[e],$(selDOMobj).change()},this.setFilter=function(e){var t=e.sfref;e=e.filter;var s,r,n,o,a,l,d,c,h=[],u={};for(selDOMobj=t.find("select[name='field']")[0],s=0,n=selDOMobj.options.length;s<n;s++)u[selDOMobj.options[s].value]={index:s,ops:{}},h.push(selDOMobj.options[s].value);for(s=0,n=h.length;s<n;s++){if(selDOMobj=t.find(".ops > select[class='field"+s+"']")[0])for(r=0,o=selDOMobj.options.length;r<o;r++)u[h[s]].ops[selDOMobj.options[r].value]=r;if(selDOMobj=t.find(".data > select[class='field"+s+"']")[0])for(u[h[s]].data={},r=0,o=selDOMobj.options.length;r<o;r++)u[h[s]].data[selDOMobj.options[r].value]=r}if(u[h=e.field]&&(a=u[h].index),null!=a){if(void 0===(l=u[h].ops[e.op]))for(s=0,n=i.operators.length;s<n;s++)if(i.operators[s].op==e.op){l=s;break}d=e.data,c=null==u[h].data?-1:u[h].data[d]}return null!=a&&null!=l&&null!=c&&(t.find("select[name='field']")[0].selectedIndex=a,t.find("select[name='field']").change(),t.find("select[name='op']")[0].selectedIndex=l,t.find("input.vdata").val(d),(t=t.find("select.vdata")[0])&&(t.selectedIndex=c),!0)}}}(this,e,t)},jQuery.fn.searchFilter.version="1.2.9",jQuery.fn.searchFilter.defaults={clone:!0,datepickerFix:!0,onReset:function(e){alert("Reset Clicked. Data Returned: "+e)},onSearch:function(e){alert("Search Clicked. Data Returned: "+e)},onClose:function(e){e.hide()},groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operators:[{op:"eq",text:"is equal to"},{op:"ne",text:"is not equal to"},{op:"lt",text:"is less than"},{op:"le",text:"is less or equal to"},{op:"gt",text:"is greater than"},{op:"ge",text:"is greater or equal to"},{op:"in",text:"is in"},{op:"ni",text:"is not in"},{op:"bw",text:"begins with"},{op:"bn",text:"does not begin with"},{op:"ew",text:"ends with"},{op:"en",text:"does not end with"},{op:"cn",text:"contains"},{op:"nc",text:"does not contain"}],matchText:"match",rulesText:"rules",resetText:"Reset",searchText:"Search",stringResult:!0,windowTitle:"Search Rules",ajaxSelectOptions:{}},function(e){e.jgrid.extend({editRow:function(t,i,s,r,n,o,a,l,d){return this.each((function(){var c,h,u,p,f=this,g=0,m=null,v={};f.grid&&!1!==(u=e(f).jqGrid("getInd",t,!0))&&("0"!=(e(u).attr("editable")||"0")||e(u).hasClass("not-editable-row")||(p=f.p.colModel,e("td",u).each((function(i){c=p[i].name;var s=!0===f.p.treeGrid&&c==f.p.ExpandColumn;if(s)h=e("span:first",this).html();else try{h=e.unformat(this,{rowId:t,colModel:p[i]},i)}catch(t){h=e(this).html()}if("cb"!=c&&"subgrid"!=c&&"rn"!=c&&(f.p.autoencode&&(h=e.jgrid.htmlDecode(h)),v[c]=h,!0===p[i].editable)){null===m&&(m=i),s?e("span:first",this).html(""):e(this).html("");var r=e.extend({},p[i].editoptions||{},{id:t+"_"+c,name:c});p[i].edittype||(p[i].edittype="text"),r=createEl(p[i].edittype,r,h,!0,e.extend({},e.jgrid.ajaxOptions,f.p.ajaxSelectOptions||{})),e(r).addClass("editable"),s?e("span:first",this).append(r):e(this).append(r),"select"==p[i].edittype&&!0===p[i].editoptions.multiple&&e.browser.msie&&e(r).width(e(r).width()),g++}})),g>0&&(v.id=t,f.p.savedRow.push(v),e(u).attr("editable","1"),e("td:eq("+m+") input",u).focus(),!0===i&&e(u).bind("keydown",(function(i){if(27===i.keyCode&&e(f).jqGrid("restoreRow",t,d),13===i.keyCode)return"TEXTAREA"==i.target.tagName||(e(f).jqGrid("saveRow",t,r,n,o,a,l,d),!1);i.stopPropagation()})),e.isFunction(s)&&s(t))))}))},saveRow:function(t,i,s,r,n,o,a){return this.each((function(){var l,d,c,h,u,p,f=this,g={},m={};if(f.grid&&(!1!==(u=e(f).jqGrid("getInd",t,!0))&&(d=e(u).attr("editable"),s=s||f.p.editurl,"1"===d)))if(e("td",u).each((function(t){if(p=f.p.colModel[t],"cb"!=(l=p.name)&&"subgrid"!=l&&!0===p.editable&&"rn"!=l){switch(p.edittype){case"checkbox":var i=["Yes","No"];p.editoptions&&(i=p.editoptions.value.split(":")),g[l]=e("input",this).attr("checked")?i[0]:i[1];break;case"text":case"password":case"textarea":case"button":g[l]=e("input, textarea",this).val();break;case"select":if(p.editoptions.multiple){i=e("select",this);var s=[];g[l]=e(i).val(),g[l]=g[l]?g[l].join(","):"",e("select > option:selected",this).each((function(t,i){s[t]=e(i).text()})),m[l]=s.join(",")}else g[l]=e("select>option:selected",this).val(),m[l]=e("select>option:selected",this).text();p.formatter&&"select"==p.formatter&&(m={});break;case"custom":try{if(!p.editoptions||!e.isFunction(p.editoptions.custom_value))throw"e1";if(g[l]=p.editoptions.custom_value(e(".customelement",this),"get"),void 0===g[l])throw"e2"}catch(t){"e1"==t&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose),info_dialog(jQuery.jgrid.errors.errcap,"e2"==t?"function 'custom_value' "+e.jgrid.edit.msg.novalue:t.message,jQuery.jgrid.edit.bClose)}}if(!1===(h=checkValues(g[l],t,f))[0])return h[1]=g[l]+" "+h[1],!1;f.p.autoencode&&(g[l]=e.jgrid.htmlEncode(g[l]))}})),!1===h[0])try{var v=findPos(e("#"+t)[0]);info_dialog(e.jgrid.errors.errcap,h[1],e.jgrid.edit.bClose,{left:v[0],top:v[1]})}catch(e){alert(h[1])}else{var b;if(g)b=(v=f.p.prmNames).oper,d=v.id,g[b]=v.editoper,g[d]=t,void 0===f.p.inlineData&&(f.p.inlineData={}),void 0===r&&(r={}),g=e.extend({},g,f.p.inlineData,r);if("clientArray"==s){for(g=e.extend({},g,m),f.p.autoencode&&e.each(g,(function(t,i){g[t]=e.jgrid.htmlDecode(i)})),d=e(f).jqGrid("setRowData",t,g),e(u).attr("editable","0"),v=0;v<f.p.savedRow.length;v++)if(f.p.savedRow[v].id==t){c=v;break}c>=0&&f.p.savedRow.splice(c,1),e.isFunction(n)&&n(t,d)}else e("#lui_"+f.p.id).show(),e.ajax(e.extend({url:s,data:e.isFunction(f.p.serializeRowData)?f.p.serializeRowData(g):g,type:"POST",complete:function(s,r){if(e("#lui_"+f.p.id).hide(),"success"===r)if(!0===(!e.isFunction(i)||i(s))){for(f.p.autoencode&&e.each(g,(function(t,i){g[t]=e.jgrid.htmlDecode(i)})),g=e.extend({},g,m),e(f).jqGrid("setRowData",t,g),e(u).attr("editable","0"),r=0;r<f.p.savedRow.length;r++)if(f.p.savedRow[r].id==t){c=r;break}c>=0&&f.p.savedRow.splice(c,1),e.isFunction(n)&&n(t,s)}else e(f).jqGrid("restoreRow",t,a)},error:function(i,s){e("#lui_"+f.p.id).hide(),e.isFunction(o)?o(t,i,s):alert("Error Row: "+t+" Result: "+i.status+":"+i.statusText+" Status: "+s)}},e.jgrid.ajaxOptions,f.p.ajaxRowOptions||{}));e(u).unbind("keydown")}}))},restoreRow:function(t,i){return this.each((function(){var s,r,n=this,o={};if(n.grid&&!1!==(r=e(n).jqGrid("getInd",t,!0))){for(var a=0;a<n.p.savedRow.length;a++)if(n.p.savedRow[a].id==t){s=a;break}if(s>=0){if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker","#"+r.id).datepicker("hide")}catch(e){}e.each(n.p.colModel,(function(){!0===this.editable&&this.name in n.p.savedRow[s]&&(o[this.name]=n.p.savedRow[s][this.name])})),e(n).jqGrid("setRowData",t,o),e(r).attr("editable","0").unbind("keydown"),n.p.savedRow.splice(s,1)}e.isFunction(i)&&i(t)}}))}})}(jQuery),function(e){e.jgrid.extend({editCell:function(t,i,s){return this.each((function(){var r,n,o,a=this;if(a.grid&&!0===a.p.cellEdit){if(i=parseInt(i,10),a.p.selrow=a.rows[t].id,a.p.knv||e(a).jqGrid("GridNav"),a.p.savedRow.length>0){if(!0===s&&t==a.p.iRow&&i==a.p.iCol)return;e(a).jqGrid("saveCell",a.p.savedRow[0].id,a.p.savedRow[0].ic)}else window.setTimeout((function(){e("#"+a.p.knv).attr("tabindex","-1").focus()}),0);if("subgrid"!=(r=a.p.colModel[i].name)&&"cb"!=r&&"rn"!=r){if(o=e("td:eq("+i+")",a.rows[t]),!0!==a.p.colModel[i].editable||!0!==s||o.hasClass("not-editable-cell"))parseInt(a.p.iCol,10)>=0&&parseInt(a.p.iRow,10)>=0&&(e("td:eq("+a.p.iCol+")",a.rows[a.p.iRow]).removeClass("edit-cell ui-state-highlight"),e(a.rows[a.p.iRow]).removeClass("selected-row ui-state-hover")),o.addClass("edit-cell ui-state-highlight"),e(a.rows[t]).addClass("selected-row ui-state-hover"),e.isFunction(a.p.onSelectCell)&&(n=o.html().replace(/\&#160\;/gi,""),a.p.onSelectCell(a.rows[t].id,r,n,t,i));else{parseInt(a.p.iCol,10)>=0&&parseInt(a.p.iRow,10)>=0&&(e("td:eq("+a.p.iCol+")",a.rows[a.p.iRow]).removeClass("edit-cell ui-state-highlight"),e(a.rows[a.p.iRow]).removeClass("selected-row ui-state-hover")),e(o).addClass("edit-cell ui-state-highlight"),e(a.rows[t]).addClass("selected-row ui-state-hover");try{n=e.unformat(o,{rowId:a.rows[t].id,colModel:a.p.colModel[i]},i)}catch(t){n=e(o).html()}if(a.p.autoencode&&(n=e.jgrid.htmlDecode(n)),a.p.colModel[i].edittype||(a.p.colModel[i].edittype="text"),a.p.savedRow.push({id:t,ic:i,name:r,v:n}),e.isFunction(a.p.formatCell)){var l=a.p.formatCell(a.rows[t].id,r,n,t,i);void 0!==l&&(n=l)}l=e.extend({},a.p.colModel[i].editoptions||{},{id:t+"_"+r,name:r});var d=createEl(a.p.colModel[i].edittype,l,n,!0,e.extend({},e.jgrid.ajaxOptions,a.p.ajaxSelectOptions||{}));e.isFunction(a.p.beforeEditCell)&&a.p.beforeEditCell(a.rows[t].id,r,n,t,i),e(o).html("").append(d).attr("tabindex","0"),window.setTimeout((function(){e(d).focus()}),0),e("input, select, textarea",o).bind("keydown",(function(s){if(27===s.keyCode&&(e("input.hasDatepicker",o).length>0?e(".ui-datepicker").is(":hidden")?e(a).jqGrid("restoreCell",t,i):e("input.hasDatepicker",o).datepicker("hide"):e(a).jqGrid("restoreCell",t,i)),13===s.keyCode&&e(a).jqGrid("saveCell",t,i),9==s.keyCode){if(a.grid.hDiv.loading)return!1;s.shiftKey?e(a).jqGrid("prevCell",t,i):e(a).jqGrid("nextCell",t,i)}s.stopPropagation()})),e.isFunction(a.p.afterEditCell)&&a.p.afterEditCell(a.rows[t].id,r,n,t,i)}a.p.iCol=i,a.p.iRow=t}}}))},saveCell:function(t,i){return this.each((function(){var s,r=this;if(r.grid&&!0===r.p.cellEdit){if(null!==(s=r.p.savedRow.length>=1?0:null)){var n,o,a=e("td:eq("+i+")",r.rows[t]),l=r.p.colModel[i],d=l.name,c=e.jgrid.jqID(d);switch(l.edittype){case"select":if(l.editoptions.multiple){c=e("#"+t+"_"+c,r.rows[t]);var h=[];(n=e(c).val())?n.join(","):n="",e("option:selected",c).each((function(t,i){h[t]=e(i).text()})),o=h.join(",")}else n=e("#"+t+"_"+c+">option:selected",r.rows[t]).val(),o=e("#"+t+"_"+c+">option:selected",r.rows[t]).text();l.formatter&&(o=n);break;case"checkbox":var u=["Yes","No"];l.editoptions&&(u=l.editoptions.value.split(":")),o=n=e("#"+t+"_"+c,r.rows[t]).attr("checked")?u[0]:u[1];break;case"password":case"text":case"textarea":case"button":o=n=e("#"+t+"_"+c,r.rows[t]).val();break;case"custom":try{if(!l.editoptions||!e.isFunction(l.editoptions.custom_value))throw"e1";if(void 0===(n=l.editoptions.custom_value(e(".customelement",a),"get")))throw"e2";o=n}catch(t){"e1"==t&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose),info_dialog(jQuery.jgrid.errors.errcap,"e2"==t?"function 'custom_value' "+e.jgrid.edit.msg.novalue:t.message,jQuery.jgrid.edit.bClose)}}if(o!=r.p.savedRow[s].v){e.isFunction(r.p.beforeSaveCell)&&(s=r.p.beforeSaveCell(r.rows[t].id,d,n,t,i))&&(n=s);var p=checkValues(n,i,r);if(!0===p[0]){if(s={},e.isFunction(r.p.beforeSubmitCell)&&((s=r.p.beforeSubmitCell(r.rows[t].id,d,n,t,i))||(s={})),e("input.hasDatepicker",a).length>0&&e("input.hasDatepicker",a).datepicker("hide"),"remote"==r.p.cellsubmit)if(r.p.cellurl){var f={};r.p.autoencode&&(n=e.jgrid.htmlEncode(n)),f[d]=n,l=(u=r.p.prmNames).id,c=u.oper,f[l]=r.rows[t].id,f[c]=u.editoper,f=e.extend(s,f),e("#lui_"+r.p.id).show(),r.grid.hDiv.loading=!0,e.ajax(e.extend({url:r.p.cellurl,data:e.isFunction(r.p.serializeCellData)?r.p.serializeCellData(f):f,type:"POST",complete:function(s,l){e("#lui_"+r.p.id).hide(),r.grid.hDiv.loading=!1,"success"==l&&(e.isFunction(r.p.afterSubmitCell)?!0===(s=r.p.afterSubmitCell(s,f.id,d,n,t,i))[0]?(e(a).empty(),e(r).jqGrid("setCell",r.rows[t].id,i,o,!1,!1,!0),e(a).addClass("dirty-cell"),e(r.rows[t]).addClass("edited"),e.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell(r.rows[t].id,d,n,t,i),r.p.savedRow.splice(0,1)):(info_dialog(e.jgrid.errors.errcap,s[1],e.jgrid.edit.bClose),e(r).jqGrid("restoreCell",t,i)):(e(a).empty(),e(r).jqGrid("setCell",r.rows[t].id,i,o,!1,!1,!0),e(a).addClass("dirty-cell"),e(r.rows[t]).addClass("edited"),e.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell(r.rows[t].id,d,n,t,i),r.p.savedRow.splice(0,1)))},error:function(s,n){e("#lui_"+r.p.id).hide(),r.grid.hDiv.loading=!1,e.isFunction(r.p.errorCell)?r.p.errorCell(s,n):info_dialog(e.jgrid.errors.errcap,s.status+" : "+s.statusText+"<br/>"+n,e.jgrid.edit.bClose),e(r).jqGrid("restoreCell",t,i)}},e.jgrid.ajaxOptions,r.p.ajaxCellOptions||{}))}else try{info_dialog(e.jgrid.errors.errcap,e.jgrid.errors.nourl,e.jgrid.edit.bClose),e(r).jqGrid("restoreCell",t,i)}catch(e){}"clientArray"==r.p.cellsubmit&&(e(a).empty(),e(r).jqGrid("setCell",r.rows[t].id,i,o,!1,!1,!0),e(a).addClass("dirty-cell"),e(r.rows[t]).addClass("edited"),e.isFunction(r.p.afterSaveCell)&&r.p.afterSaveCell(r.rows[t].id,d,n,t,i),r.p.savedRow.splice(0,1))}else try{window.setTimeout((function(){info_dialog(e.jgrid.errors.errcap,n+" "+p[1],e.jgrid.edit.bClose)}),100),e(r).jqGrid("restoreCell",t,i)}catch(e){}}else e(r).jqGrid("restoreCell",t,i)}e.browser.opera?e("#"+r.p.knv).attr("tabindex","-1").focus():window.setTimeout((function(){e("#"+r.p.knv).attr("tabindex","-1").focus()}),0)}}))},restoreCell:function(t,i){return this.each((function(){var s,r=this;if(r.grid&&!0===r.p.cellEdit){if(null!==(s=r.p.savedRow.length>=1?0:null)){var n=e("td:eq("+i+")",r.rows[t]);if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker",n).datepicker("hide")}catch(e){}e(n).empty().attr("tabindex","-1"),e(r).jqGrid("setCell",r.rows[t].id,i,r.p.savedRow[s].v,!1,!1,!0),r.p.savedRow.splice(0,1)}window.setTimeout((function(){e("#"+r.p.knv).attr("tabindex","-1").focus()}),0)}}))},nextCell:function(t,i){return this.each((function(){var s=this,r=!1;if(s.grid&&!0===s.p.cellEdit){for(var n=i+1;n<s.p.colModel.length;n++)if(!0===s.p.colModel[n].editable){r=n;break}!1!==r?e(s).jqGrid("editCell",t,r,!0):s.p.savedRow.length>0&&e(s).jqGrid("saveCell",t,i)}}))},prevCell:function(t,i){return this.each((function(){var s=this,r=!1;if(s.grid&&!0===s.p.cellEdit){for(var n=i-1;n>=0;n--)if(!0===s.p.colModel[n].editable){r=n;break}!1!==r?e(s).jqGrid("editCell",t,r,!0):s.p.savedRow.length>0&&e(s).jqGrid("saveCell",t,i)}}))},GridNav:function(){return this.each((function(){function t(t,i,r){if("v"==r.substr(0,1)){var n=e(s.grid.bDiv)[0].clientHeight,o=e(s.grid.bDiv)[0].scrollTop,a=s.rows[t].offsetTop+s.rows[t].clientHeight,l=s.rows[t].offsetTop;"vd"==r&&a>=n&&(e(s.grid.bDiv)[0].scrollTop=e(s.grid.bDiv)[0].scrollTop+s.rows[t].clientHeight),"vu"==r&&l<o&&(e(s.grid.bDiv)[0].scrollTop=e(s.grid.bDiv)[0].scrollTop-s.rows[t].clientHeight)}"h"==r&&(r=e(s.grid.bDiv)[0].clientWidth,n=e(s.grid.bDiv)[0].scrollLeft,o=s.rows[t].cells[i].offsetLeft,s.rows[t].cells[i].offsetLeft+s.rows[t].cells[i].clientWidth>=r+parseInt(n,10)?e(s.grid.bDiv)[0].scrollLeft=e(s.grid.bDiv)[0].scrollLeft+s.rows[t].cells[i].clientWidth:o<n&&(e(s.grid.bDiv)[0].scrollLeft=e(s.grid.bDiv)[0].scrollLeft-s.rows[t].cells[i].clientWidth))}function i(e,t){var i,r;if("lft"==t)for(i=e+1,r=e;r>=0;r--)if(!0!==s.p.colModel[r].hidden){i=r;break}if("rgt"==t)for(i=e-1,r=e;r<s.p.colModel.length;r++)if(!0!==s.p.colModel[r].hidden){i=r;break}return i}var s=this;if(s.grid&&!0===s.p.cellEdit){s.p.knv=s.p.id+"_kn";var r,n,o=e("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+s.p.knv+"'></span></span>");e(o).insertBefore(s.grid.cDiv),e("#"+s.p.knv).focus().keydown((function(o){switch(n=o.keyCode,"rtl"==s.p.direction&&(37==n?n=39:39==n&&(n=37)),n){case 38:s.p.iRow-1>=0&&(t(s.p.iRow-1,s.p.iCol,"vu"),e(s).jqGrid("editCell",s.p.iRow-1,s.p.iCol,!1));break;case 40:s.p.iRow+1<=s.rows.length-1&&(t(s.p.iRow+1,s.p.iCol,"vd"),e(s).jqGrid("editCell",s.p.iRow+1,s.p.iCol,!1));break;case 37:s.p.iCol-1>=0&&(r=i(s.p.iCol-1,"lft"),t(s.p.iRow,r,"h"),e(s).jqGrid("editCell",s.p.iRow,r,!1));break;case 39:s.p.iCol+1<=s.p.colModel.length-1&&(r=i(s.p.iCol+1,"rgt"),t(s.p.iRow,r,"h"),e(s).jqGrid("editCell",s.p.iRow,r,!1));break;case 13:parseInt(s.p.iCol,10)>=0&&parseInt(s.p.iRow,10)>=0&&e(s).jqGrid("editCell",s.p.iRow,s.p.iCol,!0)}return!1}))}}))},getChangedCells:function(t){var i=[];return t||(t="all"),this.each((function(){var s,r=this;!r.grid||!0!==r.p.cellEdit||e(r.rows).each((function(n){var o={};e(this).hasClass("edited")&&(e("td",this).each((function(i){if("cb"!==(s=r.p.colModel[i].name)&&"subgrid"!==s)if("dirty"==t){if(e(this).hasClass("dirty-cell"))try{o[s]=e.unformat(this,{rowId:r.rows[n].id,colModel:r.p.colModel[i]},i)}catch(t){o[s]=e.jgrid.htmlDecode(e(this).html())}}else try{o[s]=e.unformat(this,{rowId:r.rows[n].id,colModel:r.p.colModel[i]},i)}catch(t){o[s]=e.jgrid.htmlDecode(e(this).html())}})),o.id=this.id,i.push(o))}))})),i}})}(jQuery),function(e){e.fn.jqm=function(s){var r={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:n,ajaxText:"",target:n,modal:n,toTop:n,onShow:n,onHide:n,onLoad:n};return this.each((function(){if(this._jqm)return i[this._jqm].c=e.extend({},i[this._jqm].c,s);t++,this._jqm=t,i[t]={c:e.extend(r,e.jqm.params,s),a:n,w:e(this).addClass("jqmID"+t),s:t},r.trigger&&e(this).jqmAddTrigger(r.trigger)}))},e.fn.jqmAddClose=function(e){return c(this,e,"jqmHide")},e.fn.jqmAddTrigger=function(e){return c(this,e,"jqmShow")},e.fn.jqmShow=function(t){return this.each((function(){e.jqm.open(this._jqm,t)}))},e.fn.jqmHide=function(t){return this.each((function(){e.jqm.close(this._jqm,t)}))},e.jqm={hash:{},open:function(t,a){var d=i[t],c=d.c,h="."+c.closeClass,u=parseInt(d.w.css("z-index"));u=u>0?u:3e3;var p=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":u-1,opacity:c.overlay/100});if(d.a)return n;if(d.t=a,d.a=!0,d.w.css("z-index",u),c.modal?(s[0]||setTimeout((function(){l("bind")}),1),s.push(t)):c.overlay>0?c.closeoverlay&&d.w.jqmAddClose(p):p=n,d.o=p?p.addClass(c.overlayClass).prependTo("body"):n,r&&(e("html,body").css({height:"100%",width:"100%"}),p))for(var f in p=p.css({position:"absolute"})[0],{Top:1,Left:1})p.style.setExpression(f.toLowerCase(),"(_=(document.documentElement.scroll"+f+" || document.body.scroll"+f+"))+'px'");return c.ajax?(t=c.target||d.w,u=c.ajax,t="string"==typeof t?e(t,d.w):e(t),u="@"==u.substr(0,1)?e(a).attr(u.substring(1)):u,t.html(c.ajaxText).load(u,(function(){c.onLoad&&c.onLoad.call(this,d),h&&d.w.jqmAddClose(e(h,d.w)),o(d)}))):h&&d.w.jqmAddClose(e(h,d.w)),c.toTop&&d.o&&d.w.before('<span id="jqmP'+d.w[0]._jqm+'"></span>').insertAfter(d.o),c.onShow?c.onShow(d):d.w.show(),o(d),n},close:function(t){return(t=i[t]).a?(t.a=n,s[0]&&(s.pop(),s[0]||l("unbind")),t.c.toTop&&t.o&&e("#jqmP"+t.w[0]._jqm).after(t.w).remove(),t.c.onHide?t.c.onHide(t):(t.w.hide(),t.o&&t.o.remove()),n):n},params:{}};var t=0,i=e.jqm.hash,s=[],r=e.browser.msie&&"6.0"==e.browser.version,n=!1,o=function(t){var i=e('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});r&&(t.o?t.o.html('<p style="width:100%;height:100%"/>').prepend(i):e("iframe.jqm",t.w)[0]||t.w.prepend(i)),a(t)},a=function(t){try{e(":input:visible",t.w)[0].focus()}catch(e){}},l=function(t){e(document)[t]("keypress",d)[t]("keydown",d)[t]("mousedown",d)},d=function(t){var r=i[s[s.length-1]];return(t=!e(t.target).parents(".jqmID"+r.s)[0])&&a(r),!t},c=function(t,s,r){return t.each((function(){var t=this._jqm;e(s).each((function(){this[r]||(this[r]=[],e(this).click((function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])i[this[e][t]]&&i[this[e][t]].w[e](this);return n}))),this[r].push(t)}))}))}}(jQuery),function(e){e.fn.jqDrag=function(e){return n(this,e,"d")},e.fn.jqResize=function(e,t){return n(this,e,"r",t)},e.jqDnR={dnr:{},e:0,drag:function(e){return"d"==s.k?r.css({left:s.X+e.pageX-s.pX,top:s.Y+e.pageY-s.pY}):(r.css({width:Math.max(e.pageX-s.pX+s.W,0),height:Math.max(e.pageY-s.pY+s.H,0)}),M1&&t.css({width:Math.max(e.pageX-M1.pX+M1.W,0),height:Math.max(e.pageY-M1.pY+M1.H,0)})),!1},stop:function(){e(document).unbind("mousemove",i.drag).unbind("mouseup",i.stop)}};var t,i=e.jqDnR,s=i.dnr,r=i.e,n=function(i,n,a,l){return i.each((function(){(n=n?e(n,i):i).bind("mousedown",{e:i,k:a},(function(i){var n=i.data,a={};if(r=n.e,t=!!l&&e(l),"relative"!=r.css("position"))try{r.position(a)}catch(e){}return s={X:a.left||o("left")||0,Y:a.top||o("top")||0,W:o("width")||r[0].scrollWidth||0,H:o("height")||r[0].scrollHeight||0,pX:i.pageX,pY:i.pageY,k:n.k},M1=!(!t||"d"==n.k)&&{X:a.left||f1("left")||0,Y:a.top||f1("top")||0,W:t[0].offsetWidth||f1("width")||0,H:t[0].offsetHeight||f1("height")||0,pX:i.pageX,pY:i.pageY,k:n.k},e(document).mousemove(e.jqDnR.drag).mouseup(e.jqDnR.stop),!1}))}))},o=function(e){return parseInt(r.css(e))||!1};f1=function(e){return parseInt(t.css(e))||!1}}(jQuery),function(e){e.jgrid.extend({setSubGrid:function(){return this.each((function(){var t=this;if(t.p.colNames.unshift(""),t.p.colModel.unshift({name:"subgrid",width:e.browser.safari?t.p.subGridWidth+t.p.cellLayout:t.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),(t=t.p.subGridModel)[0]){t[0].align=e.extend([],t[0].align||[]);for(var i=0;i<t[0].name.length;i++)t[0].align[i]=t[0].align[i]||"left"}}))},addSubGridCell:function(e,t){var i,s,r="";return this.each((function(){r=this.formatCol(e,t),i=this.p.gridview,s=this.p.id})),!1===i?'<td role="grid" aria-describedby="'+s+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+r+"><a href='javascript:void(0);'><span class='ui-icon ui-icon-plus'></span></a></td>":'<td role="grid" aria-describedby="'+s+'_subgrid" '+r+"></td>"},addSubGrid:function(t,i){return this.each((function(){var s=this;if(s.grid){var r,n,o,a,l,d,c;e("td:eq("+i+")",t).click((function(){if(e(this).hasClass("sgcollapsed")){if(o=s.p.id,r=e(this).parent(),a=i>=1?"<td colspan='"+i+"'>&#160;</td>":"",n=e(r).attr("id"),c=!0,e.isFunction(s.p.subGridBeforeExpand)&&(c=s.p.subGridBeforeExpand(o+"_"+n,n)),!1===c)return!1;l=0,e.each(s.p.colModel,(function(){!0!==this.hidden&&"rn"!=this.name&&"cb"!=this.name||l++})),d="<tr role='row' class='ui-subgrid'>"+a+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon ui-icon-carat-1-sw'/></td><td colspan='"+parseInt(s.p.colNames.length-1-l,10)+"' class='ui-widget-content subgrid-data'><div id="+o+"_"+n+" class='tablediv'>",e(this).parent().after(d+"</div></td></tr>"),e.isFunction(s.p.subGridRowExpanded)?s.p.subGridRowExpanded(o+"_"+n,n):h(r),e(this).html("<a href='javascript:void(0);'><span class='ui-icon ui-icon-minus'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded")}else if(e(this).hasClass("sgexpanded")){if(c=!0,e.isFunction(s.p.subGridRowColapsed)&&(r=e(this).parent(),n=e(r).attr("id"),c=s.p.subGridRowColapsed(o+"_"+n,n)),!1===c)return!1;e(this).parent().next().remove(".ui-subgrid"),e(this).html("<a href='javascript:void(0);'><span class='ui-icon ui-icon-plus'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}return!1}));var h=function(t){var i,r,n,o;if(i=e(t).attr("id"),(r={nd_:(new Date).getTime()})[s.p.prmNames.subgridid]=i,!s.p.subGridModel[0])return!1;if(s.p.subGridModel[0].params)for(o=0;o<s.p.subGridModel[0].params.length;o++)for(n=0;n<s.p.colModel.length;n++)s.p.colModel[n].name==s.p.subGridModel[0].params[o]&&(r[s.p.colModel[n].name]=e("td:eq("+n+")",t).text().replace(/\&#160\;/gi,""));if(!s.grid.hDiv.loading)switch(s.grid.hDiv.loading=!0,e("#load_"+s.p.id).show(),s.p.subgridtype||(s.p.subgridtype=s.p.datatype),e.isFunction(s.p.subgridtype)?s.p.subgridtype(r):s.p.subgridtype=s.p.subgridtype.toLowerCase(),s.p.subgridtype){case"xml":case"json":e.ajax(e.extend({type:s.p.mtype,url:s.p.subGridUrl,dataType:s.p.subgridtype,data:e.isFunction(s.p.serializeSubGridData)?s.p.serializeSubGridData(r):r,complete:function(t){"xml"==s.p.subgridtype?p(t.responseXML,i):f(e.jgrid.parse(t.responseText),i)}},e.jgrid.ajaxOptions,s.p.ajaxSubgridOptions||{}))}return!1},u=function(t,i,r){i=e("<td align='"+s.p.subGridModel[0].align[r]+"'></td>").html(i),e(t).append(i)},p=function(t,i){var r,n,o,a=e("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),l=e("<tr></tr>");for(n=0;n<s.p.subGridModel[0].name.length;n++)r=e("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+s.p.direction+"'></th>"),e(r).html(s.p.subGridModel[0].name[n]),e(r).width(s.p.subGridModel[0].width[n]),e(l).append(r);return e(a).append(l),t&&(o=s.p.xmlReader.subgrid,e(o.root+" "+o.row,t).each((function(){if(l=e("<tr class='ui-widget-content ui-subtblcell'></tr>"),!0===o.repeatitems)e(o.cell,this).each((function(t){u(l,e(this).text()||"&#160;",t)}));else{var t=s.p.subGridModel[0].mapping||s.p.subGridModel[0].name;if(t)for(n=0;n<t.length;n++)u(l,e(t[n],this).text()||"&#160;",n)}e(a).append(l)}))),t=e("table:first",s.grid.bDiv).attr("id")+"_",e("#"+t+i).append(a),s.grid.hDiv.loading=!1,e("#load_"+s.p.id).hide(),!1},f=function(t,i){var r,n,o,a,l=e("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),d=e("<tr></tr>");for(n=0;n<s.p.subGridModel[0].name.length;n++)r=e("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+s.p.direction+"'></th>"),e(r).html(s.p.subGridModel[0].name[n]),e(r).width(s.p.subGridModel[0].width[n]),e(d).append(r);if(e(l).append(d),t&&void 0!==(t=t[(r=s.p.jsonReader.subgrid).root]))for(n=0;n<t.length;n++){if(o=t[n],d=e("<tr class='ui-widget-content ui-subtblcell'></tr>"),!0===r.repeatitems)for(r.cell&&(o=o[r.cell]),a=0;a<o.length;a++)u(d,o[a]||"&#160;",a);else{var c=s.p.subGridModel[0].mapping||s.p.subGridModel[0].name;if(c.length)for(a=0;a<c.length;a++)u(d,o[c[a]]||"&#160;",a)}e(l).append(d)}return n=e("table:first",s.grid.bDiv).attr("id")+"_",e("#"+n+i).append(l),s.grid.hDiv.loading=!1,e("#load_"+s.p.id).hide(),!1};s.subGridXml=function(e,t){p(e,t)},s.subGridJson=function(e,t){f(e,t)}}}))},expandSubGridRow:function(t){return this.each((function(){var i=this;(i.grid||t)&&!0===i.p.subGrid&&(i=e(this).jqGrid("getInd",t,!0))&&(i=e("td.sgcollapsed",i)[0])&&e(i).trigger("click")}))},collapseSubGridRow:function(t){return this.each((function(){var i=this;(i.grid||t)&&!0===i.p.subGrid&&(i=e(this).jqGrid("getInd",t,!0))&&(i=e("td.sgexpanded",i)[0])&&e(i).trigger("click")}))},toggleSubGridRow:function(t){return this.each((function(){var i=this;if((i.grid||t)&&!0===i.p.subGrid&&(i=e(this).jqGrid("getInd",t,!0))){var s=e("td.sgcollapsed",i)[0];(s||(s=e("td.sgexpanded",i)[0]))&&e(s).trigger("click")}}))}})}(jQuery),function(e){e.jgrid.extend({setTreeNode:function(t,i){return this.each((function(){var s=this;if(s.grid&&s.p.treeGrid){var r=s.p.expColInd,n=s.p.treeReader.expanded_field,o=s.p.treeReader.leaf_field,a=s.p.treeReader.level_field;i.level=t[a],"nested"==s.p.treeGridModel?(i.lft=t[s.p.treeReader.left_field],i.rgt=t[s.p.treeReader.right_field],t[o]||(t[o]=parseInt(i.rgt,10)===parseInt(i.lft,10)+1?"true":"false")):i.parent_id=t[s.p.treeReader.parent_id_field];var l,d=parseInt(i.level,10);0===s.p.tree_root_level?l=d+1:(l=d,d-=1),l="<div class='tree-wrap tree-wrap-"+s.p.direction+"' style='width:"+18*l+"px;'>",l+="<div style='"+("rtl"==s.p.direction?"right:":"left:")+18*d+"px;' class='ui-icon ","true"==t[o]||!0===t[o]?(l+=s.p.treeIcons.leaf+" tree-leaf'",i.isLeaf=!0):("true"==t[n]||!0===t[n]?(l+=s.p.treeIcons.minus+" tree-minus treeclick'",i.expanded=!0):(l+=s.p.treeIcons.plus+" tree-plus treeclick'",i.expanded=!1),i.isLeaf=!1),l+="</div></div>",parseInt(t[a],10)!==parseInt(s.p.tree_root_level,10)&&(e(s).jqGrid("isVisibleNode",i)||e(i).css("display","none")),e("td:eq("+r+")",i).wrapInner("<span></span>").prepend(l),e(".treeclick",i).bind("click",(function(t){return t=e(t.target||t.srcElement,s.rows).parents("tr.jqgrow")[0].rowIndex,s.rows[t].isLeaf||(s.rows[t].expanded?(e(s).jqGrid("collapseRow",s.rows[t]),e(s).jqGrid("collapseNode",s.rows[t])):(e(s).jqGrid("expandRow",s.rows[t]),e(s).jqGrid("expandNode",s.rows[t]))),!1})),!0===s.p.ExpandColClick&&e("span",i).css("cursor","pointer").bind("click",(function(t){return t=e(t.target||t.srcElement,s.rows).parents("tr.jqgrow")[0].rowIndex,s.rows[t].isLeaf||(s.rows[t].expanded?(e(s).jqGrid("collapseRow",s.rows[t]),e(s).jqGrid("collapseNode",s.rows[t])):(e(s).jqGrid("expandRow",s.rows[t]),e(s).jqGrid("expandNode",s.rows[t]))),e(s).jqGrid("setSelection",s.rows[t].id),!1}))}}))},setTreeGrid:function(){return this.each((function(){var t=this,i=0;if(t.p.treeGrid){for(var s in t.p.treedatatype||e.extend(t.p,{treedatatype:t.p.datatype}),t.p.subGrid=!1,t.p.altRows=!1,t.p.pgbuttons=!1,t.p.pginput=!1,t.p.multiselect=!1,t.p.rowList=[],t.p.treeIcons=e.extend({plus:"ui-icon-triangle-1-"+("rtl"==t.p.direction?"w":"e"),minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},t.p.treeIcons||{}),"nested"==t.p.treeGridModel?t.p.treeReader=e.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded"},t.p.treeReader):"adjacency"==t.p.treeGridModel&&(t.p.treeReader=e.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded"},t.p.treeReader)),t.p.colModel)if(t.p.colModel.hasOwnProperty(s)){if(t.p.colModel[s].name==t.p.ExpandColumn){t.p.expColInd=i;break}i++}t.p.expColInd||(t.p.expColInd=0),e.each(t.p.treeReader,(function(e,i){i&&(t.p.colNames.push(i),t.p.colModel.push({name:i,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))}))}}))},expandRow:function(t){this.each((function(){var i=this;if(i.grid&&i.p.treeGrid){var s=e(i).jqGrid("getNodeChildren",t);e(s).each((function(){e(this).css("display",""),this.expanded&&e(i).jqGrid("expandRow",this)}))}}))},collapseRow:function(t){this.each((function(){var i=this;if(i.grid&&i.p.treeGrid){var s=e(i).jqGrid("getNodeChildren",t);e(s).each((function(){e(this).css("display","none"),this.expanded&&e(i).jqGrid("collapseRow",this)}))}}))},getRootNodes:function(){var t=[];return this.each((function(){var i=this;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":var s=i.p.treeReader.level_field;e(i.rows).each((function(){parseInt(this[s],10)===parseInt(i.p.tree_root_level,10)&&t.push(this)}));break;case"adjacency":e(i.rows).each((function(){null!==this.parent_id&&"null"!=String(this.parent_id).toLowerCase()||t.push(this)}))}})),t},getNodeDepth:function(t){var i=null;return this.each((function(){if(this.grid&&this.p.treeGrid)switch(this.p.treeGridModel){case"nested":i=parseInt(t.level,10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":i=e(this).jqGrid("getNodeAncestors",t).length}})),i},getNodeParent:function(t){var i=null;return this.each((function(){var s=this;if(s.grid&&s.p.treeGrid)switch(s.p.treeGridModel){case"nested":var r=parseInt(t.lft,10),n=parseInt(t.rgt,10),o=parseInt(t.level,10);e(this.rows).each((function(){if(parseInt(this.level,10)===o-1&&parseInt(this.lft,10)<r&&parseInt(this.rgt,10)>n)return i=this,!1}));break;case"adjacency":e(this.rows).each((function(){if(this.id==t.parent_id)return i=this,!1}))}})),i},getNodeChildren:function(t){var i=[];return this.each((function(){var s=this;if(s.grid&&s.p.treeGrid)switch(s.p.treeGridModel){case"nested":var r=parseInt(t.lft,10),n=parseInt(t.rgt,10),o=parseInt(t.level,10);e(this.rows).each((function(){parseInt(this.level,10)===o+1&&parseInt(this.lft,10)>r&&parseInt(this.rgt,10)<n&&i.push(this)}));break;case"adjacency":e(this.rows).each((function(){this.parent_id==t.id&&i.push(this)}))}})),i},getFullTreeNode:function(t){var i=[];return this.each((function(){var s,r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var n=parseInt(t.lft,10),o=parseInt(t.rgt,10),a=parseInt(t.level,10);e(this.rows).each((function(){parseInt(this.level,10)>=a&&parseInt(this.lft,10)>=n&&parseInt(this.lft,10)<=o&&i.push(this)}));break;case"adjacency":i.push(t),e(this.rows).each((function(e){for(s=i.length,e=0;e<s;e++)if(i[e].id==this.parent_id){i.push(this);break}}))}})),i},getNodeAncestors:function(t){var i=[];return this.each((function(){if(this.grid&&this.p.treeGrid)for(var s=e(this).jqGrid("getNodeParent",t);s;)i.push(s),s=e(this).jqGrid("getNodeParent",s)})),i},isVisibleNode:function(t){var i=!0;return this.each((function(){var s=this;s.grid&&s.p.treeGrid&&(s=e(s).jqGrid("getNodeAncestors",t),e(s).each((function(){if(!(i=i&&this.expanded))return!1})))})),i},isNodeLoaded:function(t){var i;return this.each((function(){var s=this;s.grid&&s.p.treeGrid&&(i=void 0!==t.loaded?t.loaded:!!(t.isLeaf||e(s).jqGrid("getNodeChildren",t).length>0))})),i},expandNode:function(t){return this.each((function(){this.grid&&this.p.treeGrid&&(t.expanded||(e(this).jqGrid("isNodeLoaded",t)?(t.expanded=!0,e("div.treeclick",t).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):(t.expanded=!0,e("div.treeclick",t).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=t.rowIndex,this.p.datatype=this.p.treedatatype,"nested"==this.p.treeGridModel?e(this).jqGrid("setGridParam",{postData:{nodeid:t.id,n_left:t.lft,n_right:t.rgt,n_level:t.level}}):e(this).jqGrid("setGridParam",{postData:{nodeid:t.id,parentid:t.parent_id,n_level:t.level}}),e(this).trigger("reloadGrid"),"nested"==this.p.treeGridModel?e(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):e(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))))}))},collapseNode:function(t){return this.each((function(){this.grid&&this.p.treeGrid&&t.expanded&&(t.expanded=!1,e("div.treeclick",t).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"))}))},SortTree:function(t){return this.each((function(){if(this.grid&&this.p.treeGrid){var i,s,r,n=[],o=this,a=e(this).jqGrid("getRootNodes");for(a.sort((function(e,i){return e.sortKey<i.sortKey?-t:e.sortKey>i.sortKey?t:0})),a[0]&&(e("td",a[0]).each((function(t){e(this).css("width",o.grid.headers[t].width+"px")})),o.grid.cols=a[0].cells),i=0,s=a.length;i<s;i++)r=a[i],n.push(r),e(this).jqGrid("collectChildrenSortTree",n,r,t);e.each(n,(function(t,i){e("tbody",o.grid.bDiv).append(i),i.sortKey=null}))}}))},collectChildrenSortTree:function(t,i,s){return this.each((function(){if(this.grid&&this.p.treeGrid){var r,n,o,a=e(this).jqGrid("getNodeChildren",i);for(a.sort((function(e,t){return e.sortKey<t.sortKey?-s:e.sortKey>t.sortKey?s:0})),r=0,n=a.length;r<n;r++)o=a[r],t.push(o),e(this).jqGrid("collectChildrenSortTree",t,o,s)}}))},setTreeRow:function(t,i){var s=!1;return this.each((function(){var r=this;r.grid&&r.p.treeGrid&&(s=e(r).jqGrid("setRowData",t,i))})),s},delTreeNode:function(t){return this.each((function(){var i=this;if(i.grid&&i.p.treeGrid){var s=e(i).jqGrid("getInd",t,!0);if(s){var r=e(i).jqGrid("getNodeChildren",s);if(r.length>0)for(var n=0;n<r.length;n++)e(i).jqGrid("delRowData",r[n].id);e(i).jqGrid("delRowData",s.id)}}}))}})}(jQuery),function(e){e.jgrid.extend({jqGridImport:function(t){return t=e.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{}),this.each((function(){var i=this,s=function(t,s){var r,n=e(s.xmlGrid.config,t)[0];if(s=e(s.xmlGrid.data,t)[0],xmlJsonClass.xml2json&&e.jgrid.parse){for(var o in n=xmlJsonClass.xml2json(n," "),n=e.jgrid.parse(n))n.hasOwnProperty(o)&&(r=n[o]);s?(o=n.grid.datatype,n.grid.datatype="xmlstring",n.grid.datastr=t,e(i).jqGrid(r).jqGrid("setGridParam",{datatype:o})):e(i).jqGrid(r)}else alert("xml2json or parse are not present")},r=function(t,s){if(t&&"string"==typeof t){var r=e.jgrid.parse(t);t=r[s.jsonGrid.config],(s=r[s.jsonGrid.data])?(r=t.datatype,t.datatype="jsonstring",t.datastr=s,e(i).jqGrid(t).jqGrid("setGridParam",{datatype:r})):e(i).jqGrid(t)}};switch(t.imptype){case"xml":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(i,r){"success"==r&&(s(i.responseXML,t),e.isFunction(t.importComplete)&&t.importComplete(i))}},t.ajaxOptions));break;case"xmlstring":if(t.impstring&&"string"==typeof t.impstring){var n=e.jgrid.stringToDoc(t.impstring);n&&(s(n,t),e.isFunction(t.importComplete)&&t.importComplete(n),t.impstring=null),n=null}break;case"json":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(i,s){"success"==s&&(r(i.responseText,t),e.isFunction(t.importComplete)&&t.importComplete(i))}},t.ajaxOptions));break;case"jsonstring":t.impstring&&"string"==typeof t.impstring&&(r(t.impstring,t),e.isFunction(t.importComplete)&&t.importComplete(t.impstring),t.impstring=null)}}))},jqGridExport:function(t){t=e.extend({exptype:"xmlstring",root:"grid",ident:"\t"},t||{});var i=null;return this.each((function(){if(this.grid){var s=e.extend({},e(this).jqGrid("getGridParam"));if(s.rownumbers&&(s.colNames.splice(0,1),s.colModel.splice(0,1)),s.multiselect&&(s.colNames.splice(0,1),s.colModel.splice(0,1)),s.subGrid&&(s.colNames.splice(0,1),s.colModel.splice(0,1)),s.knv=null,s.treeGrid)for(var r in s.treeReader)s.treeReader.hasOwnProperty(r)&&(s.colNames.splice(s.colNames.length-1),s.colModel.splice(s.colModel.length-1));switch(t.exptype){case"xmlstring":i="<"+t.root+">"+xmlJsonClass.json2xml(s,t.ident)+"</"+t.root+">";break;case"jsonstring":i="{"+xmlJsonClass.toJson(s,t.root,t.ident)+"}",void 0!==s.postData.filters&&(i=(i=i.replace(/filters":"/,'filters":')).replace(/}]}"/,"}]}"))}}})),i},excelExport:function(t){return t=e.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each((function(){if($t=this,this.grid&&"remote"==t.exptype){var i=e.extend({},this.p.postData);i[t.oper]=t.tag,i=jQuery.param(i),window.location=t.url+"?"+i}}))}})}(jQuery);var xmlJsonClass={xml2json:function(e,t){return 9===e.nodeType&&(e=e.documentElement),e=this.toJson(this.toObj(this.removeWhite(e)),e.nodeName,"\t"),"{\n"+t+(t?e.replace(/\t/g,t):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var i,s=function(e,t,i){var r,n,o="";if(e instanceof Array)if(0===e.length)o+=i+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(r=0,n=e.length;r<n;r+=1){o+=i+s(e[r],t,i+"\t")+"\n"}else if("object"==typeof e){for(n in r=!1,o+=i+"<"+t,e)e.hasOwnProperty(n)&&("@"===n.charAt(0)?o+=" "+n.substr(1)+'="'+e[n].toString()+'"':r=!0);if(o+=r?">":"/>",r){for(n in e)e.hasOwnProperty(n)&&("#text"===n?o+=e[n]:"#cdata"===n?o+="<![CDATA["+e[n]+"]]>":"@"!==n.charAt(0)&&(o+=s(e[n],n,i+"\t")));o+=("\n"===o.charAt(o.length-1)?i:"")+"</"+t+">"}}else o+="function"==typeof e?i+"<"+t+"><![CDATA["+e+"]]></"+t+">":'""'===e.toString()||0===e.toString().length?i+"<"+t+">__EMPTY_STRING_</"+t+">":i+"<"+t+">"+e.toString()+"</"+t+">";return o},r="";for(i in e)e.hasOwnProperty(i)&&(r+=s(e[i],i,""));return t?r.replace(/\t/g,t):r.replace(/\t|\n/g,"")},toObj:function(e){var t={},i=/function/i;if(1===e.nodeType){var s;if(e.attributes.length)for(s=0;s<e.attributes.length;s+=1)t["@"+e.attributes[s].nodeName]=(e.attributes[s].nodeValue||"").toString();if(e.firstChild){var r,n=s=0,o=!1;for(r=e.firstChild;r;r=r.nextSibling)1===r.nodeType?o=!0:3===r.nodeType&&r.nodeValue.match(/[^ \f\n\r\t\v]/)?s+=1:4===r.nodeType&&(n+=1);if(o)if(s<2&&n<2)for(this.removeWhite(e),r=e.firstChild;r;r=r.nextSibling)3===r.nodeType?t["#text"]=this.escape(r.nodeValue):4===r.nodeType?i.test(r.nodeValue)?t[r.nodeName]=[t[r.nodeName],r.nodeValue]:t["#cdata"]=this.escape(r.nodeValue):t[r.nodeName]?t[r.nodeName]instanceof Array?t[r.nodeName][t[r.nodeName].length]=this.toObj(r):t[r.nodeName]=[t[r.nodeName],this.toObj(r)]:t[r.nodeName]=this.toObj(r);else e.attributes.length?t["#text"]=this.escape(this.innerXml(e)):t=this.escape(this.innerXml(e));else if(s)e.attributes.length?t["#text"]=this.escape(this.innerXml(e)):"__EMPTY_ARRAY_"===(t=this.escape(this.innerXml(e)))?t="[]":"__EMPTY_STRING_"===t&&(t="");else if(n)if(n>1)t=this.escape(this.innerXml(e));else for(r=e.firstChild;r;r=r.nextSibling){if(i.test(e.firstChild.nodeValue)){t=e.firstChild.nodeValue;break}t["#cdata"]=this.escape(r.nodeValue)}}e.attributes.length||e.firstChild||(t=null)}else 9===e.nodeType?t=this.toObj(e.documentElement):alert("unhandled node type: "+e.nodeType);return t},toJson:function(e,t,i){var s=t?'"'+t+'"':"";if("[]"===e)s+=t?":[]":"[]";else if(e instanceof Array){var r,n,o=[];for(n=0,r=e.length;n<r;n+=1)o[n]=this.toJson(e[n],"",i+"\t");s+=(t?":[":"[")+(o.length>1?"\n"+i+"\t"+o.join(",\n"+i+"\t")+"\n"+i:o.join(""))+"]"}else if(null===e)s+=(t&&":")+"null";else if("object"==typeof e){for(n in r=[],e)e.hasOwnProperty(n)&&(r[r.length]=this.toJson(e[n],n,i+"\t"));s+=(t?":{":"{")+(r.length>1?"\n"+i+"\t"+r.join(",\n"+i+"\t")+"\n"+i:r.join(""))+"}"}else"string"==typeof e?(i=/function/i,r=e.toString(),s+=/(^-?\d+\.?\d*$)/.test(r)||i.test(r)||"false"===r||"true"===r?(t&&":")+r:(t&&":")+'"'+e+'"'):s+=(t&&":")+e.toString();return s},innerXml:function(e){var t="";if("innerHTML"in e)t=e.innerHTML;else{var i=function(e){var t,s="";if(1===e.nodeType){for(s+="<"+e.nodeName,t=0;t<e.attributes.length;t+=1)s+=" "+e.attributes[t].nodeName+'="'+(e.attributes[t].nodeValue||"").toString()+'"';if(e.firstChild){for(s+=">",t=e.firstChild;t;t=t.nextSibling)s+=i(t);s+="</"+e.nodeName+">"}else s+="/>"}else 3===e.nodeType?s+=e.nodeValue:4===e.nodeType&&(s+="<![CDATA["+e.nodeValue+"]]>");return s};for(e=e.firstChild;e;e=e.nextSibling)t+=i(e)}return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){var t;for(e.normalize(),t=e.firstChild;t;)if(3===t.nodeType)if(t.nodeValue.match(/[^ \f\n\r\t\v]/))t=t.nextSibling;else{var i=t.nextSibling;e.removeChild(t),t=i}else 1===t.nodeType&&this.removeWhite(t),t=t.nextSibling;return e}};function tableToGrid(e,t){jQuery(e).each((function(){if(!this.grid){jQuery(this).width("99%");var e=jQuery(this).width(),i=jQuery("input[type=checkbox]:first",jQuery(this)),s=jQuery("input[type=radio]:first",jQuery(this)),r=i.length>0,n=!r&&s.length>0,o=r||n;i=i.attr("name")||s.attr("name");var a=[],l=[];jQuery("th",jQuery(this)).each((function(){0===a.length&&o?(a.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),l.push("__selection__")):(a.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),l.push(jQuery(this).html()))}));var d=[],c=[],h=[];for(jQuery("tbody > tr",jQuery(this)).each((function(){var e={},t=0;jQuery("td",jQuery(this)).each((function(){if(0===t&&o){var i=jQuery("input",jQuery(this)),s=i.attr("value");c.push(s||d.length),i.attr("checked")&&h.push(s),e[a[t].name]=i.attr("value")}else e[a[t].name]=jQuery(this).html();t++})),t>0&&d.push(e)})),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid($.extend({datatype:"local",width:e,colNames:l,colModel:a,multiselect:r},t||{})),e=0;e<d.length;e++)r=null,c.length>0&&(r=c[e])&&r.replace&&(r=encodeURIComponent(r).replace(/[.\-%]/g,"_")),null===r&&(r=e+1),jQuery(this).jqGrid("addRowData",r,d[e]);for(e=0;e<h.length;e++)jQuery(this).jqGrid("setSelection",h[e])}}))}!function(e){e.jgrid.extend({setColumns:function(t){return t=e.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:!1,drag:!0,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:!0,ShrinkToFit:!1,jqModal:!1,saveicon:[!0,"left","ui-icon-disk"],closeicon:[!0,"left","ui-icon-close"],onClose:null,colnameview:!0,closeAfterSubmit:!0,updateAfterCheck:!1,recreateForm:!1},e.jgrid.col,t||{}),this.each((function(){var s=this;if(s.grid){var r="function"==typeof t.beforeShowForm,n="function"==typeof t.afterShowForm,o="function"==typeof t.afterSubmitForm,a=s.p.id,l="ColTbl_"+a,d={themodal:"colmod"+a,modalhead:"colhd"+a,modalcontent:"colcnt"+a,scrollelm:l};if(!0===t.recreateForm&&null!=e("#"+d.themodal).html()&&e("#"+d.themodal).remove(),null!=e("#"+d.themodal).html())r&&t.beforeShowForm(e("#"+l)),viewModal("#"+d.themodal,{gbox:"#gbox_"+a,jqm:t.jqModal,jqM:!1,modal:t.modal});else{var c=isNaN(t.dataheight)?t.dataheight:t.dataheight+"px";for(c="<div id='"+l+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+c+";'>",c+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>",i=0;i<this.p.colNames.length;i++)s.p.colModel[i].hidedlg||(c+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+(!1===this.p.colModel[i].hidden?"checked":"")+"/><label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+(t.colnameview?" ("+this.p.colModel[i].name+")":"")+"</label></td></tr>");c+="</tbody></table></div>",c+="<table border='0' class='EditTable' id='"+l+"_2'><tbody><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DataTD ui-widget-content'></td></tr><tr><td class='ColButton EditButton'>"+(t.updateAfterCheck?"":"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+t.bSubmit+"</a>")+"&#160;<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+t.bCancel+"</a></td></tr></tbody></table>",t.gbox="#gbox_"+a,createModal(d,c,t,"#gview_"+s.p.id,e("#gview_"+s.p.id)[0]),1==t.saveicon[0]&&e("#dData","#"+l+"_2").addClass("right"==t.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+t.saveicon[2]+"'></span>"),1==t.closeicon[0]&&e("#eData","#"+l+"_2").addClass("right"==t.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+t.closeicon[2]+"'></span>"),t.updateAfterCheck?e(":input","#"+l).click((function(){var i=this.id.substr(4);return i&&(this.checked?e(s).jqGrid("showCol",i):e(s).jqGrid("hideCol",i),!0===t.ShrinkToFit&&e(s).jqGrid("setGridWidth",s.grid.width-.001,!0)),this})):e("#dData","#"+l+"_2").click((function(){for(i=0;i<s.p.colModel.length;i++)if(!s.p.colModel[i].hidedlg){var r=s.p.colModel[i].name.replace(".","\\.");e("#col_"+r,"#"+l).attr("checked")?(e(s).jqGrid("showCol",s.p.colModel[i].name),e("#col_"+r,"#"+l).attr("defaultChecked",!0)):(e(s).jqGrid("hideCol",s.p.colModel[i].name),e("#col_"+r,"#"+l).attr("defaultChecked",""))}return!0===t.ShrinkToFit&&e(s).jqGrid("setGridWidth",s.grid.width-.001,!0),t.closeAfterSubmit&&hideModal("#"+d.themodal,{gb:"#gbox_"+a,jqm:t.jqModal,onClose:t.onClose}),o&&t.afterSubmitForm(e("#"+l)),!1})),e("#eData","#"+l+"_2").click((function(){return hideModal("#"+d.themodal,{gb:"#gbox_"+a,jqm:t.jqModal,onClose:t.onClose}),!1})),e("#dData, #eData","#"+l+"_2").hover((function(){e(this).addClass("ui-state-hover")}),(function(){e(this).removeClass("ui-state-hover")})),r&&t.beforeShowForm(e("#"+l)),viewModal("#"+d.themodal,{gbox:"#gbox_"+a,jqm:t.jqModal,jqM:!0,modal:t.modal})}n&&t.afterShowForm(e("#"+l))}}))}})}(jQuery),function(e){e.jgrid.extend({getPostData:function(){var e=this[0];if(e.grid)return e.p.postData},setPostData:function(e){var t=this[0];t.grid&&("object"==typeof e?t.p.postData=e:alert("Error: cannot add a non-object postData value. postData unchanged."))},appendPostData:function(t){var i=this[0];i.grid&&("object"==typeof t?e.extend(i.p.postData,t):alert("Error: cannot append a non-object postData value. postData unchanged."))},setPostDataItem:function(e,t){var i=this[0];i.grid&&(i.p.postData[e]=t)},getPostDataItem:function(e){var t=this[0];if(t.grid)return t.p.postData[e]},removePostDataItem:function(e){var t=this[0];t.grid&&delete t.p.postData[e]},getUserData:function(){var e=this[0];if(e.grid)return e.p.userData},getUserDataItem:function(e){var t=this[0];if(t.grid)return t.p.userData[e]}})}(jQuery),function(a){if(a.browser.msie&&8==a.browser.version&&(a.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"==e.style.display}),a.jgrid._multiselect=!1,a.ui&&a.ui.multiselect){if(a.ui.multiselect.prototype._setSelected){var q=a.ui.multiselect.prototype._setSelected;a.ui.multiselect.prototype._setSelected=function(e,t){if(e=q.call(this,e,t),t&&this.selectedList){var i=this.element;this.selectedList.find("li").each((function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(i)}))}return e}}a.ui.multiselect.prototype.destroy&&(a.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===a.Widget?a.widget.prototype.destroy.apply(this,arguments):a.Widget.prototype.destroy.apply(this,arguments)}),a.jgrid._multiselect=!0}a.jgrid.extend({sortableColumns:function(e){return this.each((function(){function t(){i.p.disableClick=!0}var i=this,s={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_cb,#jqgh_rn,#jqgh_subgrid),:hidden)",placeholder:{element:function(e){return a(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},update:function(e,t){e=a(t.item).parent(),e=a(">th",e);var s={};a.each(i.p.colModel,(function(e){s[this.name]=e}));var r=[];e.each((function(){var e=a(">div",this).get(0).id.replace(/^jqgh_/,"");e in s&&r.push(s[e])})),a(i).jqGrid("remapColumns",r,!0,!0),a.isFunction(i.p.sortable.update)&&i.p.sortable.update(r),setTimeout((function(){i.p.disableClick=!1}),50)}};if(i.p.sortable.options?a.extend(s,i.p.sortable.options):a.isFunction(i.p.sortable)&&(i.p.sortable={update:i.p.sortable}),s.start){var r=s.start;s.start=function(e,i){t(),r.call(this,e,i)}}else s.start=t;i.p.sortable.exclude&&(s.items+=":not("+i.p.sortable.exclude+")"),e.sortable(s).data("sortable").floating=!0}))},columnChooser:function(e){function t(e,t){e&&("string"==typeof e?a.fn[e]&&a.fn[e].apply(t,a.makeArray(arguments).slice(2)):a.isFunction(e)&&e.apply(t,a.makeArray(arguments).slice(2)))}var i=this;if(!a("#colchooser_"+i[0].p.id).length){var s=a('<div id="colchooser_'+i[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),r=a("select",s);if(e=a.extend({width:420,height:240,classname:null,done:function(e){e&&i.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dlog_opts:function(e){var t={};return t[e.bSubmit]=function(){e.apply_perm(),e.cleanup(!1)},t[e.bCancel]=function(){e.cleanup(!0)},{buttons:t,close:function(){e.cleanup(!0)},modal:!1,resizable:!1,width:e.width+20}},apply_perm:function(){a("option",r).each((function(){this.selected?i.jqGrid("showCol",n[this.value].name):i.jqGrid("hideCol",n[this.value].name)}));var t=[];a("option[selected]",r).each((function(){t.push(parseInt(this.value,10))})),a.each(t,(function(){delete l[n[parseInt(this,10)].name]})),a.each(l,(function(){var e=parseInt(this,10);t=function(e,t,i){if(t>=0){var s=e.slice(),r=s.splice(t,Math.max(e.length-t,t));return t>e.length&&(t=e.length),s[t]=i,s.concat(r)}}(t,e,e)})),e.done&&e.done.call(i,t)},cleanup:function(n){t(e.dlog,s,"destroy"),t(e.msel,r,"destroy"),s.remove(),n&&e.done&&e.done.call(i)},msel_opts:{}},a.jgrid.col,e||{}),a.ui&&a.ui.multiselect&&"multiselect"==e.msel){if(!a.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");e.msel_opts=a.extend(a.ui.multiselect.defaults,e.msel_opts)}e.caption&&s.attr("title",e.caption),e.classname&&(s.addClass(e.classname),r.addClass(e.classname)),e.width&&(a(">div",s).css({width:e.width,margin:"0 auto"}),r.css("width",e.width)),e.height&&(a(">div",s).css("height",e.height),r.css("height",e.height-10));var n=i.jqGrid("getGridParam","colModel"),o=i.jqGrid("getGridParam","colNames"),l={},d=[];r.empty(),a.each(n,(function(e){l[this.name]=e,this.hidedlg?this.hidden||d.push(e):r.append("<option value='"+e+"' "+(this.hidden?"":"selected='selected'")+">"+o[e]+"</option>")}));var c=a.isFunction(e.dlog_opts)?e.dlog_opts.call(i,e):e.dlog_opts;t(e.dlog,s,c),c=a.isFunction(e.msel_opts)?e.msel_opts.call(i,e):e.msel_opts,t(e.msel,r,c)}},sortableRows:function(e){return this.each((function(){var t=this;t.grid&&(t.p.treeGrid||a.fn.sortable&&((e=a.extend({cursor:"move",axis:"y",items:".jqgrow"},e||{})).start&&a.isFunction(e.start)?(e._start_=e.start,delete e.start):e._start_=!1,e.update&&a.isFunction(e.update)?(e._update_=e.update,delete e.update):e._update_=!1,e.start=function(i,s){if(a(s.item).css("border-width","0px"),a("td",s.item).each((function(e){this.style.width=t.grid.cols[e].style.width})),t.p.subGrid){var r=a(s.item).attr("id");try{a(t).jqGrid("collapseSubGridRow",r)}catch(e){}}e._start_&&e._start_.apply(this,[i,s])},e.update=function(i,s){a(s.item).css("border-width",""),t.updateColumns(),!0===t.p.rownumbers&&a("td.jqgrid-rownum",t.rows).each((function(e){a(this).html(e+1)})),e._update_&&e._update_.apply(this,[i,s])},a("tbody:first",t).sortable(e),a("tbody:first",t).disableSelection()))}))},gridDnD:function(e){return this.each((function(){function t(){var e=a.data(i,"dnd");a("tr.jqgrow:not(.ui-draggable)",i).draggable(a.isFunction(e.drag)?e.drag.call(a(i),e):e.drag)}var i=this;if(i.grid&&!i.p.treeGrid&&a.fn.draggable&&a.fn.droppable)if(null===a("#jqgrid_dnd").html()&&a("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"==typeof e&&"updateDnD"==e&&!0===i.p.jqgdnd)t();else if((e=a.extend({drag:function(e){return a.extend({start:function(t,s){if(i.p.subGrid){var r=a(s.helper).attr("id");try{a(i).jqGrid("collapseSubGridRow",r)}catch(e){}}for(r=0;r<a.data(i,"dnd").connectWith.length;r++)"0"==a(a.data(i,"dnd").connectWith[r]).jqGrid("getGridParam","reccount")&&a(a.data(i,"dnd").connectWith[r]).jqGrid("addRowData","jqg_empty_row",{});s.helper.addClass("ui-state-highlight"),a("td",s.helper).each((function(e){this.style.width=i.grid.headers[e].width+"px"})),e.onstart&&a.isFunction(e.onstart)&&e.onstart.call(a(i),t,s)},stop:function(t,s){if(s.helper.dropped){var r=a(s.helper).attr("id");a(i).jqGrid("delRowData",r)}for(r=0;r<a.data(i,"dnd").connectWith.length;r++)a(a.data(i,"dnd").connectWith[r]).jqGrid("delRowData","jqg_empty_row");e.onstop&&a.isFunction(e.onstop)&&e.onstop.call(a(i),t,s)}},e.drag_opts||{})},drop:function(e){return a.extend({accept:function(e){var t=a(e).closest("table.ui-jqgrid-btable");return void 0!==a.data(t[0],"dnd")?(e=a.data(t[0],"dnd").connectWith,-1!=a.inArray("#"+this.id,e)):e},drop:function(t,s){var r,n=a(s.draggable).attr("id");if(n=a("#"+i.id).jqGrid("getRowData",n),!e.dropbyname){var o,l=0,d={},c=a("#"+this.id).jqGrid("getGridParam","colModel");try{for(var h in n)n.hasOwnProperty(h)&&c[l]&&(d[o=c[l].name]=n[h]),l++;n=d}catch(e){}}(s.helper.dropped=!0,e.beforedrop&&a.isFunction(e.beforedrop)&&null!=(o=e.beforedrop.call(this,t,s,n,a("#"+i.id),a(this)))&&"object"==typeof o&&(n=o),s.helper.dropped)&&(e.autoid&&(a.isFunction(e.autoid)?r=e.autoid.call(this,n):(r=Math.ceil(1e3*Math.random()),r=e.autoidprefix+r)),a("#"+this.id).jqGrid("addRowData",r,n,e.droppos));e.ondrop&&a.isFunction(e.ondrop)&&e.ondrop.call(this,t,s,n)}},e.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},e||{})).connectWith){e.connectWith=e.connectWith.split(","),e.connectWith=a.map(e.connectWith,(function(e){return a.trim(e)})),a.data(i,"dnd",e),"0"!=i.p.reccount&&!i.p.jqgdnd&&t(),i.p.jqgdnd=!0;for(var s=0;s<e.connectWith.length;s++)a(e.connectWith[s]).droppable(a.isFunction(e.drop)?e.drop.call(a(i),e):e.drop)}}))},gridResize:function(b){return this.each((function(){var i=this;i.grid&&a.fn.resizable&&(b=a.extend({},b||{}),b.alsoResize?(b._alsoResize_=b.alsoResize,delete b.alsoResize):b._alsoResize_=!1,b.stop&&a.isFunction(b.stop)?(b._stop_=b.stop,delete b.stop):b._stop_=!1,b.stop=function(e,t){a(i).jqGrid("setGridParam",{height:a("#gview_"+i.p.id+" .ui-jqgrid-bdiv").height()}),a(i).jqGrid("setGridWidth",t.size.width,b.shrinkToFit),b._stop_&&b._stop_.call(i,e,t)},b.alsoResize=b._alsoResize_?eval("({'#gview_"+i.p.id+" .ui-jqgrid-bdiv':true,'"+b._alsoResize_+"':true})"):a(".ui-jqgrid-bdiv","#gview_"+i.p.id),delete b._alsoResize_,a("#gbox_"+i.p.id).resizable(b))}))}})}(jQuery),function(e){e.color={},e.color.make=function(t,i,s,r){var n={};return n.r=t||0,n.g=i||0,n.b=s||0,n.a=null!=r?r:1,n.add=function(e,t){for(var i=0;i<e.length;++i)n[e.charAt(i)]+=t;return n.normalize()},n.scale=function(e,t){for(var i=0;i<e.length;++i)n[e.charAt(i)]*=t;return n.normalize()},n.toString=function(){return n.a>=1?"rgb("+[n.r,n.g,n.b].join(",")+")":"rgba("+[n.r,n.g,n.b,n.a].join(",")+")"},n.normalize=function(){function e(e,t,i){return t<e?e:t>i?i:t}return n.r=e(0,parseInt(n.r),255),n.g=e(0,parseInt(n.g),255),n.b=e(0,parseInt(n.b),255),n.a=e(0,n.a,1),n},n.clone=function(){return e.color.make(n.r,n.b,n.g,n.a)},n.normalize()},e.color.extract=function(t,i){var s;do{if(""!=(s=t.css(i).toLowerCase())&&"transparent"!=s)break;t=t.parent()}while(!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==s&&(s="transparent"),e.color.parse(s)},e.color.parse=function(i){var s,r=e.color.make;if(s=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return r(parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10));if(s=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return r(parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10),parseFloat(s[4]));if(s=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return r(2.55*parseFloat(s[1]),2.55*parseFloat(s[2]),2.55*parseFloat(s[3]));if(s=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return r(2.55*parseFloat(s[1]),2.55*parseFloat(s[2]),2.55*parseFloat(s[3]),parseFloat(s[4]));if(s=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return r(parseInt(s[1],16),parseInt(s[2],16),parseInt(s[3],16));if(s=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return r(parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16),parseInt(s[3]+s[3],16));var n=e.trim(i).toLowerCase();return"transparent"==n?r(255,255,255,0):r((s=t[n]||[0,0,0])[0],s[1],s[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){function t(t,r,n,o){var a=[],l={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},d=null,c=null,h=null,u=null,p=null,f=[],g=[],m={left:0,right:0,top:0,bottom:0},v=0,b=0,y=0,w=0,_={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},x=this;function C(e,t){t=[x].concat(t);for(var i=0;i<e.length;++i)e[i].apply(this,t)}function k(t){a=function(t){for(var i=[],s=0;s<t.length;++s){var r=e.extend(!0,{},l.series);null!=t[s].data?(r.data=t[s].data,delete t[s].data,e.extend(!0,r,t[s]),t[s].data=r.data):r.data=t[s],i.push(r)}return i}(t),function(){var t,i=a.length,s=[],r=[];for(t=0;t<a.length;++t){var n=a[t].color;null!=n&&(--i,"number"==typeof n?r.push(n):s.push(e.color.parse(a[t].color)))}for(t=0;t<r.length;++t)i=Math.max(i,r[t]+1);var o=[],d=0;t=0;for(;o.length<i;){var c,h=d%2==1?-1:1;(c=l.colors.length==t?e.color.make(100,100,100):e.color.parse(l.colors[t])).scale("rgb",1+h*Math.ceil(d/2)*.2),o.push(c),++t>=l.colors.length&&(t=0,++d)}var u,p=0;for(t=0;t<a.length;++t){if(null==(u=a[t]).color?(u.color=o[p].toString(),++p):"number"==typeof u.color&&(u.color=o[u.color].toString()),null==u.lines.show){var m,v=!0;for(m in u)if(u[m]&&u[m].show){v=!1;break}v&&(u.lines.show=!0)}u.xaxis=M(f,D(u,"x")),u.yaxis=M(g,D(u,"y"))}}(),function(){var t,i,s,r,n,o,l,d,c,h,u=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,f=Number.MAX_VALUE;function g(e,t,i){t<e.datamin&&t!=-f&&(e.datamin=t),i>e.datamax&&i!=f&&(e.datamax=i)}for(e.each(j(),(function(e,t){t.datamin=u,t.datamax=p,t.used=!1})),t=0;t<a.length;++t)(n=a[t]).datapoints={points:[]},C(_.processRawData,[n,n.data,n.datapoints]);for(t=0;t<a.length;++t){var m=(n=a[t]).data,v=n.datapoints.format;if(v||((v=[]).push({x:!0,number:!0,required:!0}),v.push({y:!0,number:!0,required:!0}),(n.bars.show||n.lines.show&&n.lines.fill)&&(v.push({y:!0,number:!0,required:!1,defaultValue:0}),n.bars.horizontal&&(delete v[v.length-1].y,v[v.length-1].x=!0)),n.datapoints.format=v),null==n.datapoints.pointsize)for(n.datapoints.pointsize=v.length,l=n.datapoints.pointsize,o=n.datapoints.points,insertSteps=n.lines.show&&n.lines.steps,n.xaxis.used=n.yaxis.used=!0,i=s=0;i<m.length;++i,s+=l){var b=null==(h=m[i]);if(!b)for(r=0;r<l;++r)d=h[r],(c=v[r])&&(c.number&&null!=d&&(d=+d,isNaN(d)?d=null:d==1/0?d=f:d==-1/0&&(d=-f)),null==d&&(c.required&&(b=!0),null!=c.defaultValue&&(d=c.defaultValue))),o[s+r]=d;if(b)for(r=0;r<l;++r)null!=(d=o[s+r])&&((c=v[r]).x&&g(n.xaxis,d,d),c.y&&g(n.yaxis,d,d)),o[s+r]=null;else if(insertSteps&&s>0&&null!=o[s-l]&&o[s-l]!=o[s]&&o[s-l+1]!=o[s+1]){for(r=0;r<l;++r)o[s+l+r]=o[s+r];o[s+1]=o[s-l+1],s+=l}}}for(t=0;t<a.length;++t)n=a[t],C(_.processDatapoints,[n,n.datapoints]);for(t=0;t<a.length;++t){o=(n=a[t]).datapoints.points,l=n.datapoints.pointsize;var y=u,w=u,x=p,k=p;for(i=0;i<o.length;i+=l)if(null!=o[i])for(r=0;r<l;++r)d=o[i+r],(c=v[r])&&d!=f&&d!=-f&&(c.x&&(d<y&&(y=d),d>x&&(x=d)),c.y&&(d<w&&(w=d),d>k&&(k=d)));if(n.bars.show){var D="left"==n.bars.align?0:-n.bars.barWidth/2;n.bars.horizontal?(w+=D,k+=D+n.bars.barWidth):(y+=D,x+=D+n.bars.barWidth)}g(n.xaxis,y,x),g(n.yaxis,w,k)}e.each(j(),(function(e,t){t.datamin==u&&(t.datamin=null),t.datamax==p&&(t.datamax=null)}))}()}function D(e,t){var i=e[t+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function j(){return e.grep(f.concat(g),(function(e){return e}))}function S(e){var t,i,s={};for(t=0;t<f.length;++t)(i=f[t])&&i.used&&(s["x"+i.n]=i.c2p(e.left));for(t=0;t<g.length;++t)(i=g[t])&&i.used&&(s["y"+i.n]=i.c2p(e.top));return void 0!==s.x1&&(s.x=s.x1),void 0!==s.y1&&(s.y=s.y1),s}function M(t,i){return t[i-1]||(t[i-1]={n:i,direction:t==f?"x":"y",options:e.extend(!0,{},t==f?l.xaxis:l.yaxis)}),t[i-1]}function A(i,s){var r=document.createElement("canvas");return r.className=s,r.width=v,r.height=b,i||e(r).css({position:"absolute",left:0,top:0}),e(r).appendTo(t),r.getContext||(r=window.G_vmlCanvasManager.initElement(r)),r.getContext("2d").save(),r}function T(){if(v=t.width(),b=t.height(),v<=0||b<=0)throw"Invalid dimensions for plot, width = "+v+", height = "+b}function F(e){e.width!=v&&(e.width=v),e.height!=b&&(e.height=b);var t=e.getContext("2d");t.restore(),t.save()}function O(t){var i=t.labelWidth,s=t.labelHeight,r=t.options.position,n=t.options.tickLength,o=l.grid.axisMargin,a=l.grid.labelMargin,d="x"==t.direction?f:g,c=e.grep(d,(function(e){return e&&e.options.position==r&&e.reserveSpace}));e.inArray(t,c)==c.length-1&&(o=0),null==n&&(n="full");var h=e.grep(d,(function(e){return e&&e.reserveSpace})),u=0==e.inArray(t,h);u||"full"!=n||(n=5),isNaN(+n)||(a+=+n),"x"==t.direction?(s+=a,"bottom"==r?(m.bottom+=s+o,t.box={top:b-m.bottom,height:s}):(t.box={top:m.top+o,height:s},m.top+=s+o)):(i+=a,"left"==r?(t.box={left:m.left+o,width:i},m.left+=i+o):(m.right+=i+o,t.box={left:v-m.right,width:i})),t.position=r,t.tickLength=n,t.box.padding=a,t.innermost=u}function I(){var i,r=j();if(e.each(r,(function(e,t){t.show=t.options.show,null==t.show&&(t.show=t.used),t.reserveSpace=t.show||t.options.reserveSpace,function(e){var t=e.options,i=+(null!=t.min?t.min:e.datamin),s=+(null!=t.max?t.max:e.datamax),r=s-i;if(0==r){var n=0==s?1:.01;null==t.min&&(i-=n),null!=t.max&&null==t.min||(s+=n)}else{var o=t.autoscaleMargin;null!=o&&(null==t.min&&(i-=r*o)<0&&null!=e.datamin&&e.datamin>=0&&(i=0),null==t.max&&(s+=r*o)>0&&null!=e.datamax&&e.datamax<=0&&(s=0))}e.min=i,e.max=s}(t)})),allocatedAxes=e.grep(r,(function(e){return e.reserveSpace})),m.left=m.right=m.top=m.bottom=0,l.grid.show){for(e.each(allocatedAxes,(function(i,r){!function(t){var i,r=t.options;i="number"==typeof r.ticks&&r.ticks>0?r.ticks:.3*Math.sqrt("x"==t.direction?v:b);var n,o,a,l,d,c,h=(t.max-t.min)/i;if("time"==r.mode){var u={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3},p=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],m=0;null!=r.minTickSize&&(m="number"==typeof r.tickSize?r.tickSize:r.minTickSize[0]*u[r.minTickSize[1]]);for(var y=0;y<p.length-1&&!(h<(p[y][0]*u[p[y][1]]+p[y+1][0]*u[p[y+1][1]])/2&&p[y][0]*u[p[y][1]]>=m);++y);n=p[y][0],"year"==(a=p[y][1])&&(d=Math.pow(10,Math.floor(Math.log(h/u.year)/Math.LN10)),n=(c=h/u.year/d)<1.5?1:c<3?2:c<7.5?5:10,n*=d),t.tickSize=r.tickSize||[n,a],o=function(e){var t=[],i=e.tickSize[0],r=e.tickSize[1],n=new Date(e.min),o=i*u[r];"second"==r&&n.setUTCSeconds(s(n.getUTCSeconds(),i)),"minute"==r&&n.setUTCMinutes(s(n.getUTCMinutes(),i)),"hour"==r&&n.setUTCHours(s(n.getUTCHours(),i)),"month"==r&&n.setUTCMonth(s(n.getUTCMonth(),i)),"year"==r&&n.setUTCFullYear(s(n.getUTCFullYear(),i)),n.setUTCMilliseconds(0),o>=u.minute&&n.setUTCSeconds(0),o>=u.hour&&n.setUTCMinutes(0),o>=u.day&&n.setUTCHours(0),o>=4*u.day&&n.setUTCDate(1),o>=u.year&&n.setUTCMonth(0);var a,l=0,d=Number.NaN;do{if(a=d,d=n.getTime(),t.push(d),"month"==r)if(i<1){n.setUTCDate(1);var c=n.getTime();n.setUTCMonth(n.getUTCMonth()+1);var h=n.getTime();n.setTime(d+l*u.hour+(h-c)*i),l=n.getUTCHours(),n.setUTCHours(0)}else n.setUTCMonth(n.getUTCMonth()+i);else"year"==r?n.setUTCFullYear(n.getUTCFullYear()+i):n.setTime(d+o)}while(d<e.max&&d!=a);return t},l=function(t,i){var s=new Date(t);if(null!=r.timeformat)return e.plot.formatDate(s,r.timeformat,r.monthNames);var n=i.tickSize[0]*u[i.tickSize[1]],o=i.max-i.min,a=r.twelveHourClock?" %p":"";return n<u.minute?fmt="%h:%M:%S"+a:n<u.day?o<2*u.day?fmt="%h:%M"+a:fmt="%b %d %h:%M"+a:n<u.month?fmt="%b %d":n<u.year?o<u.year?fmt="%b":fmt="%b %y":fmt="%y",e.plot.formatDate(s,fmt,r.monthNames)}}else{var w=r.tickDecimals,_=-Math.floor(Math.log(h)/Math.LN10);null!=w&&_>w&&(_=w),(c=h/(d=Math.pow(10,-_)))<1.5?n=1:c<3?(n=2,c>2.25&&(null==w||_+1<=w)&&(n=2.5,++_)):n=c<7.5?5:10,n*=d,null!=r.minTickSize&&n<r.minTickSize&&(n=r.minTickSize),t.tickDecimals=Math.max(0,null!=w?w:_),t.tickSize=r.tickSize||n,o=function(e){var t,i=[],r=s(e.min,e.tickSize),n=0,o=Number.NaN;do{t=o,o=r+n*e.tickSize,i.push(o),++n}while(o<e.max&&o!=t);return i},l=function(e,t){return e.toFixed(t.tickDecimals)}}if(null!=r.alignTicksWithAxis){var x=("x"==t.direction?f:g)[r.alignTicksWithAxis-1];if(x&&x.used&&x!=t){var C=o(t);if(C.length>0&&(null==r.min&&(t.min=Math.min(t.min,C[0])),null==r.max&&C.length>1&&(t.max=Math.max(t.max,C[C.length-1]))),o=function(e){var t,i,s=[];for(i=0;i<x.ticks.length;++i)t=(x.ticks[i].v-x.min)/(x.max-x.min),t=e.min+t*(e.max-e.min),s.push(t);return s},"time"!=t.mode&&null==r.tickDecimals){var k=Math.max(0,1-Math.floor(Math.log(h)/Math.LN10)),D=o(t);D.length>1&&/\..*0$/.test((D[1]-D[0]).toFixed(k))||(t.tickDecimals=k)}}}t.tickGenerator=o,e.isFunction(r.tickFormatter)?t.tickFormatter=function(e,t){return""+r.tickFormatter(e,t)}:t.tickFormatter=l}(r),function(t){var i,s,r=t.options.ticks,n=[];null==r||"number"==typeof r&&r>0?n=t.tickGenerator(t):r&&(n=e.isFunction(r)?r({min:t.min,max:t.max}):r);for(t.ticks=[],i=0;i<n.length;++i){var o=null,a=n[i];"object"==typeof a?(s=+a[0],a.length>1&&(o=a[1])):s=+a,null==o&&(o=t.tickFormatter(s,t)),isNaN(s)||t.ticks.push({v:s,label:o})}}(r),function(e,t){e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v)),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v)))}(r,r.ticks),function(i){var s,r,n,o=i.options,a=i.ticks||[],l=[],d=o.labelWidth,c=o.labelHeight;function h(s,r){return e('<div style="position:absolute;top:-10000px;'+r+'font-size:smaller"><div class="'+i.direction+"Axis "+i.direction+i.n+'Axis">'+s.join("")+"</div></div>").appendTo(t)}if("x"==i.direction){if(null==d&&(d=Math.floor(v/(a.length>0?a.length:1))),null==c){for(l=[],s=0;s<a.length;++s)(r=a[s].label)&&l.push('<div class="tickLabel" style="float:left;width:'+d+'px">'+r+"</div>");l.length>0&&(l.push('<div style="clear:left"></div>'),c=(n=h(l,"width:10000px;")).height(),n.remove())}}else if(null==d||null==c){for(s=0;s<a.length;++s)(r=a[s].label)&&l.push('<div class="tickLabel">'+r+"</div>");l.length>0&&(n=h(l,""),null==d&&(d=n.children().width()),null==c&&(c=n.find("div.tickLabel").height()),n.remove())}null==d&&(d=0),null==c&&(c=0),i.labelWidth=d,i.labelHeight=c}(r)})),i=allocatedAxes.length-1;i>=0;--i)O(allocatedAxes[i]);var n=l.grid.minBorderMargin;if(null==n)for(n=0,i=0;i<a.length;++i)n=Math.max(n,a[i].points.radius+a[i].points.lineWidth/2);for(var o in m)m[o]+=l.grid.borderWidth,m[o]=Math.max(n,m[o])}y=v-m.left-m.right,w=b-m.bottom-m.top,e.each(r,(function(e,t){!function(e){function t(e){return e}var i,s,r=e.options.transform||t,n=e.options.inverseTransform;"x"==e.direction?(i=e.scale=y/Math.abs(r(e.max)-r(e.min)),s=Math.min(r(e.max),r(e.min))):(i=-(i=e.scale=w/Math.abs(r(e.max)-r(e.min))),s=Math.max(r(e.max),r(e.min))),e.p2c=r==t?function(e){return(e-s)*i}:function(e){return(r(e)-s)*i},e.c2p=n?function(e){return n(s+e/i)}:function(e){return s+e/i}}(t)})),l.grid.show&&(e.each(allocatedAxes,(function(e,t){!function(e){"x"==e.direction?(e.box.left=m.left,e.box.width=y):(e.box.top=m.top,e.box.height=w)}(t)})),function(){t.find(".tickLabels").remove();for(var e=['<div class="tickLabels" style="font-size:smaller">'],i=j(),s=0;s<i.length;++s){var r=i[s],n=r.box;if(r.show){e.push('<div class="'+r.direction+"Axis "+r.direction+r.n+'Axis" style="color:'+r.options.color+'">');for(var o=0;o<r.ticks.length;++o){var a=r.ticks[o];if(!(!a.label||a.v<r.min||a.v>r.max)){var l,d={};"x"==r.direction?(l="center",d.left=Math.round(m.left+r.p2c(a.v)-r.labelWidth/2),"bottom"==r.position?d.top=n.top+n.padding:d.bottom=b-(n.top+n.height-n.padding)):(d.top=Math.round(m.top+r.p2c(a.v)-r.labelHeight/2),"left"==r.position?(d.right=v-(n.left+n.width-n.padding),l="right"):(d.left=n.left+n.padding,l="left")),d.width=r.labelWidth;var c=["position:absolute","text-align:"+l];for(var h in d)c.push(h+":"+d[h]+"px");e.push('<div class="tickLabel" style="'+c.join(";")+'">'+a.label+"</div>")}}e.push("</div>")}}e.push("</div>"),t.append(e.join(""))}()),function(){if(t.find(".legend").remove(),!l.legend.show)return;for(var i,s,r=[],n=!1,o=l.legend.labelFormatter,d=0;d<a.length;++d)(s=(i=a[d]).label)&&(d%l.legend.noColumns==0&&(n&&r.push("</tr>"),r.push("<tr>"),n=!0),o&&(s=o(s,i)),r.push('<td class="legendColorBox"><div style="border:1px solid '+l.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+i.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+s+"</td>"));n&&r.push("</tr>");if(0==r.length)return;var c='<table style="font-size:smaller;color:'+l.grid.color+'">'+r.join("")+"</table>";if(null!=l.legend.container)e(l.legend.container).html(c);else{var h="",u=l.legend.position,p=l.legend.margin;null==p[0]&&(p=[p,p]),"n"==u.charAt(0)?h+="top:"+(p[1]+m.top)+"px;":"s"==u.charAt(0)&&(h+="bottom:"+(p[1]+m.bottom)+"px;"),"e"==u.charAt(1)?h+="right:"+(p[0]+m.right)+"px;":"w"==u.charAt(1)&&(h+="left:"+(p[0]+m.left)+"px;");var f=e('<div class="legend">'+c.replace('style="','style="position:absolute;'+h+";")+"</div>").appendTo(t);if(0!=l.legend.backgroundOpacity){var g=l.legend.backgroundColor;null==g&&((g=(g=l.grid.backgroundColor)&&"string"==typeof g?e.color.parse(g):e.color.extract(f,"background-color")).a=1,g=g.toString());var v=f.children();e('<div style="position:absolute;width:'+v.width()+"px;height:"+v.height()+"px;"+h+"background-color:"+g+';"> </div>').prependTo(f).css("opacity",l.legend.backgroundOpacity)}}}()}function P(){u.clearRect(0,0,v,b);var e=l.grid;e.show&&e.backgroundColor&&(u.save(),u.translate(m.left,m.top),u.fillStyle=Z(l.grid.backgroundColor,w,0,"rgba(255, 255, 255, 0)"),u.fillRect(0,0,y,w),u.restore()),e.show&&!e.aboveData&&q();for(var t=0;t<a.length;++t)C(_.drawSeries,[u,a[t]]),N(a[t]);C(_.draw,[u]),e.show&&e.aboveData&&q()}function E(e,t){var s,r,n,o,a=j();for(i=0;i<a.length;++i)if((s=a[i]).direction==t&&(e[o=t+s.n+"axis"]||1!=s.n||(o=t+"axis"),e[o])){r=e[o].from,n=e[o].to;break}if(e[o]||(s="x"==t?f[0]:g[0],r=e[t+"1"],n=e[t+"2"]),null!=r&&null!=n&&r>n){var l=r;r=n,n=l}return{from:r,to:n,axis:s}}function q(){var t;u.save(),u.translate(m.left,m.top);var i=l.grid.markings;if(i){if(e.isFunction(i))(o=x.getAxes()).xmin=o.xaxis.min,o.xmax=o.xaxis.max,o.ymin=o.yaxis.min,o.ymax=o.yaxis.max,i=i(o);for(t=0;t<i.length;++t){var s=i[t],r=E(s,"x"),n=E(s,"y");null==r.from&&(r.from=r.axis.min),null==r.to&&(r.to=r.axis.max),null==n.from&&(n.from=n.axis.min),null==n.to&&(n.to=n.axis.max),r.to<r.axis.min||r.from>r.axis.max||n.to<n.axis.min||n.from>n.axis.max||(r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),n.from=Math.max(n.from,n.axis.min),n.to=Math.min(n.to,n.axis.max),r.from==r.to&&n.from==n.to||(r.from=r.axis.p2c(r.from),r.to=r.axis.p2c(r.to),n.from=n.axis.p2c(n.from),n.to=n.axis.p2c(n.to),r.from==r.to||n.from==n.to?(u.beginPath(),u.strokeStyle=s.color||l.grid.markingsColor,u.lineWidth=s.lineWidth||l.grid.markingsLineWidth,u.moveTo(r.from,n.from),u.lineTo(r.to,n.to),u.stroke()):(u.fillStyle=s.color||l.grid.markingsColor,u.fillRect(r.from,n.to,r.to-r.from,n.from-n.to))))}}for(var o=j(),a=l.grid.borderWidth,d=0;d<o.length;++d){var c,h,p,f,g=o[d],v=g.box,b=g.tickLength;if(g.show&&0!=g.ticks.length){for(u.strokeStyle=g.options.tickColor||e.color.parse(g.options.color).scale("a",.22).toString(),u.lineWidth=1,"x"==g.direction?(c=0,h="full"==b?"top"==g.position?0:w:v.top-m.top+("top"==g.position?v.height:0)):(h=0,c="full"==b?"left"==g.position?0:y:v.left-m.left+("left"==g.position?v.width:0)),g.innermost||(u.beginPath(),p=f=0,"x"==g.direction?p=y:f=w,1==u.lineWidth&&(c=Math.floor(c)+.5,h=Math.floor(h)+.5),u.moveTo(c,h),u.lineTo(c+p,h+f),u.stroke()),u.beginPath(),t=0;t<g.ticks.length;++t){var _=g.ticks[t].v;p=f=0,_<g.min||_>g.max||"full"==b&&a>0&&(_==g.min||_==g.max)||("x"==g.direction?(c=g.p2c(_),f="full"==b?-w:b,"top"==g.position&&(f=-f)):(h=g.p2c(_),p="full"==b?-y:b,"left"==g.position&&(p=-p)),1==u.lineWidth&&("x"==g.direction?c=Math.floor(c)+.5:h=Math.floor(h)+.5),u.moveTo(c,h),u.lineTo(c+p,h+f))}u.stroke()}}a&&(u.lineWidth=a,u.strokeStyle=l.grid.borderColor,u.strokeRect(-a/2,-a/2,y+a,w+a)),u.restore()}function N(e){e.lines.show&&function(e){function t(e,t,i,s,r){var n=e.points,o=e.pointsize,a=null,l=null;u.beginPath();for(var d=o;d<n.length;d+=o){var c=n[d-o],h=n[d-o+1],p=n[d],f=n[d+1];if(null!=c&&null!=p){if(h<=f&&h<r.min){if(f<r.min)continue;c=(r.min-h)/(f-h)*(p-c)+c,h=r.min}else if(f<=h&&f<r.min){if(h<r.min)continue;p=(r.min-h)/(f-h)*(p-c)+c,f=r.min}if(h>=f&&h>r.max){if(f>r.max)continue;c=(r.max-h)/(f-h)*(p-c)+c,h=r.max}else if(f>=h&&f>r.max){if(h>r.max)continue;p=(r.max-h)/(f-h)*(p-c)+c,f=r.max}if(c<=p&&c<s.min){if(p<s.min)continue;h=(s.min-c)/(p-c)*(f-h)+h,c=s.min}else if(p<=c&&p<s.min){if(c<s.min)continue;f=(s.min-c)/(p-c)*(f-h)+h,p=s.min}if(c>=p&&c>s.max){if(p>s.max)continue;h=(s.max-c)/(p-c)*(f-h)+h,c=s.max}else if(p>=c&&p>s.max){if(c>s.max)continue;f=(s.max-c)/(p-c)*(f-h)+h,p=s.max}c==a&&h==l||u.moveTo(s.p2c(c)+t,r.p2c(h)+i),a=p,l=f,u.lineTo(s.p2c(p)+t,r.p2c(f)+i)}}u.stroke()}function i(e,t,i){for(var s=e.points,r=e.pointsize,n=Math.min(Math.max(0,i.min),i.max),o=0,a=!1,l=1,d=0,c=0;!(r>0&&o>s.length+r);){var h=s[(o+=r)-r],p=s[o-r+l],f=s[o],g=s[o+l];if(a){if(r>0&&null!=h&&null==f){c=o,r=-r,l=2;continue}if(r<0&&o==d+r){u.fill(),a=!1,l=1,o=d=c+(r=-r);continue}}if(null!=h&&null!=f){if(h<=f&&h<t.min){if(f<t.min)continue;p=(t.min-h)/(f-h)*(g-p)+p,h=t.min}else if(f<=h&&f<t.min){if(h<t.min)continue;g=(t.min-h)/(f-h)*(g-p)+p,f=t.min}if(h>=f&&h>t.max){if(f>t.max)continue;p=(t.max-h)/(f-h)*(g-p)+p,h=t.max}else if(f>=h&&f>t.max){if(h>t.max)continue;g=(t.max-h)/(f-h)*(g-p)+p,f=t.max}if(a||(u.beginPath(),u.moveTo(t.p2c(h),i.p2c(n)),a=!0),p>=i.max&&g>=i.max)u.lineTo(t.p2c(h),i.p2c(i.max)),u.lineTo(t.p2c(f),i.p2c(i.max));else if(p<=i.min&&g<=i.min)u.lineTo(t.p2c(h),i.p2c(i.min)),u.lineTo(t.p2c(f),i.p2c(i.min));else{var m=h,v=f;p<=g&&p<i.min&&g>=i.min?(h=(i.min-p)/(g-p)*(f-h)+h,p=i.min):g<=p&&g<i.min&&p>=i.min&&(f=(i.min-p)/(g-p)*(f-h)+h,g=i.min),p>=g&&p>i.max&&g<=i.max?(h=(i.max-p)/(g-p)*(f-h)+h,p=i.max):g>=p&&g>i.max&&p<=i.max&&(f=(i.max-p)/(g-p)*(f-h)+h,g=i.max),h!=m&&u.lineTo(t.p2c(m),i.p2c(p)),u.lineTo(t.p2c(h),i.p2c(p)),u.lineTo(t.p2c(f),i.p2c(g)),f!=v&&(u.lineTo(t.p2c(f),i.p2c(g)),u.lineTo(t.p2c(v),i.p2c(g)))}}}}u.save(),u.translate(m.left,m.top),u.lineJoin="round";var s=e.lines.lineWidth,r=e.shadowSize;if(s>0&&r>0){u.lineWidth=r,u.strokeStyle="rgba(0,0,0,0.1)";var n=Math.PI/18;t(e.datapoints,Math.sin(n)*(s/2+r/2),Math.cos(n)*(s/2+r/2),e.xaxis,e.yaxis),u.lineWidth=r/2,t(e.datapoints,Math.sin(n)*(s/2+r/4),Math.cos(n)*(s/2+r/4),e.xaxis,e.yaxis)}u.lineWidth=s,u.strokeStyle=e.color;var o=z(e.lines,e.color,0,w);o&&(u.fillStyle=o,i(e.datapoints,e.xaxis,e.yaxis));s>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis);u.restore()}(e),e.bars.show&&function(e){function t(t,i,s,r,n,o,a){for(var l=t.points,d=t.pointsize,c=0;c<l.length;c+=d)null!=l[c]&&R(l[c],l[c+1],l[c+2],i,s,r,n,o,a,u,e.bars.horizontal,e.bars.lineWidth)}u.save(),u.translate(m.left,m.top),u.lineWidth=e.bars.lineWidth,u.strokeStyle=e.color;var i="left"==e.bars.align?0:-e.bars.barWidth/2,s=e.bars.fill?function(t,i){return z(e.bars,e.color,t,i)}:null;t(e.datapoints,i,i+e.bars.barWidth,0,s,e.xaxis,e.yaxis),u.restore()}(e),e.points.show&&function(e){function t(e,t,i,s,r,n,o,a){for(var l=e.points,d=e.pointsize,c=0;c<l.length;c+=d){var h=l[c],p=l[c+1];null==h||h<n.min||h>n.max||p<o.min||p>o.max||(u.beginPath(),h=n.p2c(h),p=o.p2c(p)+s,"circle"==a?u.arc(h,p,t,0,r?Math.PI:2*Math.PI,!1):a(u,h,p,t,r),u.closePath(),i&&(u.fillStyle=i,u.fill()),u.stroke())}}u.save(),u.translate(m.left,m.top);var i=e.points.lineWidth,s=e.shadowSize,r=e.points.radius,n=e.points.symbol;if(i>0&&s>0){var o=s/2;u.lineWidth=o,u.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,r,null,o+o/2,!0,e.xaxis,e.yaxis,n),u.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,r,null,o/2,!0,e.xaxis,e.yaxis,n)}u.lineWidth=i,u.strokeStyle=e.color,t(e.datapoints,r,z(e.points,e.color),0,!1,e.xaxis,e.yaxis,n),u.restore()}(e)}function R(e,t,i,s,r,n,o,a,l,d,c,h){var u,p,f,g,m,v,b,y,w;c?(y=v=b=!0,m=!1,g=t+s,f=t+r,(p=e)<(u=i)&&(w=p,p=u,u=w,m=!0,v=!1)):(m=v=b=!0,y=!1,u=e+s,p=e+r,(g=t)<(f=i)&&(w=g,g=f,f=w,y=!0,b=!1)),p<a.min||u>a.max||g<l.min||f>l.max||(u<a.min&&(u=a.min,m=!1),p>a.max&&(p=a.max,v=!1),f<l.min&&(f=l.min,y=!1),g>l.max&&(g=l.max,b=!1),u=a.p2c(u),f=l.p2c(f),p=a.p2c(p),g=l.p2c(g),o&&(d.beginPath(),d.moveTo(u,f),d.lineTo(u,g),d.lineTo(p,g),d.lineTo(p,f),d.fillStyle=o(f,g),d.fill()),h>0&&(m||v||b||y)&&(d.beginPath(),d.moveTo(u,f+n),m?d.lineTo(u,g+n):d.moveTo(u,g+n),b?d.lineTo(p,g+n):d.moveTo(p,g+n),v?d.lineTo(p,f+n):d.moveTo(p,f+n),y?d.lineTo(u,f+n):d.moveTo(u,f+n),d.stroke()))}function z(t,i,s,r){var n=t.fill;if(!n)return null;if(t.fillColor)return Z(t.fillColor,s,r,i);var o=e.color.parse(i);return o.a="number"==typeof n?n:.4,o.normalize(),o.toString()}x.setData=k,x.setupGrid=I,x.draw=P,x.getPlaceholder=function(){return t},x.getCanvas=function(){return d},x.getPlotOffset=function(){return m},x.width=function(){return y},x.height=function(){return w},x.offset=function(){var e=h.offset();return e.left+=m.left,e.top+=m.top,e},x.getData=function(){return a},x.getAxes=function(){var t={};return e.each(f.concat(g),(function(e,i){i&&(t[i.direction+(1!=i.n?i.n:"")+"axis"]=i)})),t},x.getXAxes=function(){return f},x.getYAxes=function(){return g},x.c2p=S,x.p2c=function(e){var t,i,s,r={};for(t=0;t<f.length;++t)if((i=f[t])&&i.used&&(s="x"+i.n,null==e[s]&&1==i.n&&(s="x"),null!=e[s])){r.left=i.p2c(e[s]);break}for(t=0;t<g.length;++t)if((i=g[t])&&i.used&&(s="y"+i.n,null==e[s]&&1==i.n&&(s="y"),null!=e[s])){r.top=i.p2c(e[s]);break}return r},x.getOptions=function(){return l},x.highlight=V,x.unhighlight=X,x.triggerRedrawOverlay=U,x.pointOffset=function(e){return{left:parseInt(f[D(e,"x")-1].p2c(+e.x)+m.left),top:parseInt(g[D(e,"y")-1].p2c(+e.y)+m.top)}},x.shutdown=function(){L&&clearTimeout(L);h.unbind("mousemove",Q),h.unbind("mouseleave",G),h.unbind("click",B),C(_.shutdown,[h])},x.resize=function(){T(),F(d),F(c)},x.hooks=_,function(){for(var t=0;t<o.length;++t){var i=o[t];i.init(x),i.options&&e.extend(!0,l,i.options)}}(),function(t){var i;e.extend(!0,l,t),null==l.xaxis.color&&(l.xaxis.color=l.grid.color);null==l.yaxis.color&&(l.yaxis.color=l.grid.color);null==l.xaxis.tickColor&&(l.xaxis.tickColor=l.grid.tickColor);null==l.yaxis.tickColor&&(l.yaxis.tickColor=l.grid.tickColor);null==l.grid.borderColor&&(l.grid.borderColor=l.grid.color);null==l.grid.tickColor&&(l.grid.tickColor=e.color.parse(l.grid.color).scale("a",.22).toString());for(i=0;i<Math.max(1,l.xaxes.length);++i)l.xaxes[i]=e.extend(!0,{},l.xaxis,l.xaxes[i]);for(i=0;i<Math.max(1,l.yaxes.length);++i)l.yaxes[i]=e.extend(!0,{},l.yaxis,l.yaxes[i]);l.xaxis.noTicks&&null==l.xaxis.ticks&&(l.xaxis.ticks=l.xaxis.noTicks);l.yaxis.noTicks&&null==l.yaxis.ticks&&(l.yaxis.ticks=l.yaxis.noTicks);l.x2axis&&(l.xaxes[1]=e.extend(!0,{},l.xaxis,l.x2axis),l.xaxes[1].position="top");l.y2axis&&(l.yaxes[1]=e.extend(!0,{},l.yaxis,l.y2axis),l.yaxes[1].position="right");l.grid.coloredAreas&&(l.grid.markings=l.grid.coloredAreas);l.grid.coloredAreasColor&&(l.grid.markingsColor=l.grid.coloredAreasColor);l.lines&&e.extend(!0,l.series.lines,l.lines);l.points&&e.extend(!0,l.series.points,l.points);l.bars&&e.extend(!0,l.series.bars,l.bars);null!=l.shadowSize&&(l.series.shadowSize=l.shadowSize);for(i=0;i<l.xaxes.length;++i)M(f,i+1).options=l.xaxes[i];for(i=0;i<l.yaxes.length;++i)M(g,i+1).options=l.yaxes[i];for(var s in _)l.hooks[s]&&l.hooks[s].length&&(_[s]=_[s].concat(l.hooks[s]));C(_.processOptions,[l])}(n),function(){var i,s=t.children("canvas.base"),r=t.children("canvas.overlay");0==s.length||0==r?(t.html(""),t.css({padding:0}),"static"==t.css("position")&&t.css("position","relative"),T(),d=A(!0,"base"),c=A(!1,"overlay"),i=!1):(d=s.get(0),c=r.get(0),i=!0);u=d.getContext("2d"),p=c.getContext("2d"),h=e([c,d]),i&&(t.data("plot").shutdown(),x.resize(),p.clearRect(0,0,v,b),h.unbind(),t.children().not([d,c]).remove());t.data("plot",x)}(),k(r),I(),P(),function(){l.grid.hoverable&&(h.mousemove(Q),h.mouseleave(G));l.grid.clickable&&h.click(B);C(_.bindEvents,[h])}();var W=[],L=null;function Q(e){l.grid.hoverable&&H("plothover",e,(function(e){return 0!=e.hoverable}))}function G(e){l.grid.hoverable&&H("plothover",e,(function(e){return!1}))}function B(e){H("plotclick",e,(function(e){return 0!=e.clickable}))}function H(e,i,s){var r=h.offset(),n=i.pageX-r.left-m.left,o=i.pageY-r.top-m.top,d=S({left:n,top:o});d.pageX=i.pageX,d.pageY=i.pageY;var c=function(e,t,i){var s,r,n=l.grid.mouseActiveRadius,o=n*n+1,d=null;for(s=a.length-1;s>=0;--s)if(i(a[s])){var c=a[s],h=c.xaxis,u=c.yaxis,p=c.datapoints.points,f=c.datapoints.pointsize,g=h.c2p(e),m=u.c2p(t),v=n/h.scale,b=n/u.scale;if(h.options.inverseTransform&&(v=Number.MAX_VALUE),u.options.inverseTransform&&(b=Number.MAX_VALUE),c.lines.show||c.points.show)for(r=0;r<p.length;r+=f){var y=p[r],w=p[r+1];if(null!=y&&!(y-g>v||y-g<-v||w-m>b||w-m<-b)){var _=Math.abs(h.p2c(y)-e),x=Math.abs(u.p2c(w)-t),C=_*_+x*x;C<o&&(o=C,d=[s,r/f])}}if(c.bars.show&&!d){var k="left"==c.bars.align?0:-c.bars.barWidth/2,D=k+c.bars.barWidth;for(r=0;r<p.length;r+=f){y=p[r],w=p[r+1];var j=p[r+2];null!=y&&(a[s].bars.horizontal?g<=Math.max(j,y)&&g>=Math.min(j,y)&&m>=w+k&&m<=w+D:g>=y+k&&g<=y+D&&m>=Math.min(j,w)&&m<=Math.max(j,w))&&(d=[s,r/f])}}}return d?(s=d[0],r=d[1],f=a[s].datapoints.pointsize,{datapoint:a[s].datapoints.points.slice(r*f,(r+1)*f),dataIndex:r,series:a[s],seriesIndex:s}):null}(n,o,s);if(c&&(c.pageX=parseInt(c.series.xaxis.p2c(c.datapoint[0])+r.left+m.left),c.pageY=parseInt(c.series.yaxis.p2c(c.datapoint[1])+r.top+m.top)),l.grid.autoHighlight){for(var u=0;u<W.length;++u){var p=W[u];p.auto!=e||c&&p.series==c.series&&p.point[0]==c.datapoint[0]&&p.point[1]==c.datapoint[1]||X(p.series,p.point)}c&&V(c.series,c.datapoint,e)}t.trigger(e,[d,c])}function U(){L||(L=setTimeout(Y,30))}function Y(){var e,t;for(L=null,p.save(),p.clearRect(0,0,v,b),p.translate(m.left,m.top),e=0;e<W.length;++e)(t=W[e]).series.bars.show?J(t.series,t.point):K(t.series,t.point);p.restore(),C(_.drawOverlay,[p])}function V(e,t,i){if("number"==typeof e&&(e=a[e]),"number"==typeof t){var s=e.datapoints.pointsize;t=e.datapoints.points.slice(s*t,s*(t+1))}var r=$(e,t);-1==r?(W.push({series:e,point:t,auto:i}),U()):i||(W[r].auto=!1)}function X(e,t){null==e&&null==t&&(W=[],U()),"number"==typeof e&&(e=a[e]),"number"==typeof t&&(t=e.data[t]);var i=$(e,t);-1!=i&&(W.splice(i,1),U())}function $(e,t){for(var i=0;i<W.length;++i){var s=W[i];if(s.series==e&&s.point[0]==t[0]&&s.point[1]==t[1])return i}return-1}function K(t,i){var s=i[0],r=i[1],n=t.xaxis,o=t.yaxis;if(!(s<n.min||s>n.max||r<o.min||r>o.max)){var a=t.points.radius+t.points.lineWidth/2;p.lineWidth=a,p.strokeStyle=e.color.parse(t.color).scale("a",.5).toString();var l=1.5*a;s=n.p2c(s),r=o.p2c(r);p.beginPath(),"circle"==t.points.symbol?p.arc(s,r,l,0,2*Math.PI,!1):t.points.symbol(p,s,r,l,!1),p.closePath(),p.stroke()}}function J(t,i){p.lineWidth=t.bars.lineWidth,p.strokeStyle=e.color.parse(t.color).scale("a",.5).toString();var s=e.color.parse(t.color).scale("a",.5).toString(),r="left"==t.bars.align?0:-t.bars.barWidth/2;R(i[0],i[1],i[2]||0,r,r+t.bars.barWidth,0,(function(){return s}),t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function Z(t,i,s,r){if("string"==typeof t)return t;for(var n=u.createLinearGradient(0,s,0,i),o=0,a=t.colors.length;o<a;++o){var l=t.colors[o];if("string"!=typeof l){var d=e.color.parse(r);null!=l.brightness&&(d=d.scale("rgb",l.brightness)),null!=l.opacity&&(d.a*=l.opacity),l=d.toString()}n.addColorStop(o/(a-1),l)}return n}}function s(e,t){return t*Math.floor(e/t)}e.plot=function(i,s,r){return new t(e(i),s,r,e.plot.plugins)},e.plot.version="0.7",e.plot.plugins=[],e.plot.formatDate=function(e,t,i){var s=function(e){return 1==(e=""+e).length?"0"+e:e},r=[],n=!1,o=!1,a=e.getUTCHours(),l=a<12;null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),-1!=t.search(/%p|%P/)&&(a>12?a-=12:0==a&&(a=12));for(var d=0;d<t.length;++d){var c=t.charAt(d);if(n){switch(c){case"h":c=""+a;break;case"H":c=s(a);break;case"M":c=s(e.getUTCMinutes());break;case"S":c=s(e.getUTCSeconds());break;case"d":c=""+e.getUTCDate();break;case"m":c=""+(e.getUTCMonth()+1);break;case"y":c=""+e.getUTCFullYear();break;case"b":c=""+i[e.getUTCMonth()];break;case"p":c=l?"am":"pm";break;case"P":c=l?"AM":"PM";break;case"0":c="",o=!0}c&&o&&(c=s(c),o=!1),r.push(c),o||(n=!1)}else"%"==c?n=!0:r.push(c)}return r.join("")}}(jQuery),function(e,t,i){var s,r=e([]),n=e.resize=e.extend(e.resize,{}),o="setTimeout",a="resize",l=a+"-special-event",d="delay",c="throttleWindow";function h(){s=t[o]((function(){r.each((function(){var t=e(this),i=t.width(),s=t.height(),r=e.data(this,l);i===r.w&&s===r.h||t.trigger(a,[r.w=i,r.h=s])})),h()}),n[d])}n[d]=250,n[c]=!0,e.event.special[a]={setup:function(){if(!n[c]&&this[o])return!1;var t=e(this);r=r.add(t),e.data(this,l,{w:t.width(),h:t.height()}),1===r.length&&h()},teardown:function(){if(!n[c]&&this[o])return!1;var t=e(this);r=r.not(t),t.removeData(l),r.length||clearTimeout(s)},add:function(t){if(!n[c]&&this[o])return!1;var s;function r(t,r,n){var o=e(this),a=e.data(this,l);a.w=r!==i?r:o.width(),a.h=n!==i?n:o.height(),s.apply(this,arguments)}if(e.isFunction(t))return s=t,r;s=t.handler,t.handler=r}}}(jQuery,this),jQuery.plot.plugins.push({init:function(e){function t(){var t=e.getPlaceholder();0!=t.width()&&0!=t.height()&&(e.resize(),e.setupGrid(),e.draw())}e.hooks.bindEvents.push((function(e,i){e.getPlaceholder().resize(t)})),e.hooks.shutdown.push((function(e,i){e.getPlaceholder().unbind("resize",t)}))},options:{},name:"resize",version:"1.0"}),function(e){var t={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,offset:{top:0,left:"auto"},stroke:{color:"#FFF",width:1},label:{show:"auto",formatter:function(e,t){return'<div style="font-size:x-small;text-align:center;padding:2px;color:'+t.color+';">'+e+"<br/>"+Math.round(t.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};e.plot.plugins.push({init:function(s){var r=null,n=null,o=null,a=null,l=null,d=0,c=!0,h=0,u=!1,p=[];function f(i,s,o,a){u||(u=!0,r=i.getCanvas(),n=e(r).parent(),t=i.getOptions(),i.setData(function(e){!function(e){for(var t=0;t<e.length;++t){var i=parseFloat(e[t].data[0][1]);i&&(d+=i)}}(e=function(e){for(var t=0;t<e.length;++t)"number"==typeof e[t].data?e[t].data=[[1,e[t].data]]:void 0!==e[t].data&&void 0!==e[t].data[0]||(void 0!==e[t].data&&void 0!==e[t].data.label&&(e[t].label=e[t].data.label),e[t].data=[[1,0]]);return e}(e));for(var i=0,s=0,r=t.series.pie.combine.color,n=[],o=0;o<e.length;++o)e[o].data[0][1]=parseFloat(e[o].data[0][1]),e[o].data[0][1]||(e[o].data[0][1]=0),e[o].data[0][1]/d<=t.series.pie.combine.threshold?(i+=e[o].data[0][1],s++,r||(r=e[o].color)):n.push({data:[[1,e[o].data[0][1]]],color:e[o].color,label:e[o].label,angle:e[o].data[0][1]*(2*Math.PI)/d,percent:e[o].data[0][1]/d*100});s>0&&n.push({data:[[1,i]],color:r,label:t.series.pie.combine.label,angle:i*(2*Math.PI)/d,percent:i/d*100});return n}(i.getData())))}function g(i,s){if(n){ctx=s,h=n.children().filter(".legend").children().width(),o=Math.min(r.width,r.height/t.series.pie.tilt)/2,l=r.height/2+t.series.pie.offset.top,a=r.width/2,"auto"==t.series.pie.offset.left?t.legend.position.match("w")?a+=h/2:a-=h/2:a+=t.series.pie.offset.left,a<o?a=o:a>r.width-o&&(a=r.width-o);for(var d=i.getData(),u=0;c&&u<10;)c=!1,u>0&&(o*=.95),u+=1,p(),t.series.pie.tilt<=.8&&f(),g();u>=10&&(p(),n.prepend('<div class="error">Could not draw pie with labels contained inside canvas</div>')),i.setSeries&&i.insertLegend&&(i.setSeries(d),i.insertLegend())}function p(){ctx.clearRect(0,0,r.width,r.height),n.children().filter(".pieLabel, .pieLabelBackground").remove()}function f(){if(t.series.pie.radius>1)var e=t.series.pie.radius;else e=o*t.series.pie.radius;if(!(e>=r.width/2-5||e*t.series.pie.tilt>=r.height/2-15||e<=10)){ctx.save(),ctx.translate(5,15),ctx.globalAlpha=.02,ctx.fillStyle="#000",ctx.translate(a,l),ctx.scale(1,t.series.pie.tilt);for(var i=1;i<=10;i++)ctx.beginPath(),ctx.arc(0,0,e,0,2*Math.PI,!1),ctx.fill(),e-=i;ctx.restore()}}function g(){if(startAngle=Math.PI*t.series.pie.startAngle,t.series.pie.radius>1)var i=t.series.pie.radius;else i=o*t.series.pie.radius;ctx.save(),ctx.translate(a,l),ctx.scale(1,t.series.pie.tilt),ctx.save();for(var s=startAngle,h=0;h<d.length;++h)d[h].startAngle=s,u(d[h].angle,d[h].color,!0);ctx.restore(),ctx.save(),ctx.lineWidth=t.series.pie.stroke.width,s=startAngle;for(h=0;h<d.length;++h)u(d[h].angle,t.series.pie.stroke.color,!1);function u(t,r,n){t<=0||(n?ctx.fillStyle=r:(ctx.strokeStyle=r,ctx.lineJoin="round"),ctx.beginPath(),Math.abs(t-2*Math.PI)>1e-9?ctx.moveTo(0,0):e.browser.msie&&(t-=1e-4),ctx.arc(0,0,i,s,s+t,!1),ctx.closePath(),s+=t,n?ctx.fill():ctx.stroke())}ctx.restore(),m(ctx),t.series.pie.label.show&&function(){var i=startAngle;if(t.series.pie.label.radius>1)var s=t.series.pie.label.radius;else s=o*t.series.pie.label.radius;for(var h=0;h<d.length;++h)d[h].percent>=100*t.series.pie.label.threshold&&u(d[h],i,h),i+=d[h].angle;function u(i,o,d){if(0!=i.data[0][1]){var h,u=t.legend.labelFormatter,p=t.series.pie.label.formatter;h=u?u(i.label,i):i.label,p&&(h=p(h,i));var f=(o+i.angle+o)/2,g=a+Math.round(Math.cos(f)*s),m=l+Math.round(Math.sin(f)*s)*t.series.pie.tilt,v='<span class="pieLabel" id="pieLabel'+d+'" style="position:absolute;top:'+m+"px;left:"+g+'px;">'+h+"</span>";n.append(v);var b=n.children("#pieLabel"+d),y=m-b.height()/2,w=g-b.width()/2;if(b.css("top",y),b.css("left",w),(0-y>0||0-w>0||r.height-(y+b.height())<0||r.width-(w+b.width())<0)&&(c=!0),0!=t.series.pie.label.background.opacity){var _=t.series.pie.label.background.color;null==_&&(_=i.color);var x="top:"+y+"px;left:"+w+"px;";e('<div class="pieLabelBackground" style="position:absolute;width:'+b.width()+"px;height:"+b.height()+"px;"+x+"background-color:"+_+';"> </div>').insertBefore(b).css("opacity",t.series.pie.label.background.opacity)}}}}(),ctx.restore()}}function m(e){t.series.pie.innerRadius>0&&(e.save(),innerRadius=t.series.pie.innerRadius>1?t.series.pie.innerRadius:o*t.series.pie.innerRadius,e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=t.series.pie.stroke.color,e.arc(0,0,innerRadius,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=t.series.pie.stroke.color,e.arc(0,0,innerRadius,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.restore())}function v(e,t){for(var i=!1,s=-1,r=e.length,n=r-1;++s<r;n=s)(e[s][1]<=t[1]&&t[1]<e[n][1]||e[n][1]<=t[1]&&t[1]<e[s][1])&&t[0]<(e[n][0]-e[s][0])*(t[1]-e[s][1])/(e[n][1]-e[s][1])+e[s][0]&&(i=!i);return i}function b(e){_("plothover",e)}function w(e){_("plotclick",e)}function _(e,i){var r=s.offset(),d=function(e,t){for(var i=s.getData(),r=s.getOptions(),n=r.series.pie.radius>1?r.series.pie.radius:o*r.series.pie.radius,d=0;d<i.length;++d){var c=i[d];if(c.pie.show){if(ctx.save(),ctx.beginPath(),ctx.moveTo(0,0),ctx.arc(0,0,n,c.startAngle,c.startAngle+c.angle,!1),ctx.closePath(),x=e-a,y=t-l,ctx.isPointInPath){if(ctx.isPointInPath(e-a,t-l))return ctx.restore(),{datapoint:[c.percent,c.data],dataIndex:0,series:c,seriesIndex:d}}else if(p1X=n*Math.cos(c.startAngle),p1Y=n*Math.sin(c.startAngle),p2X=n*Math.cos(c.startAngle+c.angle/4),p2Y=n*Math.sin(c.startAngle+c.angle/4),p3X=n*Math.cos(c.startAngle+c.angle/2),p3Y=n*Math.sin(c.startAngle+c.angle/2),p4X=n*Math.cos(c.startAngle+c.angle/1.5),p4Y=n*Math.sin(c.startAngle+c.angle/1.5),p5X=n*Math.cos(c.startAngle+c.angle),p5Y=n*Math.sin(c.startAngle+c.angle),arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]],arrPoint=[x,y],v(arrPoly,arrPoint))return ctx.restore(),{datapoint:[c.percent,c.data],dataIndex:0,series:c,seriesIndex:d};ctx.restore()}}return null}(parseInt(i.pageX-r.left),parseInt(i.pageY-r.top));if(t.grid.autoHighlight)for(var c=0;c<p.length;++c){var h=p[c];h.auto!=e||d&&h.series==d.series||C(h.series)}d&&function(e,t){"number"==typeof e&&(e=series[e]);var i=k(e);-1==i?(p.push({series:e,auto:t}),s.triggerRedrawOverlay()):t||(p[i].auto=!1)}(d.series,e);var u={pageX:i.pageX,pageY:i.pageY};n.trigger(e,[u,d])}function C(e){null==e&&(p=[],s.triggerRedrawOverlay()),"number"==typeof e&&(e=series[e]);var t=k(e);-1!=t&&(p.splice(t,1),s.triggerRedrawOverlay())}function k(e){for(var t=0;t<p.length;++t){if(p[t].series==e)return t}return-1}function D(e,t){var s=e.getOptions(),r=s.series.pie.radius>1?s.series.pie.radius:o*s.series.pie.radius;for(t.save(),t.translate(a,l),t.scale(1,s.series.pie.tilt),i=0;i<p.length;++i)n(p[i].series);function n(e){e.angle<0||(t.fillStyle="rgba(255, 255, 255, "+s.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(e.angle-2*Math.PI)>1e-9&&t.moveTo(0,0),t.arc(0,0,r,e.startAngle,e.startAngle+e.angle,!1),t.closePath(),t.fill())}m(t),t.restore()}s.hooks.processOptions.push((function(e,t){t.series.pie.show&&(t.grid.show=!1,"auto"==t.series.pie.label.show&&(t.legend.show?t.series.pie.label.show=!1:t.series.pie.label.show=!0),"auto"==t.series.pie.radius&&(t.series.pie.label.show?t.series.pie.radius=3/4:t.series.pie.radius=1),t.series.pie.tilt>1&&(t.series.pie.tilt=1),t.series.pie.tilt<0&&(t.series.pie.tilt=0),e.hooks.processDatapoints.push(f),e.hooks.drawOverlay.push(D),e.hooks.draw.push(g))})),s.hooks.bindEvents.push((function(e,t){var i=e.getOptions();i.series.pie.show&&i.grid.hoverable&&t.unbind("mousemove").mousemove(b);i.series.pie.show&&i.grid.clickable&&t.unbind("click").click(w)}))},options:t,name:"pie",version:"1.0"})}(jQuery),function(e){var t="[object Array]",i="[object Function]",s="[object String]",r=0,n="%",o=Object.prototype.toString;e.fn.extend({jqote:function(i,s){i=o.call(i)===t?i:[i];var r="";return this.each((function(t){for(var o=(l=e.jqotecache[this.jqote])?l:e.jqotec(this,s||n),a=0;a<i.length;a++)r+=o.call(i[a],t,a,i,o)})),r},jqoteapp:function(t,i,s){var r=e.jqote(t,i,s);return this.each((function(){e(this).append(r)}))},jqotepre:function(t,i,s){var r=e.jqote(t,i,s);return this.each((function(){e(this).prepend(r)}))},jqotesub:function(t,i,s){var r=e.jqote(t,i,s);return this.each((function(){e(this).html(r)}))}}),e.extend({jqote:function(r,a,l){var d="",c=[],h=(l=l||n,o.call(r));a=o.call(a)===t?a:[a];h===i?c=[r]:h===t?c=o.call(r[0])===i?r:e.map(r,(function(t){return e.jqotec(t,l)})):h===s?c.push(r.indexOf("<"+l)<0?e.jqotec(e(r),l):e.jqotec(r,l)):c=e.map(e(r),(function(t){return e.jqotec(t,l)}));for(var u=0,p=c.length;u<p;u++)for(var f=0;f<a.length;f++)d+=c[u].call(a[f],u,f,a,c[u]);return d},jqotec:function(t,i){for(var a,l="",d=(i=i||n,o.call(t)),c=(d===s&&t.indexOf("<"+i)>=0?t:(t=d===s||t instanceof jQuery?e(t)[0]:t).innerHTML).replace(/\s*<!\[CDATA\[\s*|\s*\]\]>\s*|[\r\n\t]/g,"").split("<"+i).join(i+">").split(i+">"),h=0,u=c.length;h<u;h++)l+=""!==c[h].charAt(0)?"out+='"+c[h].replace(/([^\\])?(["'])/g,"$1\\$2")+"'":"="===c[h].charAt(1)?"+"+c[h].substr(2)+";":";"+c[h].substr(1);return a=new Function("i, j, data, fn",'var out="";'+l+"; return out;"),o.call(t)===s?a:e.jqotecache[t.jqote=t.jqote||r++]=a},jqotefn:function(t){return e.jqotecache[e(t)[0].jqote]||!1},jqotetag:function(e){n=e},jqotecache:[]})}(jQuery);
/**
 * OWA Global Object 
 *	
 * @author      Peter Adams <peter@openwebanalytics.com>
 * @copyright   Copyright &copy; 2006 Peter Adams <peter@openwebanalytics.com>
 * @license     http://www.openwebanalytics.com/licenses/ BSD-3 Clause
 */
var OWA={items:{},hooks:{actions:{},filters:{}},loadedJsLibs:{},overlay:"",config:{ns:"owa_",baseUrl:"",hashCookiesToDomain:!0,debug:!1},state:{},overlayActive:!1,setSetting:function(e,t){return this.setOption(e,t)},getSetting:function(e){return this.getOption(e)},setOption:function(e,t){this.config[e]=t},getOption:function(e){return this.config[e]},l:function(e){return e},initializeStateManager:function(){this.state.hasOwnProperty("init")||(OWA.debug("initializing state manager..."),this.state=new OWA.stateManager)},registerStateStore:function(e,t,i,s){return this.initializeStateManager(),this.state.registerStore(e,t,i,s)},checkForState:function(e){return this.initializeStateManager(),this.state.isPresent(e)},setState:function(e,t,i,s,r,n){return this.initializeStateManager(),this.state.set(e,t,i,s,r,n)},replaceState:function(e,t,i,s,r){return this.initializeStateManager(),this.state.replaceStore(e,t,i,s,r)},getStateFromCookie:function(e){return this.initializeStateManager(),this.state.getStateFromCookie(e)},getState:function(e,t){return this.initializeStateManager(),this.state.get(e,t)},clearState:function(e,t){return this.initializeStateManager(),this.state.clear(e,t)},getStateStoreFormat:function(e){return this.initializeStateManager(),this.state.getStoreFormat(e)},setStateStoreFormat:function(e,t){return this.initializeStateManager(),this.state.setStoreFormat(e,t)},debug:function(){var e=OWA.getSetting("debug")||!1;e&&window.console&&console.log.apply&&(window.console.firebug?console.log.apply(this,arguments):console.log.apply(console,arguments))},setApiEndpoint:function(e){this.config.rest_api_endpoint=e},getApiEndpoint:function(){return this.config.rest_api_endpoint||this.getSetting("baseUrl")+"api/"},loadHeatmap:function(e){var t=this;OWA.util.loadScript(OWA.getSetting("baseUrl")+"/modules/base/js/includes/jquery/jquery-1.6.4.min.js",(function(){})),OWA.util.loadCss(OWA.getSetting("baseUrl")+"/modules/base/css/owa.overlay.css",(function(){})),OWA.util.loadScript(OWA.getSetting("baseUrl")+"/modules/base/js/owa.heatmap.js",(function(){t.overlay=new OWA.heatmap,t.overlay.options.liveMode=!0,t.overlay.generate()}))},loadPlayer:function(){var e=this;OWA.debug("Loading Domstream Player"),OWA.util.loadScript(OWA.getSetting("baseUrl")+"/modules/base/js/includes/jquery/jquery-1.6.4.min.js",(function(){})),OWA.util.loadCss(OWA.getSetting("baseUrl")+"/modules/base/css/owa.overlay.css",(function(){})),OWA.util.loadScript(OWA.getSetting("baseUrl")+"/modules/base/js/owa.player.js",(function(){e.overlay=new OWA.player}))},startOverlaySession:function(e){OWA.overlayActive=!0,e.hasOwnProperty("api_url")&&OWA.setApiEndpoint(e.api_url);var t=e;"loadHeatmap"===t.action?this.loadHeatmap(e):"loadPlayer"===t.action&&this.loadPlayer(e)},endOverlaySession:function(){OWA.util.eraseCookie(OWA.getSetting("ns")+"overlay",document.domain),OWA.overlayActive=!1},addFilter:function(e,t,i){void 0===i&&(i=10),this.hooks.filters[e]=this.hooks.filters[e]||[],this.hooks.filters[e].push({priority:i,callback:t})},addAction:function(e,t,i){OWA.debug("Adding Action callback for: "+e),void 0===i&&(i=10),this.hooks.actions[e]=this.hooks.actions[e]||[],this.hooks.actions[e].push({priority:i,callback:t})},applyFilters:function(e,t,i){OWA.debug("Filtering "+e+" with value:"),OWA.debug(t);var s=[];return void 0!==this.hooks.filters[e]&&this.hooks.filters[e].length>0&&(OWA.debug("Applying filters for "+e),this.hooks.filters[e].forEach((function(e){s[e.priority]=s[e.priority]||[],s[e.priority].push(e.callback)})),s.forEach((function(e){e.forEach((function(e){t=e(t,i),OWA.debug("Filter returned value: "),OWA.debug(t)}))}))),t},doAction:function(e,t){OWA.debug("Doing Action: "+e);var i=[];void 0!==this.hooks.actions[e]&&this.hooks.actions[e].length>0&&(OWA.debug(this.hooks.actions[e]),this.hooks.actions[e].forEach((function(e){i[e.priority]=i[e.priority]||[],i[e.priority].push(e.callback)})),i.forEach((function(i){OWA.debug("Executing Action callabck for: "+e),i.forEach((function(e){e(t)}))})))},removeAction:function(e,t){this.hooks.actions[e]=this.hooks.actions[e]||[],this.hooks.actions[e].forEach((function(i,s){i.callback===t&&this.hooks.actions[e].splice(s,1)}))},removeFilter:function(e,t){this.hooks.filters[e]=this.hooks.filters[e]||[],this.hooks.filters[e].forEach((function(t,i){t.callback===callback&&this.hooks.filters[e].splice(i,1)}))},stateManager:function(){this.cookies=OWA.util.readAllCookies(),this.init=!0}};OWA.stateManager.prototype={init:!1,cookies:"",stores:{},storeFormats:{},storeMeta:{},registerStore:function(e,t,i,s){this.storeMeta[e]={expiration:t,length:i,format:s}},getExpirationDays:function(e){if(this.storeMeta.hasOwnProperty(e))return this.storeMeta[e].expiration},getFormat:function(e){if(this.storeMeta.hasOwnProperty(e))return this.storeMeta[e].format},isPresent:function(e){if(this.stores.hasOwnProperty(e))return!0},set:function(e,t,i,s,r,n){this.isPresent(e)||this.load(e),this.isPresent(e)||(OWA.debug("Creating state store (%s)",e),this.stores[e]={},OWA.getSetting("hashCookiesToDomain")&&(this.stores[e].cdh=OWA.util.getCookieDomainHash(OWA.getSetting("cookie_domain")))),t?this.stores[e][t]=i:this.stores[e]=i,(r=this.getFormat(e))||this.storeFormats.hasOwnProperty(e)&&(r=this.storeFormats[e]);var o="";o="json"===r?JSON.stringify(this.stores[e]):OWA.util.assocStringFromJson(this.stores[e]),(n=this.getExpirationDays(e))||s&&(n=364),OWA.debug("Populating state store (%s) with value: %s",e,o);var a=OWA.getSetting("cookie_domain")||document.domain;OWA.util.setCookie(OWA.getSetting("ns")+e,o,n,"/",a)},replaceStore:function(e,t,i,s,r){if(OWA.debug("replace state format: %s, value: %s",s,JSON.stringify(t)),e){t&&(s=this.getFormat(e),this.stores[e]=t,this.storeFormats[e]=s,cookie_value="json"===s?JSON.stringify(t):OWA.util.assocStringFromJson(t));var n=OWA.getSetting("cookie_domain")||document.domain;r=this.getExpirationDays(e),OWA.debug("About to replace state store (%s) with: %s",e,cookie_value),OWA.util.setCookie(OWA.getSetting("ns")+e,cookie_value,r,"/",n)}},getStateFromCookie:function(e){var t=unescape(OWA.util.readCookie(OWA.getSetting("ns")+e));if(t)return t},get:function(e,t){return this.isPresent(e)||this.load(e),this.isPresent(e)?t?this.stores[e].hasOwnProperty(t)?this.stores[e][t]:void 0:this.stores[e]:(OWA.debug("No state store (%s) was found",e),"")},getCookieValues:function(e){if(this.cookies.hasOwnProperty(e))return this.cookies[e]},load:function(e){var t="",i=this.getCookieValues(OWA.getSetting("ns")+e);if(i)for(var s=0;s<i.length;s++){var r=unescape(i[s]),n=OWA.util.decodeCookieValue(r),o=OWA.util.getCookieValueFormat(r);if(OWA.getSetting("hashCookiesToDomain")){var a=OWA.getSetting("cookie_domain"),l=OWA.util.getCookieDomainHash(a);if(n.hasOwnProperty("cdh")){if(OWA.debug("Cookie value cdh: %s, domain hash: %s",n.cdh,l),n.cdh==l){OWA.debug("Cookie: %s, index: %s domain hash matches current cookie domain. Loading...",e,s),t=n;break}OWA.debug("Cookie: %s, index: %s domain hash does not match current cookie domain. Not loading.",e,s)}else OWA.debug("Cookie: %s, index: %s has no domain hash. Not going to Load it.",e,s)}else{s===i.length-1&&(t=n)}}t?(this.stores[e]=t,this.storeFormats[e]=o,OWA.debug("Loaded state store: %s with: %s",e,JSON.stringify(t))):OWA.debug("No state for store: %s was found. Nothing to Load.",e)},clear:function(e,t){if(t){var i=this.get(e);i&&i.hasOwnProperty(t)&&(delete i.key,this.replaceStore(e,i,!0,this.getFormat(e),this.getExpirationDays(e)))}else delete this.stores[e],OWA.util.eraseCookie(OWA.getSetting("ns")+e),this.cookies=OWA.util.readAllCookies()},getStoreFormat:function(e){return this.getFormat(e)},setStoreFormat:function(e,t){this.storeFormats[e]=t}},OWA.uri=function(e){this.components={},this.dirty=!1,this.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},e&&(this.components=this.parseUri(e))},OWA.uri.prototype={parseUri:function(e){for(var t=this.options,i=t.parser[t.strictMode?"strict":"loose"].exec(e),s={},r=14;r--;)s[t.key[r]]=i[r]||"";return s[t.q.name]={},s[t.key[12]].replace(t.q.parser,(function(e,i,r){i&&(s[t.q.name][i]=r)})),s},getHost:function(){if(this.components.hasOwnProperty("host"))return this.components.host},getQueryParam:function(e){if(this.components.hasOwnProperty("queryKey")&&this.components.queryKey.hasOwnProperty(e))return OWA.util.urldecode(this.components.queryKey[e])},isQueryParam:function(e){return!(!this.components.hasOwnProperty("queryKey")||!this.components.queryKey.hasOwnProperty(e))},getComponent:function(e){if(this.components.hasOwnProperty(e))return this.components[e]},getProtocol:function(){return this.getComponent("protocol")},getAnchor:function(){return this.getComponent("anchor")},getQuery:function(){return this.getComponent("query")},getFile:function(){return this.getComponent("file")},getRelative:function(){return this.getComponent("relative")},getDirectory:function(){return this.getComponent("directory")},getPath:function(){return this.getComponent("path")},getPort:function(){return this.getComponent("port")},getPassword:function(){return this.getComponent("password")},getUser:function(){return this.getComponent("user")},getUserInfo:function(){return this.getComponent("userInfo")},getQueryParams:function(){return this.getComponent("queryKey")},getSource:function(){return this.getComponent("source")},setQueryParam:function(e,t){this.components.hasOwnProperty("queryKey")||(this.components.queryKey={}),this.components.queryKey[e]=OWA.util.urlEncode(t),this.resetQuery()},removeQueryParam:function(e){this.components.hasOwnProperty("queryKey")&&this.components.queryKey.hasOwnProperty(e)&&(delete this.components.queryKey[e],this.resetQuery())},resetSource:function(){this.components.source=this.assembleUrl()},resetQuery:function(){var e=this.getQueryParams();if(e){var t="",i=OWA.util.countObjectProperties(e);for(var s in e)t+=s+"="+e[s],1<i&&(t+="&");this.components.query=t,this.resetSource()}},isDirty:function(){return this.dirty},setPath:function(e){},assembleUrl:function(){var e="";e+=this.getProtocol(),e+="://",this.getUser()&&(e+=this.getUser()),this.getUser()&&this.getPassword()&&(e+=":"+this.password()),e+=this.getHost(),this.getPort()&&(e+=":"+this.getPort()),e+=this.getDirectory(),e+=this.getFile();var t=this.getQuery();t&&(e+="?"+t);var i=this.getAnchor();return i&&(e+="#"+i),e+=this.getAnchor()}},OWA.util={ns:function(e){return OWA.config.ns+e},nsAll:function(e){var t=new Object;for(param in e)e.hasOwnProperty(param)&&(t[OWA.config.ns+param]=e[param]);return t},getScript:function(e,t){jQuery.getScript(t+e)},makeUrl:function(e,t,i){return this.sprintf(e,t,jQuery.param(OWA.util.nsAll(i)))},createCookie:function(e,t,i,s){if(i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3);var n="; expires="+r.toGMTString()}else n="";document.cookie=e+"="+t+n+"; path=/"},setCookie:function(e,t,i,s,r,n){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3),document.cookie=e+"="+escape(t)+(i?"; expires="+o.toGMTString():"")+(s?"; path="+s:"")+(r?"; domain="+r:"")+"; SameSite=Lax"+(n?"; secure":"")},readAllCookies:function(){OWA.debug("Reading all cookies...");var e={},t=document.cookie.split(";");if(t){OWA.debug(document.cookie);for(var i=0;i<t.length;i++){var s=OWA.util.trim(t[i]),r=OWA.util.strpos(s,"="),n=s.substring(0,r),o=s.substring(r+1,s.length);e.hasOwnProperty(n)||(e[n]=[]),e[n].push(o)}return OWA.debug(JSON.stringify(e)),e}},readCookie:function(e){OWA.debug("Attempting to read cookie: %s",e);var t=OWA.util.readAllCookies();if(t)return t.hasOwnProperty(e)?t[e]:""},eraseCookie:function(e,t){if(OWA.debug(document.cookie),t||(t=OWA.getSetting("cookie_domain")||document.domain),OWA.debug("erasing cookie: "+e+" in domain: "+t),this.setCookie(e,"",-1,"/",t),OWA.util.readCookie(e)){var i=t.substr(0,1);if(OWA.debug("period: "+i),"."===i){var s=t.substr(1);OWA.debug("erasing "+e+" in domain2: "+s),this.setCookie(e,"",-2,"/",s)}else OWA.debug("erasing "+e+" in domain3: "+t),this.setCookie(e,"",-2,"/",t)}},eraseMultipleCookies:function(e,t){for(var i=0;i<e.length;i++)this.eraseCookie(e[i],t)},loadScript:function(e,t){var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,t())}:i.onload=function(){t()},i.src=e,document.getElementsByTagName("head")[0].appendChild(i)},loadCss:function(e,t){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=e,document.getElementsByTagName("HEAD")[0].appendChild(i)},parseCookieString:function(e){var t=new Array,i=unescape(e).split("|||");for(var s in i)if(i.hasOwnProperty(s)){var r=i[s].split("=>");t[r[0]]=r[1]}return t},parseCookieStringToJson:function(e){var t=new Object,i=unescape(e).split("|||");for(var s in i)if(i.hasOwnProperty(s)){var r=i[s].split("=>");t[r[0]]=r[1]}return t},nsParams:function(e){var t=new Object;for(param in e)e.hasOwnProperty(param)&&(t[OWA.getSetting("ns")+param]=e[param]);return t},urlEncode:function(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},urldecode:function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))},parseUrlParams:function(e){for(var t,i,s,r,n,o,a={},l=location.href.split(/[?&]/),d=l.length,c=1;c<d;c++)if((s=l[c].match(/(.*?)(\..*?|\[.*?\])?=([^#]*)/))&&4==s.length){if(r=decodeURI(s[1]).toLowerCase(),n=a,o=decodeURI(s[3]),s[2])for(i=decodeURI(s[2]).replace(/\[\s*\]/g,"[-1]").split(/[\.\[\]]/),t=0;t<i.length;t++)n=n[r]?n[r]:n[r]=parseInt(i[t])==i[t]?[]:{},r=i[t].replace(/^["\'](.*)["\']$/,"$1");"-1"!=r?n[r]=o:n[n.length]=o}return a},strpos:function(e,t,i){var s=(e+"").indexOf(t,i||0);return-1!==s&&s},strCountOccurances:function(e,t){return e.split(t).length-1},implode:function(e,t){var i="",s="",r="";if(1===arguments.length&&(t=e,e=""),"object"==typeof t){if(t instanceof Array)return t.join(e);for(i in t)s+=r+t[i],r=e;return s}return t},checkForState:function(e){return OWA.checkForState(e)},setState:function(e,t,i,s,r,n){return OWA.setState(e,t,i,s,r,n)},replaceState:function(e,t,i,s,r){return OWA.replaceState(e,t,i,s,r)},getRawState:function(e){return OWA.getStateFromCookie(e)},getState:function(e,t){return OWA.getState(e,t)},clearState:function(e,t){return OWA.clearState(e,t)},getCookieValueFormat:function(e){return"{"===e.substr(0,1)?"json":"assoc"},decodeCookieValue:function(e){var t=OWA.util.getCookieValueFormat(e),i="";return i="json"===t?JSON.parse(e):OWA.util.jsonFromAssocString(e),OWA.debug("decodeCookieValue - string: %s, format: %s, value: %s",e,t,JSON.stringify(i)),i},encodeJsonForCookie:function(e,t){return"json"===(t=t||"assoc")?JSON.stringify(e):OWA.util.assocStringFromJson(e)},getCookieDomainHash:function(e){return OWA.util.dechex(OWA.util.crc32(e))},loadStateJson:function(e){var t=unescape(OWA.util.readCookie(OWA.getSetting("ns")+e));t&&(state=JSON.parse(t)),OWA.state[e]=state,OWA.debug("state store %s: %s",e,JSON.stringify(state))},is_array:function(e){return"object"==typeof e&&e instanceof Array},str_pad:function(e,t,i,s){var r,n="",o=function(e,t){for(var i="";i.length<t;)i+=e;return i=i.substr(0,t)};return i=void 0!==i?i:" ","STR_PAD_LEFT"!=s&&"STR_PAD_RIGHT"!=s&&"STR_PAD_BOTH"!=s&&(s="STR_PAD_RIGHT"),(r=t-(e+="").length)>0&&("STR_PAD_LEFT"==s?e=o(i,r)+e:"STR_PAD_RIGHT"==s?e+=o(i,r):"STR_PAD_BOTH"==s&&(e=(e=(n=o(i,Math.ceil(r/2)))+e+n).substr(0,t))),e},zeroFill:function(e,t){return OWA.util.str_pad(e,t,"0","STR_PAD_LEFT")},is_object:function(e){return!(e instanceof Array)&&(null!==e&&"object"==typeof e)},countObjectProperties:function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},jsonFromAssocString:function(e,t,i){if(t=t||"=>",i=i||"|||",e){if(!this.strpos(e,t))return e;for(var s={},r=e.split(i),n=0,o=r.length;n<o;n++){var a=r[n].split(t);s[a[0]]=a[1]}return s}},assocStringFromJson:function(e){var t="",i=0,s=OWA.util.countObjectProperties(e);for(var r in e)i++,t+=r+"=>"+e[r],i<s&&(t+="|||");return t},getDomainFromUrl:function(e,t){var i=e.split(/\/+/g)[1];return!0===t?OWA.util.stripWwwFromDomain(i):i},stripWwwFromDomain:function(e){return"www"===e.split(".")[0]?e.substring(4):e},getCurrentUnixTimestamp:function(){return Math.round((new Date).getTime()/1e3)},generateHash:function(e){return this.crc32(e)},generateRandomGuid:function(){return this.getCurrentUnixTimestamp()+""+OWA.util.zeroFill(this.rand(0,999999)+"",6)+OWA.util.zeroFill(this.rand(0,999)+"",3)},sha256:function e(t){function i(e,t){return e>>>t|e<<32-t}for(var s,r,n=Math.pow,o=n(2,32),a="",l=[],d=8*t.length,c=e.h=e.h||[],h=e.k=e.k||[],u=h.length,p={},f=2;u<64;f++)if(!p[f]){for(s=0;s<313;s+=f)p[s]=f;c[u]=n(f,.5)*o|0,h[u++]=n(f,1/3)*o|0}for(t+="";t.length%64-56;)t+="\0";for(s=0;s<t.length;s++){if((r=t.charCodeAt(s))>>8)return;l[s>>2]|=r<<(3-s)%4*8}for(l[l.length]=d/o|0,l[l.length]=d,r=0;r<l.length;){var g=l.slice(r,r+=16),m=c;for(c=c.slice(0,8),s=0;s<64;s++){var v=g[s-15],b=g[s-2],y=c[0],w=c[4],_=c[7]+(i(w,6)^i(w,11)^i(w,25))+(w&c[5]^~w&c[6])+h[s]+(g[s]=s<16?g[s]:g[s-16]+(i(v,7)^i(v,18)^v>>>3)+g[s-7]+(i(b,17)^i(b,19)^b>>>10)|0);(c=[_+((i(y,2)^i(y,13)^i(y,22))+(y&c[1]^y&c[2]^c[1]&c[2]))|0].concat(c))[4]=c[4]+_|0}for(s=0;s<8;s++)c[s]=c[s]+m[s]|0}for(s=0;s<8;s++)for(r=3;r+1;r--){var x=c[s]>>8*r&255;a+=(x<16?0:"")+x.toString(16)}return a},crc32:function(e){var t=0,i=0;t^=-1;for(var s=0,r=(e=this.utf8_encode(e)).length;s<r;s++)i=255&(t^e.charCodeAt(s)),t=t>>>8^"0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*i,8);return-1^t},utf8_encode:function(e){var t,i,s,r=e+"",n="";t=i=0,s=r.length;for(var o=0;o<s;o++){var a=r.charCodeAt(o),l=null;a<128?i++:l=a>127&&a<2048?String.fromCharCode(a>>6|192)+String.fromCharCode(63&a|128):String.fromCharCode(a>>12|224)+String.fromCharCode(a>>6&63|128)+String.fromCharCode(63&a|128),null!==l&&(i>t&&(n+=r.substring(t,i)),n+=l,t=i=o+1)}return i>t&&(n+=r.substring(t,r.length)),n},utf8_decode:function(e){var t=[],i=0,s=0,r=0,n=0,o=0;for(e+="";i<e.length;)(r=e.charCodeAt(i))<128?(t[s++]=String.fromCharCode(r),i++):r>191&&r<224?(n=e.charCodeAt(i+1),t[s++]=String.fromCharCode((31&r)<<6|63&n),i+=2):(n=e.charCodeAt(i+1),o=e.charCodeAt(i+2),t[s++]=String.fromCharCode((15&r)<<12|(63&n)<<6|63&o),i+=3);return t.join("")},trim:function(e,t){var i,s=0,r=0;for(e+="",i=t?(t+="").replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1"):" \n\r\t\f\v\u2028\u2029",s=e.length,r=0;r<s;r++)if(-1===i.indexOf(e.charAt(r))){e=e.substring(r);break}for(r=(s=e.length)-1;r>=0;r--)if(-1===i.indexOf(e.charAt(r))){e=e.substring(0,r+1);break}return-1===i.indexOf(e.charAt(0))?e:""},rand:function(e,t){var i=arguments.length;if(0===i)e=0,t=2147483647;else if(1===i)throw new Error("Warning: rand() expects exactly 2 parameters, 1 given");return Math.floor(Math.random()*(t-e+1))+e},base64_encode:function(e){var t,i,s,r,n,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,d="",c=[];if(!e)return e;e=this.utf8_encode(e+"");do{t=(n=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,i=n>>12&63,s=n>>6&63,r=63&n,c[l++]=o.charAt(t)+o.charAt(i)+o.charAt(s)+o.charAt(r)}while(a<e.length);switch(d=c.join(""),e.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"="}return d},base64_decode:function(e){var t,i,s,r,n,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,d=0,c="",h=[];if(!e)return e;e+="";do{t=(o=a.indexOf(e.charAt(l++))<<18|a.indexOf(e.charAt(l++))<<12|(r=a.indexOf(e.charAt(l++)))<<6|(n=a.indexOf(e.charAt(l++))))>>16&255,i=o>>8&255,s=255&o,h[d++]=64==r?String.fromCharCode(t):64==n?String.fromCharCode(t,i):String.fromCharCode(t,i,s)}while(l<e.length);return c=h.join(""),c=this.utf8_decode(c)},sprintf:function(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,t=arguments,i=0,s=t[i++],r=function(e,t,i,s){i||(i=" ");var r=e.length>=t?"":Array(1+t-e.length>>>0).join(i);return s?e+r:r+e},n=function(e,t,i,s,n,o){var a=s-e.length;return a>0&&(e=i||!n?r(e,s,o,i):e.slice(0,t.length)+r("",a,"0",!0)+e.slice(t.length)),e},o=function(e,t,i,s,o,a,l){var d=e>>>0;return e=(i=i&&d&&{2:"0b",8:"0",16:"0x"}[t]||"")+r(d.toString(t),a||0,"0",!1),n(e,i,s,o,l)},a=function(e,t,i,s,r,o){return null!=s&&(e=e.slice(0,s)),n(e,"",t,i,r,o)},l=function(e,s,l,d,c,h,u){var p,f,g,m,v;if("%%"==e)return"%";for(var b=!1,y="",w=!1,_=!1,x=" ",C=l.length,k=0;l&&k<C;k++)switch(l.charAt(k)){case" ":y=" ";break;case"+":y="+";break;case"-":b=!0;break;case"'":x=l.charAt(k+1);break;case"0":w=!0;break;case"#":_=!0}if((d=d?"*"==d?+t[i++]:"*"==d.charAt(0)?+t[d.slice(1,-1)]:+d:0)<0&&(d=-d,b=!0),!isFinite(d))throw new Error("sprintf: (minimum-)width must be finite");switch(h=h?"*"==h?+t[i++]:"*"==h.charAt(0)?+t[h.slice(1,-1)]:+h:"fFeE".indexOf(u)>-1?6:"d"==u?0:void 0,v=s?t[s.slice(0,-1)]:t[i++],u){case"s":return a(String(v),b,d,h,w,x);case"c":return a(String.fromCharCode(+v),b,d,h,w);case"b":return o(v,2,_,b,d,h,w);case"o":return o(v,8,_,b,d,h,w);case"x":return o(v,16,_,b,d,h,w);case"X":return o(v,16,_,b,d,h,w).toUpperCase();case"u":return o(v,10,_,b,d,h,w);case"i":case"d":return v=(f=(p=parseInt(+v,10))<0?"-":y)+r(String(Math.abs(p)),h,"0",!1),n(v,f,b,d,w);case"e":case"E":case"f":case"F":case"g":case"G":return f=(p=+v)<0?"-":y,g=["toExponential","toFixed","toPrecision"]["efg".indexOf(u.toLowerCase())],m=["toString","toUpperCase"]["eEfFgG".indexOf(u)%2],v=f+Math.abs(p)[g](h),n(v,f,b,d,w)[m]();default:return e}};return s.replace(e,l)},clone:function(e){var t=e instanceof Array?[]:{};for(var i in e)e[i]&&"object"==typeof e[i]?t[i]=OWA.util.clone(e[i]):t[i]=e[i];return t},strtolower:function(e){return(e+"").toLowerCase()},in_array:function(e,t,i){var s="";if(!!i){for(s in t)if(t[s]===e)return!0}else for(s in t)if(t[s]==e)return!0;return!1},dechex:function(e){return e<0&&(e=4294967295+e+1),parseInt(e,10).toString(16)},explode:function(e,t,i){var s={0:""};if(arguments.length<2||void 0===arguments[0]||void 0===arguments[1])return null;if(""===e||!1===e||null===e)return!1;if("function"==typeof e||"object"==typeof e||"function"==typeof t||"object"==typeof t)return s;if(!0===e&&(e="1"),i){var r=t.toString().split(e.toString()),n=r.splice(0,i-1),o=r.join(e.toString());return n.push(o),n}return t.toString().split(e.toString())},isIE:function(){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent))return!0},getInternetExplorerVersion:function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return e},isBrowserTrackable:function(){for(var e=["doNotTrack","msDoNotTrack"],t=0,i=e.length;t<i;t++)if(navigator[e[t]]&&"1"==navigator[e[t]])return!1;return!0}},OWA.report=function(e,t){this.options={autoRefreshResultSets:!1,autoRefreshResultSetsInterval:15e3},this.overrideOptions(t),this.dom_id=e,this.config=OWA.config,this.properties={},this.tabs={},this.timePeriodControl="",this.resultSetExplorers={},this.isActive=!1,this.activeTab="";this.getOption("autoRefreshResultSets")},OWA.report.prototype={display:function(){},showAutoRefreshControl:function(e){var t="";t=e.hasOwnProperty("target")?e.target:"#"+this.dom_id+" > .liveViewSwitch",e.hasOwnProperty("label")?label=e.label:t="Live View: ";var i=[];i.push('<div class="autoRefreshControl">'),i.push(OWA.util.sprintf('<span class="label">%s</span>',label)),i.push('<span class="buttons">'),i.push('<input type="radio" name="autorefresh" id="autorefresh-on-button" /><label for="autorefresh-on-button">On</label>'),i.push('<input type="radio" name="autorefresh" checked="checked" id="autorefresh-off-button" /><label for="autorefresh-off-button">Off</label>'),i.push("</span>"),i.push('<div style="clear:both;"></div>'),i.push("</div>"),jQuery(t).append(i.join(" ")),jQuery(t+" > .autoRefreshControl > .buttons").buttonset();var s=this;jQuery(t+" > .autoRefreshControl > .buttons > #autorefresh-on-button").click((function(){s.startAutoRefresh()})),jQuery(t+" > .autoRefreshControl > .buttons > #autorefresh-off-button").click((function(){s.stopAutoRefresh()})),jQuery(window).focus((function(){s.isActive=!0,s.getOption("autoRefreshResultSets")&&s.startAutoRefresh()})),jQuery(window).blur((function(){s.isActive=!1,s.getOption("autoRefreshResultSets")&&s.pauseAutoRefresh()}))},startAutoRefresh:function(){var e=this.getOption("autoRefreshResultSetsInterval");if(OWA.util.countObjectProperties(this.resultSetExplorers)>0)for(name in this.resultSetExplorers)this.resultSetExplorers.hasOwnProperty(name)&&this.resultSetExplorers[name].enableAutoRefresh(e);this.activeTab&&this.tabs[this.activeTab].startAutoRefresh(),this.options.autoRefreshResultSets=!0},stopAutoRefresh:function(){if(OWA.util.countObjectProperties(this.resultSetExplorers)>0)for(name in this.resultSetExplorers)this.resultSetExplorers.hasOwnProperty(name)&&this.resultSetExplorers[name].stopAutoRefresh();this.activeTab&&this.tabs[this.activeTab].stopAutoRefresh(),this.options.autoRefreshResultSets=!1},pauseAutoRefresh:function(){this.stopAutoRefresh(),this.options.autoRefreshResultSets=!0},registerResultSetExplorer:function(e,t){this.getOption("autoRefreshResultSets")&&t.enableAutoRefresh(this.getOption("autoRefreshResultSetsInterval")),this.resultSetExplorers[e]=t},overrideOptions:function(e){for(option in e=e||{})e.hasOwnProperty(option)&&(this.options[option]=e[option])},getOption:function(e){if(this.options.hasOwnProperty(e))return this.options[e]},config:"",displayTimePeriodPicker:function(e){var t=this;e=e||"#owa_reportPeriodLabelContainer",this.timePeriodControl||(this.timePeriodControl=new OWA.report.timePeriodControl(e,{startDate:this.getStartDate(),endDate:this.getEndDate(),selectedPeriod:this.getProperty("period")}),jQuery(e).bind("owa_new_time_period_set",(function(e,i,s){t.setDateRange(i,s),t.reload()})),jQuery(e).bind("owa_new_fixed_time_period_set",(function(e,i){t.reportSetTimePeriod(i)})))},showSiteFilter:function(e){var t=this;jQuery("#owa_reportSiteFilterSelect").change((function(){t.reload()}))},reportSetTimePeriod:function(e){this.setPeriod(e),this.reload()},reload:function(){var e=jQuery("#owa_reportSiteFilterSelect option:selected").val();OWA.debug(this.properties.action),null!=e&&(this.properties.siteId=e);var t=OWA.util.makeUrl(OWA.config.link_template,OWA.config.main_url,this.properties);window.location.href=t},_parseDate:function(e){},setDateRange:function(e,t){this.setProperty("startDate",e),this.setProperty("endDate",t),this.removeProperty("period")},setPeriod:function(e){this.properties.period=e,this.properties.hasOwnProperty("startDate")&&delete this.properties.startDate,this.properties.hasOwnProperty("endDate")&&delete this.properties.endDate},addTab:function(e){e.dom_id.length>0?this.tabs[e.dom_id]=e:OWA.debug("tab cannot be added with no dom_id set.")},createTabs:function(){var e=this;for(tab in jQuery("#report-tabs").prepend('<ul class="report-tabs-nav-list"></ul>'),this.tabs)this.tabs.hasOwnProperty(tab)&&jQuery("#report-tabs > .report-tabs-nav-list").append(OWA.util.sprintf('<li><a href="#%s">%s</a></li>',tab,e.tabs[tab].label));jQuery("#report-tabs").tabs({show:function(t,i){OWA.debug("tab selected is: %s",i.panel.id),e.tabs[i.panel.id].load(),e.activeTab&&e.getOption("autoRefreshResultSets")&&e.tabs[e.activeTab].stopAutoRefresh(),e.activeTab=i.panel.id,e.activeTab&&e.getOption("autoRefreshResultSets")&&e.tabs[e.activeTab].startAutoRefresh()}})},getSiteId:function(){return this.getProperty("siteId")},getPeriod:function(){return this.getProperty("period")},getStartDate:function(){return this.getProperty("startDate")},getEndDate:function(){return this.getProperty("endDate")},setRequestProperty:function(e,t){this.setProperty(e,t)},setProperty:function(e,t){this.properties[e]=t},removeProperty:function(e){this.properties.hasOwnProperty(e)&&delete this.properties[e]},getProperty:function(e){if(this.properties.hasOwnProperty(e))return this.properties[e]}},OWA.report.tab=function(e){this.dom_id=e,this.resultSetExplorers={},this.label="Default label",this.isLoaded=!1,this.load=function(){if(!this.isLoaded){for(rse in this.resultSetExplorers)this.resultSetExplorers.hasOwnProperty(rse)&&this.resultSetExplorers[rse].load();this.isLoaded=!0}}},OWA.report.tab.prototype={startAutoRefresh:function(){for(rse in this.resultSetExplorers)this.resultSetExplorers.hasOwnProperty(rse)&&this.resultSetExplorers[rse].enableAutoRefresh()},stopAutoRefresh:function(){for(rse in this.resultSetExplorers)this.resultSetExplorers.hasOwnProperty(rse)&&this.resultSetExplorers[rse].stopAutoRefresh()},addRse:function(e,t){this.resultSetExplorers[e]=t},setLabel:function(e){this.label=e},setDomId:function(e){this.dom_id=e}},OWA.report.timePeriodControl=function(e,t){t=t||{};this.dom_id=e||"owa_reportPeriodControl",this.startDate="",this.endDate="",this.label="",t.hasOwnProperty("startDate")&&this.setStartDate(t.startDate),t.hasOwnProperty("endDate")&&this.setEndDate(t.endDate),t.hasOwnProperty("selectedPeriod")&&this.setSelectedPeriod(t.selectedPeriod),this.label=OWA.util.sprintf("%s - %s",this.formatYyyymmdd(this.getStartDate(),"/"),this.formatYyyymmdd(this.getEndDate(),"/")),this.setupDomElements()},OWA.report.timePeriodControl.prototype={fixedPeriods:{today:"Today",yesterday:"Yesterday",this_week:"This Week",this_month:"This Month",this_year:"This Year",last_week:"Last Week",last_month:"Last Month",last_year:"Last Year",last_seven_days:"Last Seven Days",last_thirty_days:"Last Thirty Days",same_day_last_week:"Same Day Last Week",same_week_last_year:"Same Week Last Year",same_month_last_year:"Same Month Last Year"},setSelectedPeriod:function(e){this.selectedPeriod=e},formatYyyymmdd:function(e,t){t=t||"-";var i=e.substr(2,2);return e.substr(4,2)+t+e.substr(6,2)+t+i},setStartDate:function(e){this.startDate=e},setEndDate:function(e){this.endDate=e},getStartDate:function(){return this.startDate},getEndDate:function(){return this.endDate},isValidDateString:function(e){return 10==e.length&&("-"==e.substr(2,1)&&"-"==e.substr(5,1))},setupDomElements:function(){var e=this,t={periods:this.fixedPeriods,datelabel:this.label,selectedPeriod:this.selectedPeriod};jQuery.get(OWA.getOption("modules_url")+"base/templates/filter_period.php",(function(i){jQuery(e.dom_id).jqoteapp(i,t,"*"),jQuery("#owa_reportPeriodLabelContainer").click((function(){jQuery("#owa_reportPeriodFiltersContainer").toggle()})),jQuery("#owa_report-datepicker-start-display").change((function(){var t=jQuery(this).val();e.isValidDateString(t)?(jQuery("#owa_report-datepicker-start").datepicker("setDate",t),jQuery("#owa_report-datepicker-start").datepicker("option","onSelect")(t)):(alert("Date must be in mm-dd-yyyy format."),jQuery("#owa_report-datepicker-start-display").val(""))})),jQuery("#owa_report-datepicker-end-display").change((function(){var t=jQuery(this).val();e.isValidDateString(t)?(jQuery("#owa_report-datepicker-end").datepicker("setDate",t),jQuery("#owa_report-datepicker-end").datepicker("option","onSelect")(t)):(alert("Date must be in mm-dd-yyyy format."),jQuery("#owa_report-datepicker-end-display").val(""))})),jQuery("#owa_report-datepicker-start").datepicker({dateFormat:"mm-dd-yy",altField:"#owa_report-datepicker-start-display",onSelect:function(e){var t=jQuery("#owa_report-datepicker-start").data("datepicker"),i=jQuery.datepicker.parseDate(t.settings.dateFormat||jQuery.datepicker._defaults.dateFormat,e,t.settings);jQuery("#owa_report-datepicker-end").datepicker("option","minDate",i),jQuery("#owa_report-datepicker-start").datepicker("option","maxDate",jQuery("#owa_report-datepicker-end").datepicker("getDate"))},defaultDate:e.formatYyyymmdd(e.getStartDate())}),jQuery("#owa_report-datepicker-end").datepicker({dateFormat:"mm-dd-yy",altField:"#owa_report-datepicker-end-display",onSelect:function(e){var t=jQuery("#owa_report-datepicker-end").data("datepicker"),i=jQuery.datepicker.parseDate(t.settings.dateFormat||jQuery.datepicker._defaults.dateFormat,e,t.settings);jQuery("#owa_report-datepicker-end").datepicker("option","minDate",jQuery("#owa_report-datepicker-start").datepicker("getDate")),jQuery("#owa_report-datepicker-start").datepicker("option","maxDate",i)},defaultDate:e.formatYyyymmdd(e.getEndDate())}),jQuery("#owa_reportPeriodFilterSubmit").click((function(){jQuery(e.dom_id).trigger("owa_new_time_period_set",[jQuery.datepicker.formatDate("yymmdd",jQuery("#owa_report-datepicker-start").datepicker("getDate")),jQuery.datepicker.formatDate("yymmdd",jQuery("#owa_report-datepicker-end").datepicker("getDate"))])})),jQuery("#owa_reportPeriodFilter").change((function(){var t=jQuery("#owa_reportPeriodFilter option:selected").val();jQuery(e.dom_id).trigger("owa_new_fixed_time_period_set",[t])}))}))}},
/**
 * Result Set Object
 * 
 * @author      Peter Adams <peter@openwebanalytics.com>
 * @web            <a href="http://www.openwebanalytcs.com">Open Web Analytics</a>
 * @copyright   Copyright &copy; 2006-2010 Peter Adams <peter@openwebanalytics.com>
 * @license     http://www.gnu.org/copyleft/gpl.html GPL v2.0
 * @category    owa
 * @package     owa
 * @version        $Revision$
 * @since        owa 1.5.0
 */
OWA.resultSet=function(e){for(attribute in e)this[attribute]=e[attribute]},OWA.resultSet.prototype={getMetricLabel:function(e){return this.aggregates[e].label.length>0?this.aggregates[e].label:"unknown"},getMetricValue:function(e){return this.aggregates[e].value.length>0?this.aggregates[e].value:0},getSeries:function(e,t,i){if(this.resultsRows.length>0){for(var s=[],r=0;r<=this.resultsRows.length-1;r++)if(!i||(check=i(this.resultsRows[r]),check)){var n="";n=t?[this.resultsRows[r][e].value,this.resultsRows[r][t].value]:this.resultsRows[r][e].value,s.push(n)}return s}}},
/**
 * Result Set Explorer Library
 * 
 * @author      Peter Adams <peter@openwebanalytics.com>
 * @web            <a href="http://www.openwebanalytcs.com">Open Web Analytics</a>
 * @copyright   Copyright &copy; 2006-2010 Peter Adams <peter@openwebanalytics.com>
 * @license     http://www.gnu.org/copyleft/gpl.html GPL v2.0
 * @category    owa
 * @package     owa
 * @version        $Revision$
 * @since        owa 1.3.0
 */
OWA.resultSetExplorer=function(e,t){this.dom_id=e||"",this.gridInit=!1,this.init={grid:!1,pieChart:!1,areaChart:!1},this.columnLinks="",this._columnLinksCount=0,this.resultSet=[],this.currentView="",this.currentContainerWidth="",this.currentWindowWidth="",this.view="",this.asyncQueue=[],this.subscriber_dom_ids=[],this.autoRefreshInterval=1e4,this.autoRefresh=!1,this.autoRefreshTimerId="",this.domSelectors={areaChart:"",grid:""},this.options={defaultView:"grid",areaChart:{series:[],showDots:!0,showLegend:!0,lineWidth:4},pieChart:{metric:"",dimension:"",metrics:[],numSlices:5},sparkline:{metric:""},grid:{showRowNumbers:!0,excludeColumns:[],columnFormatters:{}},template:{template:"",params:"",mode:"append",dom_id:""},metricBoxes:{width:""},chart:{showGrid:!0},chartHeight:125,chartWidth:700,autoResizeCharts:!0,views:["grid","areaChart","pie","sparkline"]},this.viewObjects={},this.loadUrl="",this.dataExportApiParams={},this.isLoaded=!1},OWA.resultSetExplorer.prototype={viewMethods:{grid:"refreshGrid",areaChart:"makeAreaChart",pie:"makePieChart",sparkline:"makeSparkline",template:"renderTemplate"},setDataLoadUrl:function(e){this.loadUrl=e},changeSort:function(e,t){var i=new OWA.uri(this.resultSet.self),s="";"desc"===t&&(s="-"),i.setQueryParam("owa_sort",e+s),i.removeQueryParam("owa_page"),this.getNewResultSet(i.getSource())},changeDimension:function(e,t){var i=new OWA.uri(this.resultSet.self),s=OWA.util.urldecode(i.getQueryParam("owa_dimensions")),r=[];if(s){if(s=s.split(","),OWA.util.in_array(e,s))for(var n=0;n<s.length;n++)s[n]===e?new_dim=t:new_dim=s[n],r.push(new_dim);else(r=s).push(t);r=r.join(","),i.setQueryParam("owa_dimensions",r),this.getNewResultSet(i.getSource())}},changeConstraints:function(e){var t=new OWA.uri(this.resultSet.self);t.setQueryParam("owa_constraints",e),this.getNewResultSet(t.getSource())},getOption:function(e){return this.options[e]},getAggregates:function(){return this.resultSet.aggregates},setView:function(e){this.view=e},setCurrentView:function(e){jQuery(that.domSelectors[that.currentView]).toggle(),this.currentView=e},makeRowGuid:function(e){},getRowValues:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i].value);return t},loadFromArray:function(e,t){t&&(this.view=t),this.loader(e)},load:function(e){this.showLoader(),e=e||this.loadUrl,this.getResultSet(e)},createGrid:function(e,t){e=e||this.dom_id,t=t||this.options.grid,new OWA.dataGrid(e,t).generate(this.resultSet),this.registerDataChangeSubscriber(e);var i=this;jQuery("#"+e).bind("page_forward",(function(e){i.getNewResultSet(i.resultSet.next)})),jQuery("#"+e).bind("page_back",(function(e){i.getNewResultSet(i.resultSet.previous)})),jQuery("#"+e).bind("secondary_dimension_change",(function(e,t,s){i.changeDimension(t,s)})),jQuery("#"+e).bind("sort_column_change",(function(e,t,s){i.changeSort(t,s)})),jQuery("#"+e).bind("constraint_change",(function(e,t){i.changeConstraints(t)}))},registerDataChangeSubscriber:function(e){this.subscriber_dom_ids.push(e)},refreshGrid:function(){return this.createGrid()},loader:function(e){if(e){if(this.setResultSet(e),this.isLoaded=!0,this.view)this[this.viewMethods[this.view]]();if(this.asyncQueue.length>0)for(var t=0;t<this.asyncQueue.length;t++)this.dynamicFunc(this.asyncQueue[t]);this.autoRefresh&&this.startAutoRefresh()}},enableAutoRefresh:function(e){this.isLoaded?this.startAutoRefresh(e):(this.autoRefreshInterval=e||this.autoRefreshInterval,this.autoRefresh=!0)},startAutoRefresh:function(e){if(this.autoRefreshInterval=e||this.autoRefreshInterval,this.isLoaded&&!this.autoRefreshTimerId){var t=this;this.autoRefreshTimerId=setInterval((function(){t.getNewResultSet()}),this.autoRefreshInterval)}},stopAutoRefresh:function(){clearInterval(this.autoRefreshTimerId),this.autoRefreshTimerId=""},dynamicFunc:function(e){var t=Array.prototype.slice.call(e,1);this[e[0]].apply(this,t)},showLoader:function(){jQuery("#"+this.dom_id).append('<div class="loader"><img class="loading" src="'+OWA.getSetting("baseUrl")+'/modules/base/i/loader.gif"></div>')},hideLoader:function(){jQuery("#"+this.dom_id).find(".loader").remove()},getResultSet:function(e){var t=this;jQuery.getJSON(e,"",(function(e){t.hideLoader(),t.loader(e)}))},getNewResultSet:function(e){e=e||this.resultSet.self;var t=this;jQuery.getJSON(e,"",(function(e){t.setResultSet(e)}))},setResultSet:function(e){if(OWA.util.is_object(e)&&OWA.util.is_object(this.resultSet)){if(e.guid===this.resultSet.guid)return void OWA.debug("result set has same GUID. no change needed.");OWA.debug("result set has new GUID. change needed.")}e.hasOwnProperty("data")?this.resultSet=new OWA.resultSet(e.data):this.resultSet=new OWA.resultSet(e),this.applyLinks();for(var t=this,i=0;i<t.subscriber_dom_ids.length;i++)OWA.debug("about to trigger data updates."),jQuery("#"+t.subscriber_dom_ids[i]).trigger("new_result_set",[t.resultSet])},addLinkToColumn:function(e,t,i){if(this.columnLinks={},e){var s={};s.name=e,s.template=t,s.params=i,this.columnLinks[e]=s,s=""}this._columnLinksCount++},applyLinks:function(){if(this.resultSet.resultsRows.length>0&&this._columnLinksCount>0)for(var e=0;e<=this.resultSet.resultsRows.length-1;e++)for(var t in this.columnLinks)if(this.columnLinks.hasOwnProperty(t)){var i=this.columnLinks[t].template;if(this.resultSet.resultsRows[e][t].name.length>0){for(var s in this.columnLinks[t].params)this.columnLinks[t].params.hasOwnProperty(s)&&(i=i.replace("%s",OWA.util.urlEncode(this.resultSet.resultsRows[e][this.columnLinks[t].params[s]].value)));this.resultSet.resultsRows[e][this.columnLinks[t].name].link=i}}},formatValue:function(e,t){switch(e){case"yyyymmdd":var i=1*t.substring(0,4),s=1*t.substring(4,6)-1,r=1*t.substring(6,8),n=Date.UTC(i,s,r,0,0,0,0);t=n,OWA.debug("year: %s, month: %s, day: %s, timestamp: %s",i,s,r,n);break;case"currency":t/=100}return t},timestampFormatter:function(e){var t=new Date(1*e),i=t.getUTCDate();return t.getUTCMonth()+1+"/"+i+"/"+t.getUTCFullYear()},makeAreaChart:function(e,t){var i=new OWA.areaChart;t=t||this.dom_id,i.setDomId(t),i.generate(this.resultSet,e,t),this.registerDataChangeSubscriber(t)},showTooltip:function(e,t,i){jQuery('<div id="tooltip">'+i+"</div>").css({position:"absolute",display:"none",top:t+5,left:e+5,border:"1px solid #cccccc",padding:"2px","background-color":"#ffffff",opacity:.9}).appendTo("body").fadeIn(100)},getMetricLabel:function(e){return this.resultSet.getMetricLabel(e)},getMetricValue:function(e){return this.resultSet.getMetricValue(e)},makePieChart:function(e,t,i){var s=new OWA.pieChart;i||(i=this.options.pieChart),t||(t=this.dom_id),e||(e=this.resultSet),s.generate(e,t,i),this.registerDataChangeSubscriber(t)},renderTemplate:function(e,t,i,s){e=e||this.options.template.template,t=t||this.options.template.params,i=i||this.options.template.mode,s=s||this.options.template.dom_id||this.dom_id,jQuery.jqotetag("*"),"append"===i?jQuery("#"+s).jqoteapp(e,t):"prepend"===i?jQuery("#"+s).jqotepre(e,t):"replace"===i&&jQuery("#"+s).jqotesub(e,t)},getSeries:function(e,t,i){if(this.resultSet.resultsRows.length>0){for(var s=[],r=0;r<=this.resultSet.resultsRows.length-1;r++)if(!i||(check=i(this.resultSet.resultsRows[r]),check)){var n="";n=t?[this.resultSet.resultsRows[r][e].value,this.resultSet.resultsRows[r][t].value]:this.resultSet.resultsRows[r][e].value,s.push(n)}return s}},makeMetricBoxes:function(e,t,i,s,r){var n=new OWA.kpiBox;e||(e=this.dom_id);var o={};t&&(o.template=t),i&&(o.label=i),s&&(o.metrics=s),r&&(o.filter=r),this.options.metricBoxes.width&&(o.width=this.options.metricBoxes.width),n.generate(this.resultSet,e,o),this.registerDataChangeSubscriber(e)},makeSparkLine:function(e,t){e||(e=this.dom_id),(new OWA.sparkline).generate(this.resultSet,e,t),this.registerDataChangeSubscriber(e)},renderResultsRows:function(e,t){if(this.resultSet.resultsRows.length>0){e=e||this.dom_id;var s,r=[];for(var n in this.resultSet.resultsRows[0])this.resultSet.resultsRows[0].hasOwnProperty(n)&&r.push(this.resultSet.resultsRows[0][n]);jQuery.jqotetag("*");var o=jQuery("#simpleTable-headers").jqote(r);for(s=jQuery("#simpleTable-outer").jqote({dom_id:e+"_simpleTable",headers:o}),jQuery("#"+e).html(s),i=0;i<=this.resultSet.resultsRows.length-1;i++){var a="";for(var l in this.resultSet.resultsRows[i])this.resultSet.resultsRows[i].hasOwnProperty(l)&&(a+=jQuery("#table-column").jqote(this.resultSet.resultsRows[i][l]));var d=jQuery("#table-row").jqote({columns:a});jQuery("#"+e+"_simpleTable").append(d)}}else jQuery("#"+e).html("No results to display.")},getApiEndpoint:function(){return this.getOption("api_endpoint")||OWA.getSetting("api_endpoint")},makeApiRequestUrl:function(e,t,i){i=i||this.getApiEndpoint();i+="?",i+="owa_do="+e;OWA.util.countObjectProperties(t);for(option in t)t.hasOwnProperty(option)&&(void 0!==t[option]&&(i+="&owa_"+option+"="+OWA.util.urlEncode(t[option])));return i}},OWA.dimensionPicker=function(e,t){this.dim_list={},this.alternate_field_selector="",this.dom_id=e,this.exclusions=[],t&&t.hasOwnProperty("exclusions")&&this.setExclusions(t.exclusions)},OWA.dimensionPicker.prototype={setDimensions:function(e){this.dim_list=e},reset:function(e){e&&this.setDimensions(e),this.generateDimList()},display:function(e){var t=this.dom_id;jQuery(t).html('<span class="dimensionPicker"></span>'),jQuery(t+" > .dimensionPicker > .dim-list").hide(),this.generateDimList(t+" > .dimensionPicker",e)},setDimensionlist:function(e){this.dim_list=e},generateDimList:function(e,t){var i=e,s='<select data-placeholder="Select..." name="dim-list" class="dim-list" style="width:150px;"><option value=""></option>',r=this;if(OWA.util.countObjectProperties(this.dim_list)>0){for(group in this.dim_list)if(this.dim_list.hasOwnProperty(group)){s+=OWA.util.sprintf('<optgroup label="%s">',group);for(var n=0;n<this.dim_list[group].length;n++)this.exclusions.length>0&&OWA.util.in_array(this.dim_list[group][n].name,this.exclusions)||(s+=OWA.util.sprintf('<option value="%s">%s</option>',this.dim_list[group][n].name,this.dim_list[group][n].label))}}else s+=OWA.l("There are no related dimensions.");jQuery(i).append(s),jQuery(i+" > .dim-list").chosen({no_results_text:"Name not found."}),jQuery(i+" > .dim-list").chosen().change((function(){var t=jQuery(e+" > .dim-list").val();jQuery(r.dom_id).trigger("dimension_change",["",t])})),t&&jQuery(e+" > .dim-list").val(t).trigger("liszt:updated")},setAlternateField:function(e){this.alternate_field_selector=e},setExclusions:function(e){this.exclusions=e}},OWA.dataGrid=function(e,t){this.dom_id=e,this.options=t,this.init=!1,this.gridColumnOrder=[],this.columnLinks="",this.constraintPicker="",this.previousDimensionName=""},OWA.dataGrid.prototype={generate:function(e){OWA.debug("hi from generate");var t=this;jQuery.extend(jQuery.fn.fmatter,{urlFormatter:function(e,t,i){t.rowId;var s=t.colModel.realColName;if(OWA.debug(t.rowId-1+" "+s),i[s].link.length>0)return'<a href="'+i[s].link+'">'+e.formatted_value+"</a>"},useServerFormatter:function(e,t,i){return i[t.colModel.realColName].formatted_value}}),!0!==this.init?this.display(e):this.refresh(e),jQuery("#load_"+t.dom_id+"_grid").hide(),jQuery("#load_"+t.dom_id+"_grid").css("z-index",101),1==e.page?(jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_nextPageControl").show(),jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_previousPageControl").hide()):e.page==e.total_pages?(jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_nextPageControl").hide(),jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_previousPageControl").show()):jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_previousPageControl").show()},display:function(e){if(e.resultsReturned>0)this.subscribeToDataUpdates(),this.injectDomElements(e),this.setGridOptions(e),this.addAllRowsToGrid(e),this.makeGridPagination(e),this.init=!0;else{var t=this.dom_id;jQuery("#"+t).html("No data is available for this time period.")}},refresh:function(e){var t=this;jQuery("#"+t.dom_id+"_grid").jqGrid("GridUnload","#gbox_"+t.dom_id+"_grid"),this.setGridOptions(e),jQuery("#"+t.dom_id+" _grid").jqGrid("clearGridData",!0),this.addAllRowsToGrid(e)},subscribeToDataUpdates:function(){var e=this;jQuery("#"+e.dom_id).bind("new_result_set",(function(t,i){e.generate(i)}))},makeGridPagination:function(e){if(e.more){var t=this,i="";i+='<LI class="owa_previousPageControl">',i+="<span>&laquo</span></LI>",jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL").append(i),jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_previousPageControl").button(),jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_previousPageControl > .ui-button-text").css("line-height","0.5"),jQuery(".owa_previousPageControl").bind("click",(function(){t.pageGrid("back")}));var s="";s+='<LI class="owa_nextPageControl">',s+="<span>&raquo</span></LI>",jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL").append(s),jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_nextPageControl").button(),jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_nextPageControl > .ui-button-text").css("line-height","0.5"),jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_nextPageControl").bind("click",(function(){t.pageGrid("forward")})),1==e.page&&jQuery("#"+t.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_previousPageControl").hide()}},pageGrid:function(e){jQuery("#"+this.dom_id).trigger("page_"+e,[])},addAllRowsToGrid:function(e){var t=this;jQuery("#load_"+t.dom_id+"_grid").html("Loading..."),jQuery("#load_"+t.dom_id+"_grid").show(),jQuery("#load_"+t.dom_id+"_grid").css("z-index",1e3),jQuery("#"+t.dom_id+"_grid")[0].addJSONData(e),this.displayRowCount(e)},displayRowCount:function(e){if(e.total_pages>1){var t="",i="";1===e.page?(t=1,i=e.resultsReturned):(t=(e.page-1)*e.resultsPerPage+1,i=(e.page-1)*e.resultsPerPage+e.resultsReturned);var s=this,r='<li class="owa_rowCount">';r+="Results: "+t+" - "+i,r+="</li>",null===jQuery("#"+s.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_rowCount").html()?jQuery("#"+s.dom_id+" > .owa_resultsExplorerBottomControls > UL").append(r):jQuery("#"+s.dom_id+" > .owa_resultsExplorerBottomControls > UL > .owa_rowCount").html(r)}},injectDomElements:function(e){var t="";t+='<div class="owa_genericHorizontalList explorerTopControls"><ul></ul><div style="clear:both;"></div></div>',t+='<div style="clear:both;"></div>',t+='<table id="'+this.dom_id+'_grid"></table>',t+='<div class="owa_genericHorizontalList owa_resultsExplorerBottomControls"><ul></ul></div>',t+='<div style="clear:both;"></div>';var i=this;jQuery("#"+i.dom_id).append(t),jQuery("#"+i.dom_id+" > .explorerTopControls > ul").append(OWA.util.sprintf('<li class="controlItem"><span class="label">%s:</span> <span id="%s"></span></li>',OWA.l("Secondary Dimension"),this.dom_id+"_grid_secondDimensionChooser"));var s=new OWA.dimensionPicker("#"+this.dom_id+"_grid_secondDimensionChooser");s.setExclusions(this.getDimensions(e)),s.setDimensions(e.relatedDimensions),s.display(),jQuery("#"+i.dom_id+"_grid_secondDimensionChooser").bind("dimension_change",(function(e,t,s){jQuery("#"+i.dom_id).trigger("secondary_dimension_change",[i.previousDimensionName,s]),i.previousDimensionName=s})),jQuery("#"+i.dom_id+" > .explorerTopControls > ul").append('<li class="controlItem"><span class="label">Filter:</span> <span class="constraintPicker"></span></li>');var r="#"+this.dom_id+" > .explorerTopControls > ul > .controlItem > .constraintPickerButton",n="#"+this.dom_id+" > .explorerTopControls > ul > .controlItem > .constraintPicker";jQuery(r).button(),this.constraintPicker=new OWA.constraintBuilder(n,{}),this.constraintPicker.setRelatedDimensions(e.relatedDimensions,[]),this.constraintPicker.setRelatedMetrics(e.relatedMetrics,[]);var o=new OWA.uri(e.self).getQueryParam("owa_constraints");this.constraintPicker.display(o),jQuery(n).bind("constraint_change",(function(e,t){jQuery("#"+i.dom_id).trigger("constraint_change",[t])}))},setGridOptions:function(e){var t=this,i=[],s="";for(var r in this.gridColumnOrder=[],e.resultsRows[0])if(this.options.excludeColumns.length>0)for(var n=0;n<=this.options.excludeColumns.length-1;n++)this.options.excludeColumns[n]!=r&&(s=this.makeGridColumnDef(e.resultsRows[0][r]),i.push(s),this.gridColumnOrder.push(e.resultsRows[0][r].name));else s=this.makeGridColumnDef(e.resultsRows[0][r]),i.push(s),this.gridColumnOrder.push(e.resultsRows[0][r].name);jQuery("#"+t.dom_id+"_grid").jqGrid({jsonReader:{repeatitems:!1,root:"resultsRows",cell:"",id:"",page:"page",total:"total_pages",records:"resultsReturned"},afterInsertRow:function(e,t,i){},datatype:"local",colModel:i,rownumbers:t.options.showRowNumbers,viewrecords:!0,rowNum:e.resultsReturned,height:"100%",autowidth:!0,hoverrows:!1,sortname:e.sortColumn,sortorder:e.sortOrder,onSortCol:function(e,i,s){return jQuery("#"+t.dom_id).trigger("sort_column_change",[e,s]),"stop"}});for(var o=0;o<i.length;o++){var a={};"owa_dimensionGridCell"==i[o].classes?a["text-align"]="left":a["text-align"]="right",e.sortColumn,i[o].name,jQuery("#"+t.dom_id+"_grid").jqGrid("setLabel",i[o].name,"",a)}},makeGridColumnDef:function(e){var t="",i="",s="",r="",n="",o=!0,a=!1,l="";return"dimension"===e.result_type?(i="left",r="owa_dimensionGridCell"):(i="right",r="owa_metricGridCell",n=100,o=!1,a=!0),t="string"===e.data_type?"text":"number",s=e.link?"urlFormatter":"useServerFormatter",this.options.columnFormatters.hasOwnProperty(e.name)&&(s=this.options.columnFormatters[e.name]),this.columnLinks.hasOwnProperty(e.name)&&(l=this.columnLinks[e.name].template),{name:e.name,index:e.name+"",label:e.label,sorttype:t,align:i,formatter:s,classes:r,width:n,resizable:o,fixed:a,realColName:e.name,datefmt:"",link_template:l}},getDimensions:function(e){var t=new OWA.uri(e.self);return OWA.util.urldecode(t.getQueryParam("owa_dimensions")).split(",")}},OWA.constraintBuilder=function(e,t){this.dom_selector=e,this.options={},this.constraints={},this.relatedDimensions={},this.relatedMetrics={}},OWA.constraintBuilder.prototype={operators:{"==":"Exactly Matching","!=":"Not Matching",">":"Greater than","<":"Less than","=@":"Contains"},parseConstraintString:function(e){return con_obj={name:"",value:"",operator:""},con_obj},constraintsStringToArray:function(e){var t=[],i=[];if(e){OWA.util.strpos(e,",")?t=e.split(","):t.push(e);for(var s=0;s<t.length;s++)for(operator in this.operators)if(this.operators.hasOwnProperty(operator)&&OWA.util.strpos(t[s],operator)){var r=t[s].split(operator),n={name:r[0],operator:operator,value:r[1]};i.push(n)}}return i},display:function(e){var t=this.constraintsStringToArray(e);this.createConstraintAssembler(t)},createConstraintAssembler:function(e){var t=this;jQuery(t.dom_selector).append('<div class="constraintPickerContainer"></div>');var i=t.dom_selector+" > .constraintPickerContainer";jQuery(i).append('<span class="toggle-button"></span><div class="builder"><ul></ul><div style="clear:both;"></div><div class="add-button"></div><div class="apply-button"></div>');var s=i+" > .toggle-button",r=i+" > .builder";if(jQuery(r).hide(),e.length>0)for(var n=0;n<e.length;n++)this.addNewConstraintRow(r+" > ul",e[n].name,e[n].operator,e[n].value);else this.addNewConstraintRow(r+" > ul");jQuery(s).button({icons:{primary:"ui-icon-blank",secondary:"ui-icon-triangle-1-s"},label:OWA.l("Select...")}).click((function(){jQuery(r).toggle()})),jQuery(r+" > .add-button").button({label:OWA.l("+ Add Filter ")}).click((function(){t.addNewConstraintRow(r+" > ul")})),jQuery(r+" > .apply-button").button({label:OWA.l("Apply")}).click((function(){var e="";jQuery(r+" > ul > li").each((function(t){var i=jQuery(this).children(".constraintDimensionPicker").children(".dimensionPicker").children(".dim-list").val(),s=jQuery(this).children(".constraintOperatorPicker").children(".operator-list").selectmenu("value"),n=jQuery(this).children(".constraintValueField").val();n&&(e+=i+s+n,t<jQuery(r+" > ul > li").length-1&&(e+=","))}));jQuery(t.dom_selector).trigger("constraint_change",[e])}))},setRelatedDimensions:function(e,t){this.relatedDimensions=e},setRelatedMetrics:function(e,t){this.relatedMetrics=e},combineRelatedMetricsWithDimensions:function(){var e=!1,t=!1;if(OWA.util.countObjectProperties(this.relatedDimensions)>0&&(t=!0),OWA.util.countObjectProperties(this.relatedMetrics)>0&&(e=!0),e&&t){var i=this.relatedDimensions;for(metric in this.relatedMetrics)this.relatedMetrics.hasOwnProperty(metric)&&(i[metric]=this.relatedMetrics[metric]);return i}return e?this.relatedMetrics:t?this.relatedDimensions:void 0},addNewConstraintRow:function(e,t,i,s){jQuery(e).append('<LI class="constraintRow"><span class="constraintDimensionPicker"></span> <span class="constraintOperatorPicker"></span><input class="constraintValueField" type="text" size="30"><span class="constraintRemoveButton">X</span></LI>');var r=e+" > li:last > .constraintDimensionPicker",n=new OWA.dimensionPicker(r);n.setDimensions(this.combineRelatedMetricsWithDimensions()),n.display(t),this.makeOperatorPicker(e+" > li:last > .constraintOperatorPicker",i),s&&jQuery(e+" > li:last > .constraintValueField").val(s),jQuery(e+"> li:last > .constraintRemoveButton").button({label:OWA.l("X")}).click((function(){jQuery(this).parent().remove()}))},makeOperatorPicker:function(e,t){var i="";for(operator in i+='<select name="operator-list" class="operator-list">',this.operators)this.operators.hasOwnProperty(operator)&&(i+=OWA.util.sprintf('<option value="%s">%s</option>',operator,this.operators[operator]));i+="</select>",i+="",jQuery(e).append(i),jQuery(e+" > .operator-list").selectmenu({width:200}),t&&jQuery(e+" > .operator-list").selectmenu("value",t)}},
/**
 * OWA Sparkline Implementation
 * 
 * @author      Peter Adams <peter@openwebanalytics.com>
 * @web            <a href="http://www.openwebanalytcs.com">Open Web Analytics</a>
 * @copyright   Copyright &copy; 2006-2010 Peter Adams <peter@openwebanalytics.com>
 * @license     http://www.gnu.org/copyleft/gpl.html GPL v2.0
 * @category    owa
 * @package     owa
 * @version        $Revision$
 * @since        owa 1.3.0
 */
OWA.sparkline=function(e){this.config=OWA.config||"",this.dom_id=e||"",this.data="",this.options={type:"line",lineWidth:2,width:"100px",height:"20px",spotRadius:0,minSpotColor:"#FF0000",maxSpotColor:"#00FF00"}},OWA.sparkline.prototype={mergeOptions:function(e){for(option in e)e.hasOwnProperty(option)&&(this.options[option]=e[option])},setDomId:function(e){this.dom_id=e,this.domSelector=this.dom_id+" > .sparkline";var t=this;jQuery("#"+t.dom_id).bind("new_result_set",(function(e,i){jQuery(t.domSelector).remove(),t.generate(i)}))},getOption:function(e){if(this.options.hasOwnProperty(e))return this.options[e]},setOption:function(e,t){this.options[e]=t},generate:function(e,t,i){t&&this.setDomId(t),t=this.dom_id,i&&this.mergeOptions(i);var s=e.getSeries(this.options.metric,"",this.options.filter);s||(s=[0,0,0]);this.domSelector;jQuery("#"+t).append('<p class="sparkline"></p>'),this.loadFromArray(s)},render:function(){jQuery("#"+this.dom_id).sparkline("html",this.options)},loadFromArray:function(e){var t="#"+this.domSelector;jQuery(t).sparkline(e,this.options)},setHeight:function(e){this.options.height=e},setWidth:function(e){this.options.width=e}},OWA.areaChart=function(e){if(this.options={series:[],height:125,width:"99%",xaxis:{mode:"time"},timeformat:"%m/%d",showGrid:!0,showLegend:!0,showDots:!0,lineWidth:4,autoResizeCharts:!0,fillColor:"rgba(202,225,255, 0.6)",colors:["#1874CD","#dba255","#919733"]},e)for(option in e)e.hasOwnProperty(option)&&(this.options[option]=e[option]);this.dom_id="",this.domSelector="",this.init=!1},OWA.areaChart.prototype={setDomId:function(e){this.dom_id=e,this.domSelector="#"+e+" > .owa_areaChart";var t=this;jQuery("#"+t.dom_id).bind("new_result_set",(function(e,i){t.generate(i)}))},getOption:function(e){if(this.options.hasOwnProperty(e))return this.options[e]},setOption:function(e,t){this.options[e]=t},getContainerHeight:function(){return jQuery("#"+this.dom_id).height()},formatValue:function(e,t){switch(e){case"yyyymmdd":var i=1*t.substring(0,4),s=1*t.substring(4,6)-1,r=1*t.substring(6,8),n=Date.UTC(i,s,r,0,0,0,0);t=n,OWA.debug("year: %s, month: %s, day: %s, timestamp: %s",i,s,r,n);break;case"currency":t/=100}return t},timestampFormatter:function(e){var t=new Date(1*e),i=t.getUTCDate();return t.getUTCMonth()+1+"/"+i+"/"+t.getUTCFullYear()},generate:function(e,t,i){OWA.debug("generating area chart for "+i),i&&this.setDomId(i),i=this.dom_id,t&&(this.options.series=t);var s=this.domSelector;if(jQuery(s).remove(),e.resultsRows.length>0){var r=[];t=this.options.series;for(var n=[],o=0;o<=t.length-1;o++){for(var a=t[o].x,l=t[o].y,d=0;d<=e.resultsRows.length-1;d++){data_type_x=e.resultsRows[d][a].data_type,data_type_y=e.resultsRows[d][l].data_type;var c=[this.formatValue(data_type_x,e.resultsRows[d][a].value),this.formatValue(data_type_y,e.resultsRows[d][l].value)];n.push(c)}var h=e.getMetricLabel(l);r.push({label:h,data:n})}OWA.debug("ac init not set"),this.setupAreaChart(t,i);var u=n.length;n.length>10&&(u=10);var p={yaxis:{tickDecimals:0},xaxis:{ticks:u,tickDecimals:null},grid:{show:this.options.showGrid,hoverable:!0,autoHilight:!0,borderWidth:0,borderColor:null},series:{points:{show:this.options.showDots,fill:this.options.showDots},lines:{show:!0,fill:!0,fillColor:this.options.fillColor,lineWidth:this.options.lineWidth}},colors:this.options.colors,legend:{position:"ne",margin:[0,-10],show:this.options.showLegend}};"yyyymmdd"===data_type_x&&(p.xaxis.mode="time",p.xaxis.timeformat=this.options.timeformat),OWA.debug("Plotting area graph in "+s);var f=jQuery(s);jQuery.plot(f,r,p),this.init=!0}else jQuery("#"+i).html("No data is available for this time period"),jQuery("#"+i).css("height","50px")},showTooltip:function(e,t,i){jQuery('<div id="tooltip">'+i+"</div>").css({position:"absolute",display:"none",top:t+5,left:e+5,border:"1px solid #cccccc",padding:"2px","background-color":"#ffffff",opacity:.9}).appendTo("body").fadeIn(100)},setupAreaChart:function(e,t){t=t||this.dom_id;var i=this,s=(jQuery("#"+t).css("width"),this.getContainerHeight()||this.getOption("height"));jQuery("#"+t).html('<div class="owa_areaChart"></div>'),jQuery(i.domSelector).css("width",this.getOption("width")),jQuery(i.domSelector).css("height",s);var r=null;jQuery(i.domSelector).bind("plothover",(function(e,t,s){if(jQuery("#x").text(t.x.toFixed(2)),jQuery("#y").text(t.y.toFixed(2)),s){if(r!=s.datapoint){r=s.datapoint,jQuery("#tooltip").remove();var n=s.datapoint[0].toFixed(0),o=s.datapoint[1].toFixed(0);"time"===i.options.xaxis.mode&&(n=i.timestampFormatter(n)),i.showTooltip(s.pageX-75,s.pageY-50,n+"<BR><B>"+s.series.label+":</B> "+o)}}else jQuery("#tooltip").remove(),r=null}))}},OWA.pieChart=function(e){this.options={height:200,width:200,metric:"",dimension:"",metrics:[],numSlices:5,showGrid:!0,showDots:!0,showLegend:!0,autoSizeWidth:!0},e&&this.mergeOptions(e),this.dom_id="",this.domSelector=""},OWA.pieChart.prototype={mergeOptions:function(e){for(option in e)e.hasOwnProperty(option)&&(this.options[option]=e[option])},setDomId:function(e){this.dom_id=e,this.domSelector="#"+this.dom_id+" > .owa_pieChart";var t=this;jQuery("#"+t.dom_id).bind("new_result_set",(function(e,i){t.generate(i)}))},getOption:function(e){if(this.options.hasOwnProperty(e))return this.options[e]},setOption:function(e,t){this.options[e]=t},formatValue:function(e,t){switch(e){case"yyyymmdd":var i=1*t.substring(0,4),s=1*t.substring(4,6)-1,r=1*t.substring(6,8),n=Date.UTC(i,s,r,0,0,0,0);t=n,OWA.debug("year: %s, month: %s, day: %s, timestamp: %s",i,s,r,n);break;case"currency":t/=100}return t},setupPieChart:function(){var e=this,t=this.getContainerWidth(),i=this.getContainerWidth();jQuery("#"+e.dom_id).append('<div class="owa_pieChart"></div>'),jQuery(e.domSelector).css("width",t),jQuery(e.domSelector).css("height",i)},generate:function(e,t,i){OWA.debug("generating pie chart"),t&&this.setDomId(t),t=this.dom_id,i&&this.mergeOptions(i);var s=this.domSelector,r=this,n=[],o=0;if(this.options.dimension.length>0)if(e.resultsRows.length>0){var a=this.options.dimension,l=this.options.numSlices,d=this.options.metric,c=0;c=l>e.resultsRows.length?e.resultsRows.length:l;for(var h=0;h<=c-1;h++){var u={label:e.resultsRows[h][a].value,data:1*e.resultsRows[h][d].value};n.push(u),o+=e.resultsRows[h][d].value}if(e.resultsRows.length>c){var p=e.aggregates[d]-o;n.push({label:"others",data:p})}}else jQuery("#"+r.dom_id).append("No data is available for this time period"),jQuery("#"+r.dom_id).css("height","50px");else if(jQuery.isEmptyObject(e.aggregates))jQuery("#"+r.dom_id).append("No data is available for this time period"),jQuery("#"+r.dom_id).css("height","50px");else for(var f=this.options.metrics,g=0;g<=f.length-1;g++){var m=1*e.aggregates[f[g]].value;n.push({label:e.getMetricLabel(f[g]),data:m})}this.init||this.setupPieChart();OWA.debug(JSON.stringify(n)),jQuery.plot(jQuery(s),n,{series:{pie:{show:!0,showLabel:!0}},legend:{show:!1,position:"ne",margin:[-160,50]},colors:["#6BAED6","#FD8D3C","#dba255","#919733"]}),this.init=!0},getContainerWidth:function(){return this.getOption("autoSizeWidth")?jQuery("#"+this.dom_id).width():this.option.width},getContainerHeight:function(){return jQuery("#"+this.dom_id).height()}},OWA.kpiBox=function(e){this.options={template:"#metricInfobox",width:""},e&&this.mergeOptions(e),this.dom_id="",this.domSelector=""},OWA.kpiBox.prototype={mergeOptions:function(e){for(option in e)e.hasOwnProperty(option)&&(this.options[option]=e[option])},setDomId:function(e){this.dom_id=e,this.domSelector=this.dom_id+" > .metricInfoboxesContainer";var t=this;jQuery("#"+t.dom_id).bind("new_result_set",(function(e,i){jQuery(t.domSelector).remove(),t.generate(i)}))},getOption:function(e){if(this.options.hasOwnProperty(e))return this.options[e]},setOption:function(e,t){this.options[e]=t},generate:function(e,t,i){OWA.debug("Generating KPI box for: "+t+" with options: "+JSON.stringify(i)),t&&this.setDomId(t),t=this.dom_id,i&&this.mergeOptions(i);var s="",r="kpiContainer-"+e.guid;for(var n in jQuery("#"+t).append(OWA.util.sprintf('<div id="%s" class="metricInfoboxesContainer" style="width:auto;"></div><div style="clear:both;"></div>',r)),e.aggregates)if(e.aggregates.hasOwnProperty(n)){var o=e.aggregates[n];o.dom_id=t+"-"+e.aggregates[n].name+"-"+e.guid,this.options.label&&(o.label=this.options.label),this.options.width&&(o.width=this.options.width);this.domSelector;var a=o.width||"auto";s=OWA.util.sprintf('<div id ="%s" class="owa_metricInfobox" style="min-width:135px;width:%s">',o.dom_id,a);s+=OWA.util.sprintf('<p class="owa_metricInfoboxLabel">%s</p>',o.label),s+=OWA.util.sprintf('<p class="owa_metricInfoboxLargeNumber">%s</p>',o.formatted_value),s+="</div>",jQuery("#"+r).append(s);var l={metric:e.aggregates[n].name,filter:""};this.options.filter&&(l.filter=this.options.filter),(new OWA.sparkline).generate(e,o.dom_id,l)}}};